<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>【算法/Python】数字提取</title>
    <url>/2023/09/29/%E3%80%90%E7%AE%97%E6%B3%95-Python%E3%80%91%E6%95%B0%E5%AD%97%E6%8F%90%E5%8F%96/</url>
    <content><![CDATA[<p>1.前言<br>数字提取是一个难题，然而爬虫有些时候是非常需要，<br>如果爬下来的数字是错的，整个数学运算就寄了<br><img data-src="/image/929D_294_1.jpg" alt="1"></p>
<span id="more"></span>

<p>像字符串逐个读取这样，这样的算法只能读取一个数字，<br>而且不能读取负数，百分数等</p>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">def numget(<span class="keyword">string</span>):</span><br><span class="line">    <span class="keyword">a</span> = <span class="string">&#x27;&#x27;</span>   <span class="comment"># 将空值赋值给a</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="keyword">string</span>:    <span class="comment"># 将字符串进行遍历</span></span><br><span class="line">        <span class="keyword">if</span> str.isdigit(i)==True:    <span class="comment"># 判断i是否为数字，如果“是”返回True，“不是”返回False</span></span><br><span class="line">            <span class="keyword">a</span> += i   <span class="comment"># 如果i是数字格式，将i以字符串格式加到a上</span></span><br><span class="line">        elif i==<span class="string">&quot;.&quot;</span>:</span><br><span class="line">            <span class="keyword">a</span>+=<span class="string">&quot;.&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">a</span> ==<span class="string">&quot;&quot;</span>:</span><br><span class="line">        <span class="keyword">a</span>+=<span class="string">&quot;0&quot;</span></span><br><span class="line">    <span class="literal">return</span> <span class="keyword">a</span></span><br></pre></td></tr></table></figure>

<p>如果用现成的re.findall无法解决百分数，负数，小数点的问题</p>
<figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"><span class="built_in">str</span>=<span class="string">&quot;很好hh-20.1计算机11.1你好90%我 -50&quot;</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="built_in">print</span>(re.<span class="property">findall</span>(<span class="string">&quot;\d+&quot;</span>,<span class="built_in">str</span>))</span><br><span class="line"># 输出：[<span class="string">&#x27;20&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;90&#x27;</span>, <span class="string">&#x27;50&#x27;</span>]</span><br></pre></td></tr></table></figure>
<p>再试试正则表达式呢<br>网上找到的常用方法</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">sentence = <span class="string">&quot;很好hh-20.1计算机11.1你好90%我 -50&quot;</span></span><br><span class="line">s = [<span class="built_in">float</span>(s) <span class="keyword">for</span> s <span class="keyword">in</span> re.findall(<span class="string">r&#x27;-?\d+\.?\d*&#x27;</span>, sentence)]</span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line"><span class="comment">#输出：[-20.1, 11.1, 90.0, -50.0]</span></span><br></pre></td></tr></table></figure>
<p>然而寄在百分数上了</p>
<p>但其实好像是能做的，把%的匹配给加上</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">sentence = <span class="string">&quot;很好hh-20.1计算机11.1你好90%我 -50&quot;</span></span><br><span class="line">s2 = [s  <span class="keyword">for</span> s <span class="keyword">in</span> re.findall(<span class="string">r&#x27;-?\d+%?\.?\d*&#x27;</span>, sentence)  ]</span><br><span class="line">s3=[]</span><br><span class="line"><span class="keyword">for</span> s <span class="keyword">in</span> s2:</span><br><span class="line">    <span class="keyword">if</span> is_number(s)==<span class="literal">False</span>:</span><br><span class="line">        s=s.replace(<span class="string">&quot;%&quot;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line">        s=<span class="built_in">float</span>(s)/<span class="number">100</span></span><br><span class="line">    s3.append(s)</span><br><span class="line"><span class="built_in">print</span>(s3)</span><br><span class="line"><span class="comment">#[&#x27;-20.1&#x27;, &#x27;11.1&#x27;, 0.9, &#x27;-50&#x27;]</span></span><br></pre></td></tr></table></figure>
<p>其实还是挺麻烦的</p>
<p>2.自己乱写的算法，写得超级超级的乱<br>在数字提取之前应该需要一个判断数字的函数<br>isdigit()可以判断单个字符<br>可能会有疏漏，但基本满足了需求</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">numget</span>(<span class="params">string</span>):</span><br><span class="line">    a = <span class="string">&#x27;&#x27;</span>   <span class="comment"># 将空值赋值给a</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> string:    <span class="comment"># 将字符串进行遍历</span></span><br><span class="line">        <span class="keyword">if</span> is_number(i)==<span class="literal">True</span>:    <span class="comment"># 判断i是否为数字</span></span><br><span class="line">            a += i</span><br><span class="line">        <span class="keyword">if</span> i==<span class="string">&quot;.&quot;</span> <span class="keyword">or</span> i==<span class="string">&quot;%&quot;</span> <span class="keyword">or</span> i==<span class="string">&quot;-&quot;</span>:</span><br><span class="line">            a+=i</span><br><span class="line">        <span class="keyword">elif</span> is_number(i)==<span class="literal">False</span> :</span><br><span class="line">            a+=<span class="string">&quot; &quot;</span> <span class="comment">#为数字之间制造间隔</span></span><br><span class="line">    <span class="keyword">if</span> a ==<span class="string">&quot;&quot;</span>:</span><br><span class="line">        a+=<span class="string">&quot;0&quot;</span></span><br><span class="line">	<span class="comment">#非数字部分会全部变成空格，所以要删掉空格并分离数字</span></span><br><span class="line">    numlist=spaceremove(a)</span><br><span class="line">	<span class="comment">#删掉空格然后分离，获取数字断点</span></span><br><span class="line">    temp=tempsolve(numlist)</span><br><span class="line">	<span class="comment">#获取每个数字的区间</span></span><br><span class="line"></span><br><span class="line">    arr=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> temp:</span><br><span class="line">        e1,e2=i[<span class="number">0</span>],i[<span class="number">1</span>]</span><br><span class="line">        t=a[e1:e2+<span class="number">1</span>]</span><br><span class="line">        arr.append(t) <span class="comment">#arr就是分离出的数字列表</span></span><br><span class="line">    arr1=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> arr:</span><br><span class="line">        i=numchange(i) <span class="comment">#把百分数换成小数，并把其他数字换成浮点数</span></span><br><span class="line">        arr1.append(i)</span><br><span class="line">    <span class="keyword">return</span> arr1</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">spaceremove</span>(<span class="params"><span class="built_in">str</span></span>):</span><br><span class="line">    <span class="comment">#判断数字分隔</span></span><br><span class="line">    <span class="built_in">list</span>=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(<span class="built_in">str</span>)):</span><br><span class="line">        e1=<span class="built_in">str</span>[i]</span><br><span class="line">        <span class="keyword">if</span> e1.isdigit()==<span class="literal">True</span> <span class="keyword">or</span> e1==<span class="string">&quot;.&quot;</span> <span class="keyword">or</span> e1==<span class="string">&quot;%&quot;</span> <span class="keyword">or</span> e1==<span class="string">&quot;-&quot;</span>:</span><br><span class="line">            <span class="built_in">list</span>.append(i)</span><br><span class="line"></span><br><span class="line">    temp=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(<span class="built_in">list</span>)):</span><br><span class="line">        e1=<span class="built_in">list</span>[i]</span><br><span class="line">        <span class="keyword">if</span> i&lt;<span class="built_in">len</span>(<span class="built_in">list</span>)-<span class="number">1</span>:</span><br><span class="line">            e2=<span class="built_in">list</span>[i+<span class="number">1</span>]</span><br><span class="line">            <span class="keyword">if</span> e2 -e1!=<span class="number">1</span>:</span><br><span class="line">                temp.append(e1+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">if</span> temp[<span class="number">0</span>]!=<span class="number">0</span>:</span><br><span class="line">        temp1=[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> temp:</span><br><span class="line">            temp1.append(i)</span><br><span class="line">        temp1.append(<span class="built_in">list</span>[-<span class="number">1</span>])</span><br><span class="line">        temp=temp1</span><br><span class="line">    <span class="keyword">return</span> temp</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">tempsolve</span>(<span class="params">numlist</span>):</span><br><span class="line">    <span class="comment">#判断数字的区间 最后return一个复合列表</span></span><br><span class="line">    temp = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(numlist)):</span><br><span class="line">        e1 = numlist[i]</span><br><span class="line">        <span class="keyword">if</span> i &lt; <span class="built_in">len</span>(numlist) - <span class="number">1</span>:</span><br><span class="line">            e2 = numlist[i + <span class="number">1</span>]</span><br><span class="line">            temp1 = []</span><br><span class="line">            temp1.append(e1)</span><br><span class="line">            temp1.append(e2)</span><br><span class="line">            temp.append(temp1)</span><br><span class="line">    <span class="keyword">return</span> temp</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">numchange</span>(<span class="params"><span class="built_in">str</span></span>):</span><br><span class="line">    <span class="comment">#处理百分数</span></span><br><span class="line">    a=<span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">if</span> i==<span class="string">&quot;%&quot;</span>:</span><br><span class="line">            a+=<span class="string">&quot;%&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="built_in">str</span>=<span class="built_in">float</span>(<span class="built_in">str</span>)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">if</span> a==<span class="string">&quot;%&quot;</span>:</span><br><span class="line">            b=<span class="string">&quot;&quot;</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">str</span>:</span><br><span class="line">                <span class="keyword">if</span> i.isdigit()==<span class="literal">True</span>:</span><br><span class="line">                    b+=i</span><br><span class="line">            <span class="keyword">if</span> b!=<span class="string">&quot;&quot;</span>:</span><br><span class="line">                <span class="built_in">str</span>=<span class="built_in">int</span>(b)/<span class="number">100</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">str</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">str</span>=<span class="string">&quot;很好hh-20.1计算机11.1你好90%我 -50&quot;</span></span><br><span class="line"><span class="built_in">print</span>(numget(<span class="built_in">str</span>))</span><br><span class="line"><span class="comment"># 输出结果：[-20.1, 11.1, 0.9, -50.0]</span></span><br></pre></td></tr></table></figure>


<p><img data-src="/image/929D_262_1.jpg" alt="2"></p>
]]></content>
      <categories>
        <category>算法</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>基于hexo部署github的个人网站</title>
    <url>/2023/09/29/%E5%9F%BA%E4%BA%8Ehexo%E9%83%A8%E7%BD%B2github%E7%9A%84%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99/</url>
    <content><![CDATA[<p>其他的链接<br><a href="/2023/09/26/%E8%B5%84%E6%96%99/">如何实现单设备部署多个github</a><br>1.搭建环境<br>(1)<br><a href="https://nodejs.org/en">Nodejs下载</a><br>(2)<br><a href="https://git-scm.com/download/win">Git下载</a><br><img data-src="/image/35_1.jpg" alt="1"></p>
<span id="more"></span>
<p>2.Github基础配置<br>(1)注册登录<br><a href="https://github.com/">Github</a><br>(登不上请科学上网)</p>
<p>(2)创建新的仓库(repository)<br>命名尽量按 用户名&#x2F;用户名.github.io<br>其他没要求</p>
<p>(3)SSH创建<br>右侧栏Setting点击后<br>在左侧栏进入带有的SSH字眼<br>创建一个新的SSH,名称随意,内容后续有用</p>
<p>3.Hexo<br>(1)创建一个空的文件夹（可自己命名）<br>在文件夹里，右键点进Git Bash里<br>并在黑色命令框里依次输入<br>记住在命令框粘贴不是Ctrl+V,尽量用鼠标右键</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-cli </span><br><span class="line">hexo init </span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
<p>(2)成功后,尝试输入</p>
<figure class="highlight verilog"><table><tr><td class="code"><pre><span class="line">hexo <span class="keyword">generate</span> </span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>
<p>可简写为</p>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">hexo g</span></span><br><span class="line"><span class="attribute">hexo s</span></span><br></pre></td></tr></table></figure>
<p>(3)上述代码成功<br>按住Ctrl就可以打开本地链接<br>测试成功后用键盘输入</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="variable">Ctrl</span><span class="operator">+</span><span class="built_in">C</span></span><br></pre></td></tr></table></figure>
<p>可以关闭本地服务器<br><img data-src="/image/163_1.jpg" alt="2"><br>4.SSH公钥创建<br>(1)用cd命令进入SSH根目录</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">cd ~<span class="regexp">/.ssh/</span></span><br></pre></td></tr></table></figure>
<p>(2)</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -f  ~<span class="regexp">/.ssh/</span>密钥名称 -C <span class="string">&quot;邮箱&quot;</span></span><br></pre></td></tr></table></figure>
<p>(3)在目录找到config文件并更改</p>
<figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line">Host xxxxxx.github.com</span><br><span class="line">    HostName ssh/github.com</span><br><span class="line">    <span class="keyword">User</span> <span class="title">git</span></span><br><span class="line">    IdentityFile ~/.ssh/密钥名称</span><br></pre></td></tr></table></figure>
<p>(4)创建公钥</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line"><span class="built_in">clip</span> &lt; ~<span class="regexp">/.ssh/</span>密钥的名称.pub</span><br></pre></td></tr></table></figure>
<p>在目录下找到密钥名称的pub文件,打开复制里面内容,<br>粘贴到Github的SSH的内容里</p>
<p>(5)添加SSH</p>
<figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line">ssh-<span class="keyword">add</span> xxxxxx <span class="meta">#密钥名称</span></span><br></pre></td></tr></table></figure>
<p>如果执行以上命令出现错误：Could not open a<br>connection to your authentication agent.，<br>那么就需要先执行ssh-agent bash，再执行以上命令</p>
<p>(6)检验是否成功<br>xxxxxx”ssh目录下config文件中的命名</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">ssh</span> -T git<span class="variable">@xxxxxxx</span>.github.com</span><br></pre></td></tr></table></figure>
<p>出现</p>
<figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">You<span class="symbol">&#x27;ve</span> successfully authenticated, </span><br><span class="line">but GitHub does <span class="keyword">not</span> provide shell <span class="keyword">access</span>.</span><br></pre></td></tr></table></figure>
<p>则代表成功</p>
<p>5.配置github<br>(1)点进博客文件夹中的.deploy_git&#x2F;.git中<br>进入Git Bash里</p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">git config <span class="keyword">user</span>.name &quot;用户名&quot;</span><br><span class="line">git config <span class="keyword">user</span>.email &quot;邮箱&quot;</span><br></pre></td></tr></table></figure>
<p>(2)在博客文件夹中的_config.yml文件<br>打开在末尾更改下列代码</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: git@xxxxxx<span class="selector-class">.github</span><span class="selector-class">.com</span>:用户名/用户名<span class="selector-class">.github</span><span class="selector-class">.io</span><span class="selector-class">.git</span></span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<p>如果在github输入的不是上述这个格式，可能会打不开网页</p>
<p>(3)服务器部署<br>在博客文件夹的目录下进入Git Bash<br>依次输入</p>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">hexo clean</span></span><br><span class="line"><span class="attribute">hexo g</span></span><br><span class="line"><span class="attribute">hexo s</span></span><br></pre></td></tr></table></figure>
<p>部署成功后，服务器会有延迟，大概过一两分钟会更新页面<br>可以在github上看部署是否成功，如果失败github会发邮件的</p>
]]></content>
      <categories>
        <category>介绍</category>
      </categories>
      <tags>
        <tag>介绍</tag>
      </tags>
  </entry>
  <entry>
    <title>用Selenium制作前端式爬虫</title>
    <url>/2023/09/28/%E7%94%A8selenum%E5%88%B6%E4%BD%9C%E5%89%8D%E7%AB%AF%E5%BC%8F%E7%88%AC%E8%99%AB/</url>
    <content><![CDATA[<p><img data-src="/image/928D_113_1.jpg" alt="1"><br>笔者也就小白水平，写selenium也是边学边写的<br>本文只是介绍抓取部分模块，怎么处理可以看看上文<br><a href="https://jkysei.space/2023/09/27/%E7%94%A8JS%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%88%B6%E4%BD%9C%E7%9A%84%E7%AE%80%E6%98%93%E7%88%AC%E8%99%AB/">用JS（前端）制作的简易爬虫</a><br>python也有类似CSS选择器的第三方库，后续再更新<br>1.前言<br>大部分的网站都有反爬机制</p>
<span id="more"></span>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">requests.<span class="keyword">get</span>(url,headers,<span class="keyword">timeout</span>)</span><br></pre></td></tr></table></figure>
<p>requests早已经无法爬取网页了，<br>所以希望用一种能够越过反爬虫的第三方库<br>selenium是模拟驱动chrome访问网站的方式越过反爬虫<br>2.Selenium的调用</p>
<p>在Pycharm或pip上安装selenium<br>随后即可import</p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br></pre></td></tr></table></figure>
<p>为了方便修改浏览器设置,引用Options模块</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.<span class="keyword">options</span> <span class="keyword">import</span> <span class="keyword">Options</span></span><br></pre></td></tr></table></figure>
<p>用chrome_options存放options</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">chrome_options</span> = Options()</span><br><span class="line"><span class="attr">chrome_options.page_load_strategy</span> = <span class="string">&#x27;eager&#x27;</span></span><br></pre></td></tr></table></figure>
<p>page_load_strategy是浏览器加载策略，默认是normal，eager则是快速加载<br>在网页资源加载完成时就会立刻关闭，可以省很多时间。<br>网上有很多说有更加快速的方法，说实话是噱头，没有实际用处，<br>照着他的方法，会迅速加载网页然后光速关闭，根本无法正常抓取网页内容<br>eagle已经是最快的策略，更快可以尝试多线程的爬虫。</p>
<p>如果电脑里安装了多个chrome或者python无法获取你的chrome程序位置，<br>可以引用service模块</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">from selenium<span class="selector-class">.webdriver</span><span class="selector-class">.chrome</span><span class="selector-class">.service</span> import Service</span><br></pre></td></tr></table></figure>

<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">service</span>=Service(executable_path=<span class="string">&quot;路径&quot;</span>)</span><br><span class="line"><span class="comment">#注：python存放路径引号内,如果/可以只写一个,但是如果\\要写两个</span></span><br></pre></td></tr></table></figure>

<p>设置好就可以驱动浏览器了</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">driver = webdriver.<span class="constructor">Chrome(<span class="params">service</span>=<span class="params">service</span>,<span class="params">options</span>=<span class="params">chrome_options</span>)</span></span><br></pre></td></tr></table></figure>

<p>随后便可以抓取网页资源</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">driver<span class="selector-class">.get</span>(url)</span><br><span class="line">url_get = driver<span class="selector-class">.page_source</span> <span class="selector-id">#url_get</span> 就是抓取下的网页</span><br><span class="line">driver<span class="selector-class">.close</span>()</span><br><span class="line">driver<span class="selector-class">.quit</span>()</span><br></pre></td></tr></table></figure>

<p>3.报错模块<br>selenium虽然挺稳定，但有时因为网站连接不稳定，<br>就会报错，中途寄掉的情况。。。经常会有<br>特别是爬图，是需要爬到详细页面，页面数量也会倍增。<br>报错一般有，加载timeout，selenium一个狗血的地方，timeout会<br>让整个程序直接中断，所以一定要try，报错了让它except</p>
<p>selenium设置timeout的方式</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">browserset</span>.set_page_load_timeout(<span class="number">100</span>)</span><br><span class="line"><span class="attribute">browserset</span>.set_script_timeout(<span class="number">100</span>)</span><br></pre></td></tr></table></figure>
<p>第一种是页面加载报timeout的错误，退出，第二种是脚本中止加载<br>两者有点小区别，详细请百度。</p>
<p>驱动浏览器大致可以这么写</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#防空链接报错</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">printpause</span>(<span class="params">timepause</span>):</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;***访问超时，程序暂停***&#x27;</span>)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;%d秒后继续&#x27;</span> %timepause)</span><br><span class="line">	time.sleep(timepause) <span class="comment">#报错会一时中止加载</span></span><br><span class="line">	</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">drivebrowser</span>():</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        browser=browser_set() <span class="comment">#browser_set()就是驱动浏览器的函数</span></span><br><span class="line">        <span class="keyword">return</span> browser <span class="comment">#如果try成功了就会return出browser</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        secends = random.randint(<span class="number">120</span>, <span class="number">150</span>) </span><br><span class="line">        printpause(secends) </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;***重试请求***&#x27;</span>)</span><br><span class="line">            browser=browser_set()</span><br><span class="line">            <span class="keyword">return</span> browser </span><br><span class="line">		<span class="keyword">except</span>:         <span class="comment">#写多几层保险一点</span></span><br><span class="line">            printpause(<span class="number">150</span>)</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;***重试请求***&#x27;</span>)</span><br><span class="line">                browser=browser_set()</span><br><span class="line">                <span class="keyword">return</span> browser</span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;***访问失败，程序继续***&#x27;</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>  <span class="comment">#实在不行就跳过了</span></span><br></pre></td></tr></table></figure>
<p>第二种报错就是访问超时的报错，也建议用try函数<br>访问函数也可以照着上面写try，except，这里就不多写了</p>
<p>写了这么多try之后，我也在想应该不可能报错了，其实上还是<br>会报的只不过几率很小很小，所以大型爬虫操作还是悠着点，<br>几千秒的运行中间报了错可不是开玩笑的。。</p>
<p><img data-src="/image/928D_91_1.jpg" alt="2"></p>
<p>4.额额额什么？<br>selenium无法正确抓取网页了？？<br>现在的情况是，单是selenium的爬虫已经会被网站拦截了</p>
<p>搜索别人的经验后，了解到了防侦测脚本驱动浏览器的第三库</p>
<figure class="highlight elm"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> undetected_chromedriver <span class="keyword">as</span> uc</span><br></pre></td></tr></table></figure>
<p>以下是抄的作业<br>以咱的水平看不懂，但确实神奇的解决了问题</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">browser_set</span>():</span><br><span class="line">    <span class="comment">#浏览器引擎设置</span></span><br><span class="line">    options = webdriver.ChromeOptions()</span><br><span class="line">	<span class="comment">#取出chrome的option设置</span></span><br><span class="line">    options.add_argument(<span class="string">&quot;--headless&quot;</span>)</span><br><span class="line">	<span class="comment">#后台驱动chrome</span></span><br><span class="line">    <span class="comment"># 去除“Chrome正受到自动测试软件的控制”的显示</span></span><br><span class="line">    options.add_experimental_option(<span class="string">&quot;excludeSwitches&quot;</span>, [<span class="string">&quot;enable-automation&quot;</span>])</span><br><span class="line">    browserset = webdriver.Chrome(options=options)</span><br><span class="line">    <span class="comment"># 设置headers</span></span><br><span class="line">    browserset.execute_cdp_cmd(<span class="string">&quot;Network.setExtraHTTPHeaders&quot;</span>,</span><br><span class="line">                           &#123;<span class="string">&quot;headers&quot;</span>:</span><br><span class="line">                                &#123;</span><br><span class="line">                                    <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36&quot;</span>,</span><br><span class="line">                                    &#125;</span><br><span class="line">                            &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 防止网站检测selenium的webdriver</span></span><br><span class="line">    browserset.execute_cdp_cmd(<span class="string">&quot;Page.addScriptToEvaluateOnNewDocument&quot;</span>, &#123;</span><br><span class="line">        <span class="string">&quot;source&quot;</span>: <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                Object.defineProperty(navigator, &#x27;webdriver&#x27;, &#123;</span></span><br><span class="line"><span class="string">                    get: () =&gt; False</span></span><br><span class="line"><span class="string">                &#125;)</span></span><br><span class="line"><span class="string">            &quot;&quot;&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line">    browserset.set_page_load_timeout(<span class="number">100</span>)</span><br><span class="line">    browserset.set_script_timeout(<span class="number">100</span>)</span><br><span class="line">    <span class="keyword">return</span> browserset</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>介绍</category>
      </categories>
      <tags>
        <tag>爬虫</tag>
      </tags>
  </entry>
  <entry>
    <title>用JS（前端）制作的简易爬虫</title>
    <url>/2023/09/27/%E7%94%A8JS%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%88%B6%E4%BD%9C%E7%9A%84%E7%AE%80%E6%98%93%E7%88%AC%E8%99%AB/</url>
    <content><![CDATA[<p>本文主要介绍用油猴（Tampermonkey）实现的前端爬虫<br>不涉及跨域传输，非常基础的内容</p>
<p>优点很明显，快速（有时按需求可以几分钟写完），针对性，不用担心反爬<br>缺点，不同排布的网站就会失效，或者网站更新就寄了</p>
<p>核心为CSS选择器<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Selectors">参考1</a><br><a href="https://www.runoob.com/jsref/met-document-queryselector.html">参考2</a><br><img data-src="/image/232_1.jpg" alt="1"></p>
<span id="more"></span>
<p>1.主要语法</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.<span class="built_in">querySelector</span>(<span class="string">&quot;标签(层级)定位/类定位/ID定位&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>（1）例:标签(层级)定位</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello</span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span>Hallo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.<span class="built_in">querySelector</span>(<span class="string">&quot;p&quot;</span>).innerText #取出的是Hallo和你好</span><br></pre></td></tr></table></figure>
<p>如果想要只取出Hallo则应写成</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.<span class="built_in">querySelector</span>(<span class="string">&quot;div&gt;p&quot;</span>).innerText #取出的是Hallo</span><br></pre></td></tr></table></figure>
<p>（2）例：类定位</p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=&quot;<span class="symbol">Hello_div</span>&quot;&gt;<span class="symbol">Hello</span></span><br><span class="line">	&lt;<span class="symbol">p</span>&gt;<span class="symbol">Hallo</span>&lt;/<span class="symbol">p</span>&gt;</span><br><span class="line">&lt;/<span class="symbol">div</span>&gt;</span><br><span class="line">&lt;<span class="symbol">div</span> <span class="symbol">class</span>=&quot;<span class="symbol">nihao_div</span>&quot;&gt;</span><br><span class="line">	&lt;<span class="symbol">p</span>&gt;你好&lt;/<span class="symbol">p</span>&gt;</span><br><span class="line">&lt;/<span class="symbol">div</span>&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.<span class="built_in">querySelector</span>(<span class="string">&quot;.Hello_div&quot;</span>).innerText #取出的是Hello和Hallo</span><br><span class="line"><span class="built_in">document</span>.<span class="built_in">querySelector</span>(<span class="string">&quot;.nihao_div&quot;</span>).innerText #取出的是你好</span><br></pre></td></tr></table></figure>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line">注：如果<span class="keyword">class</span>名中存在空格的情况,如<span class="string">&quot;Hello div&quot;</span>,应写成<span class="string">&quot;.Hello.div&quot;</span></span><br></pre></td></tr></table></figure>
<p>Class定位也可以像进行层级，可用于存在多个标签叠放方式的情况<br>（3）ID定位<br>ID基本与Class相同<br>用法为</p>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">&lt;<span class="keyword">div</span> <span class="built_in">class</span>=<span class="string">&quot;nihao&quot;</span>&gt;</span><br><span class="line">	&lt;p&gt;你好&lt;/p&gt;</span><br><span class="line">&lt;/<span class="keyword">div</span>&gt;</span><br><span class="line">document.querySelector(<span class="string">&quot;#nihao&quot;</span>).innerText <span class="comment">#取出的是你好</span></span><br></pre></td></tr></table></figure>

<p>2.innerText和.innerHTML，常用取出方法<br>.innerText用于取出文本<br>.innerHTML可取出这个标签包含的HTML内容<br>.attributes(“属性名”)<br>.style(“样式”)</p>
<p>3.上述基本介绍了js爬虫实现的方法原理<br>下面介绍通过油猴实现的浏览器爬虫<br>新建脚本大致如下<br><img data-src="/image/1_5_1.png" alt="1"><br>前面部分是脚本声明</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">//</span> @name         New Userscript   <span class="comment">#（脚本名称）</span></span><br><span class="line"><span class="regexp">//</span> @namespace    http:<span class="regexp">//</span>tampermonkey.net/</span><br><span class="line"><span class="regexp">//</span> @version      <span class="number">0.1</span></span><br><span class="line"><span class="regexp">//</span> @description  try to take over the world!   <span class="comment">#（介绍）</span></span><br><span class="line"><span class="regexp">//</span> @author       You  （制作者的名字）</span><br><span class="line"><span class="regexp">//</span> @match        http:<span class="regexp">//</span>*/*   <span class="comment">#（适用的网站）</span></span><br><span class="line"><span class="regexp">//</span> @icon         data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==   <span class="comment">#头像</span></span><br><span class="line"><span class="regexp">//</span> @grant        none    <span class="comment">#第三方库调用</span></span><br></pre></td></tr></table></figure>

<p>下面部分是具体代码部分，可以直接删掉</p>
<figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">(<span class="name">function</span>() &#123;</span><br><span class="line">    <span class="symbol">&#x27;use</span> strict&#x27;<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">    // Your code here...</span><br><span class="line">&#125;)()<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<p>4.废话不多说下面上一个简单实例<br><img data-src="/image/1_5_2.png" alt="1"><br>其实像类似这样很陈旧的网站，很难定位，<br>因为它根本没有ID，甚至连Class都没有<br>所以想到的是层级定位，写法十分原始<br><img data-src="/image/1_5_3.png" alt="2"><br>可以发现一部分是为”td&gt;div&gt;a&gt;font”的层级写的<br>以下代码可以分别取出文本</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.<span class="built_in">querySelectorAll</span>(<span class="string">&quot;td&gt;div&gt;a&quot;</span>).forEach(el =&gt; &#123;</span><br><span class="line">        <span class="keyword">var</span> Text = el.<span class="built_in">querySelector</span>(<span class="string">&#x27;font&#x27;</span>).innerText</span><br><span class="line">	&#125;)	</span><br></pre></td></tr></table></figure>

<p>数值取出</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">document.querySelectorAll(<span class="string">&quot;td&gt;input&quot;</span>).forEach(<span class="function"><span class="params">el</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> <span class="built_in">Text</span> = el.value</span><br><span class="line">        List.<span class="built_in">push</span>(<span class="built_in">Text</span>)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>
<p>用一个空Array存储然后输出后<br>会发现有一部分是没有取出的<br>因为有另外一部分不是以这个层级排布的<br>不过介绍了<br>下面是全代码,比较乱,将就着看</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getTotal</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> List = <span class="keyword">new</span> <span class="built_in">Array</span>() </span><br><span class="line">    <span class="keyword">var</span> List1 = <span class="keyword">new</span> <span class="built_in">Array</span>()</span><br><span class="line">    document.querySelectorAll(<span class="string">&quot;td&gt;div&gt;div&gt;a&gt;font&quot;</span>).forEach(<span class="function"><span class="params">e0</span> =&gt;</span> &#123;</span><br><span class="line">        List1.<span class="built_in">push</span>(e0.innerText)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">var</span> n = <span class="number">0</span></span><br><span class="line">    document.querySelectorAll(<span class="string">&quot;td&gt;a&quot;</span>).forEach(<span class="function"><span class="params">el</span> =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> <span class="built_in">Text</span> = el.querySelector(<span class="string">&#x27;font&#x27;</span>).innerText</span><br><span class="line">        n=n+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> (n==<span class="number">16</span>)&#123;</span><br><span class="line">            <span class="keyword">var</span> Text2=List1[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">            List.<span class="built_in">push</span>(Text2)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (n==<span class="number">19</span>)&#123;</span><br><span class="line">            <span class="keyword">var</span> Text3=List1[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">            List.<span class="built_in">push</span>(Text3)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Text</span>!=<span class="string">&quot;&quot;</span>||<span class="built_in">Text</span>!=<span class="literal">null</span>||<span class="built_in">Text</span>!=<span class="literal">undefined</span>)&#123;</span><br><span class="line">            List.<span class="built_in">push</span>(<span class="built_in">Text</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">    document.querySelectorAll(<span class="string">&quot;td&gt;div&gt;a&quot;</span>).forEach(<span class="function"><span class="params">el</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> <span class="built_in">Text</span> = el.querySelector(<span class="string">&#x27;font&#x27;</span>).innerText</span><br><span class="line">        n=n+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> (n==<span class="number">16</span>)&#123;</span><br><span class="line">            <span class="keyword">var</span> Text2=List1[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">            List.<span class="built_in">push</span>(Text2)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (n==<span class="number">19</span>)&#123;</span><br><span class="line">            <span class="keyword">var</span> Text3=List1[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">            List.<span class="built_in">push</span>(Text3)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Text</span>!=<span class="string">&quot;&quot;</span>||<span class="built_in">Text</span>!=<span class="literal">null</span>||<span class="built_in">Text</span>!=<span class="literal">undefined</span>)&#123;</span><br><span class="line">            List.<span class="built_in">push</span>(<span class="built_in">Text</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">var</span> num=<span class="number">1</span></span><br><span class="line">    document.querySelectorAll(<span class="string">&quot;td&gt;input&quot;</span>).forEach(<span class="function"><span class="params">el</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> <span class="built_in">Text</span> = el.value</span><br><span class="line">        num=num+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> (num==<span class="number">5</span>)&#123;</span><br><span class="line">            <span class="keyword">var</span> Select=document.querySelector(<span class="string">&quot;td&gt;select&quot;</span>).size</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (Select==<span class="number">1</span>)&#123;</span><br><span class="line">                Select=<span class="string">&quot;Yes&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                Select=<span class="string">&quot;No&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            List.<span class="built_in">push</span>(Select)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        List.<span class="built_in">push</span>(<span class="built_in">Text</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.<span class="built_in">log</span>(<span class="string">&#x27;Success:&#x27;</span>,List);</span><br><span class="line">&#125;</span><br><span class="line">getTotal()</span><br></pre></td></tr></table></figure>

<p>5.结语<br><img data-src="/image/256_1.jpg" alt="1"><br>上面举例了一个比较离谱的例子（很好奇做的时候是怎么不弄混的）<br>其实上现在大部分网站都有类标识，用类定位会更加快速准确</p>
]]></content>
      <categories>
        <category>介绍</category>
      </categories>
      <tags>
        <tag>介绍</tag>
        <tag>前端爬虫</tag>
      </tags>
  </entry>
  <entry>
    <title>【搬运】HTML5游戏 糖豆人</title>
    <url>/2023/10/08/%E7%B3%96%E8%B1%86%E4%BA%BA%E6%B5%8B%E8%AF%95/</url>
    <content><![CDATA[<p><a href="https://github.com/mumuy/pacman">搬运Pacman 吃豆游戏</a></p>
<link rel="shortcut icon" href="/image/favicon.png">
<style>
    .mod-game .info{
        padding: 10px 0;
        margin-bottom: 5px;
        line-height: 20px;
        text-align: center;
        color: #666;
    }
    .mod-game .info p{
        line-height: 20px;
        font-size: 14px;
        color: #666;
    }
    .mod-game .intro{
        padding: 10px 15px;
        background: #f8f8f8;
        border-radius: 5px;
    }
    .mod-game .intro p{
        line-height: 22px;
        text-indent: 2em;
        font-size: 14px;
        color: #666;
    }
    .mod-button{
        height: 32px;
        padding: 15px 0;
        text-align: center;
    }
    .mod-button span,.mod-button a{
        vertical-align: middle;
    }
    .mod-button .btn{
        display: inline-block;
        padding: 0 12px;
        line-height: 26px;
        color: #24292f;
        border: 1px solid #dddede;
        text-decoration: none;
        font-size: 13px;
        color: #24292f;
        border-radius: 2px;
    }
</style>
<div class="wrapper">
    <div class="mod-game">
        <canvas id="canvas" width="960" height="640">不支持画布</canvas>
        <div class="info">
            <p>按 [空格键] 暂停或继续</p>
        </div>	
    </div>
</div>
<script src="/js/game.js"></script>
<script src="/js/index.js"></script>
<script async defer src="https://buttons.github.io/buttons.js"></script>


]]></content>
      <categories>
        <category>测试</category>
      </categories>
  </entry>
  <entry>
    <title>ppt测试</title>
    <url>/2023/10/08/ppt%E6%B5%8B%E8%AF%95/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>【Python/脚本】一个懒得自己打字的md图片插入脚本</title>
    <url>/2023/10/05/%E3%80%90Python-%E8%84%9A%E6%9C%AC%E3%80%91%E4%B8%80%E4%B8%AA%E6%87%92%E5%BE%97%E8%87%AA%E5%B7%B1%E6%89%93%E5%AD%97%E7%9A%84md%E5%9B%BE%E7%89%87%E6%8F%92%E5%85%A5%E8%84%9A%E6%9C%AC/</url>
    <content><![CDATA[<p>1.md图片插入格式</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line">!<span class="selector-attr">[若图片not Found显示的文字]</span>(路径)</span><br></pre></td></tr></table></figure>
<p>一般可以这么写，&#x2F;image自动索引到资源文件</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">![<span class="number">28.</span>webp](<span class="regexp">/image/</span><span class="number">28.</span>webp)</span><br></pre></td></tr></table></figure>
<p><img data-src="/2023/10/05/%E3%80%90Python-%E8%84%9A%E6%9C%AC%E3%80%91%E4%B8%80%E4%B8%AA%E6%87%92%E5%BE%97%E8%87%AA%E5%B7%B1%E6%89%93%E5%AD%97%E7%9A%84md%E5%9B%BE%E7%89%87%E6%8F%92%E5%85%A5%E8%84%9A%E6%9C%AC/1005D_140_1.jpg" alt="1005D_140_1.jpg"></p>
<span id="more"></span>
<p>2.代码十分简单，不到一分钟写完了</p>
<figure class="highlight dust"><table><tr><td class="code"><pre><span class="line"><span class="language-xml">import os</span></span><br><span class="line"><span class="language-xml">filePath = &#x27;D:\\Blog\\Blog1\\source\\_posts\\【图集】10-3图图&#x27;</span></span><br><span class="line"><span class="language-xml">n=0</span></span><br><span class="line"><span class="language-xml">for i,j,k in os.walk(filePath):</span></span><br><span class="line"><span class="language-xml">    for i in k:</span></span><br><span class="line"><span class="language-xml">        n+=1</span></span><br><span class="line"><span class="language-xml">        print(&quot;![</span><span class="template-variable">&#123;&#125;</span><span class="language-xml">](/image/</span><span class="template-variable">&#123;&#125;</span><span class="language-xml">)&quot;.format(i, i)) #中间部分自己改</span></span><br><span class="line"><span class="language-xml">        if n==2:</span></span><br><span class="line"><span class="language-xml">            print(&quot;<span class="comment">&lt;!--more--&gt;</span>&quot;)</span></span><br></pre></td></tr></table></figure>

<p><code>&lt;!--more--&gt;</code><br>用来手动隐藏，图片占首页太长不好看</p>
]]></content>
      <categories>
        <category>介绍</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>【整理/自用】整理一个即兴写的数据整理和导出脚本</title>
    <url>/2023/10/04/%E3%80%90%E6%95%B4%E7%90%86%E3%80%91%E6%95%B4%E7%90%86%E4%B8%80%E4%B8%AA%E5%8D%B3%E5%85%B4%E5%86%99%E7%9A%84%E6%95%B0%E6%8D%AE%E6%95%B4%E7%90%86%E5%92%8C%E5%AF%BC%E5%87%BA%E8%84%9A%E6%9C%AC/</url>
    <content><![CDATA[<p>1.前言<br><img data-src="/image/1002D_239_1.jpg" alt="1"><br>由于以前(一周前)写的一个脚本太过即兴，<br>原数据的长度过于冗长，导致脚本异常的乱，<del><em>想要去回看却完全看不懂了</em></del><br>该脚本主要是处理爬取后杂乱的数据，进行筛选，合并的过程<br>主要是一个整理处理过程的文章，会省略掉很多<br>没什么大用的部分或者简单的部分，处理函数十分<br>物尽其用，没有特别花哨的玩意<br>爬取对象为创业决策（决策天地）的决策结果数据</p>
<span id="more"></span>
<p>2.数据来源<br><a href="www.jctd.net">创业决策</a><br>主要是爬取模拟决策后的各项数据，竞争结果数据，<br>但结果是竞争结果的数据并不全，生产相关数据<br>需要在另一个爬取，所以应该分为两个部分。</p>
<p>3.结果数据</p>
<details>
<summary>
<p>
长数据警告(点我展开)
</p>
</summary>
<p>
[
    "  一般市场价格",
    "(元/台) ",
    "  广告费用投入",
    "(百万元) ",
    "  销售人员数量",
    "(人) ",
    "  销售人员费用",
    "(百万元) ",
    "  产品质量评价",
    "(1--5) ",
    "  研发投入效应",
    "(百万元) ",
    "  一般市场销售量",
    "(台) ",
    "  一般市场销售额",
    "(百万元) ",
    "  理论市场占有率",
    "(%) ",
    "  实际市场占有率",
    "(%) ",
    "  附加市场 I 销售量",
    "(台) ",
    "  附加市场 I 销售额",
    "(百万元) ",
    "  附加市场II 销售量",
    "(台) ",
    "  附加市场II 销售额",
    "(百万元) ",
    "  中标企业",
    "(打***号企业) ",
    "  中标企业投标价格",
    "(台/元) ",
    "  原材料库存量",
    "(台) ",
    "  附件库存量",
    "(台) ",
    "  产品累积库存数量",
    "(台) ",
    "  机器人数量",
    "(个) ",
    "  研究人员数",
    "(个) ",
    "  一般市场计划量",
    "(台) ",
    "  一般市场生产量",
    "(台) ",
    "  维修保养系数",
    "(0--1) ",
    "  合理化系数",
    "(0--1) ",
    "  生产线生产能力",
    "(台/周期) ",
    "  生产人员数",
    "(个) ",
    "  生产线负载率",
    "(%) ",
    "  生产人员负载率",
    "(%) ",
    "  一般市场的产品成本",
    "(元) ",
    "  税前经营成果",
    "(百万元) ",
    "  本周期亏损结转",
    "(百万元) ",
    "  本周期股息支付",
    "(百万元) ",
    "  本周期利润储备",
    "(百万元) ",
    "  本周期中期贷款",
    "(百万元) ",
    "  本周期期末现金",
    "(百万元) ",
    "  总的利润储备额",
    "(百万元) ",
    "  本周期透支贷款",
    "(百万元) ",
    "  资产负债总和",
    "(百万元) ",
    "",
    "",
    "",
    "",
    ""
]
</p>
</details>

<details>
<summary>
<p>
长数据警告(点我展开)
</p>
</summary>
<p>
[
    "各企业市场营销及生产研究报告",
    "(第5周期)",
    "1 to 5       ",
    "6 to 10       ",
    "11 to 15       ",
    "16 to 20       ",
    "21 to 25       ",
    "项目/企业",
    "618",
    "700",
    "642",
    "1150",
    "705",
    "3.5",
    "2",
    "3",
    "1",
    "2.61",
    "88",
    "57",
    "100",
    "40",
    "65",
    "3.36",
    "2.18",
    "3.82",
    "1.53",
    "2.48",
    "1",
    "3",
    "2",
    "3",
    "2",
    ".",
    "",
    "首页     创业导航     创业原理     使用手册     创业流程     决策仿真     教学大纲",
    "本网站系统版权属东华大学旭日工商管理学院信息管理研究所宋福根教授所有，未经授权许可，不得转载或建立镜像",
    "Copyright@2019 上海宏飞科技发展有限公司；沪ICP备2023000744号-1；公安备3101052004737号；电话13916008968",
    "",
    "",
    "",
    "",
    "",
    "2.11",
    "1.03",
    "0.96",
    "0.82",
    "1.43",
    "71474",
    "44043",
    "63957",
    "6187",
    "48072",
    "44.17",
    "30.83",
    "41.06",
    "7.11",
    "33.89",
    "5.3",
    "3.7",
    "5",
    "0.8",
    "4.1",
    "5.6",
    "3.9",
    "5.2",
    "0.9",
    "4.3",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "3200",
    "3200",
    "3200",
    "2000",
    "3200",
    "2.17",
    "2.17",
    "2.17",
    "1.36",
    "2.17",
    "-",
    "-",
    "-",
    "-",
    "-",
    "0",
    "700",
    "0",
    "0",
    "684",
    "179",
    "774",
    "320",
    "0",
    "94629",
    "979",
    "4374",
    "3520",
    "0",
    "12839",
    "6106",
    "15308",
    "1781",
    "66933",
    "20514",
    "0",
    "0",
    "32",
    "0",
    "96",
    "8",
    "8",
    "14",
    "8",
    "18",
    "47000",
    "33682",
    "54447",
    "21600",
    "49715",
    "47000",
    "33682",
    "54447",
    "21600",
    "49715",
    "0.9",
    "0.9",
    "0.98",
    "0.9",
    "0.9",
    "1.25",
    "1.25",
    "1.3",
    "1",
    "1.3",
    "51187",
    "36562",
    "57967",
    "23400",
    "53235",
    "202",
    "140",
    "200",
    "94",
    "117",
    "98.7",
    "101.8",
    "100",
    "101.7",
    "100",
    "100",
    "106.3",
    "99.9",
    "101.3",
    "100",
    "719.19",
    "791.24",
    "646.89",
    "1013.34",
    "633.91",
    "-4.24",
    "-6.03",
    "0.28",
    "-9.48",
    "-0.61",
    "-4.24",
    "-6.03",
    "0",
    "-19.99",
    "-0.61",
    "0",
    "0",
    "0.17",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "5",
    "15",
    "0",
    "5",
    "39.44",
    "0.1",
    "7.27",
    "0.21",
    "0.1",
    "0.11",
    "5.28",
    "5.05",
    "8.57",
    "0.08",
    "1.1",
    "2.24",
    "0",
    "0",
    "38.97",
    "0",
    "33.29",
    "39.03",
    "33.75",
    "49.07",
    "64.93",
    "",
    "",
    "",
    "",
    ""
]
</p>
</details>


<p>上述为决策第一周期数据1和数据2<br>数据1中可以看到是项目名的部分，数据2则是对应数据。<br>所以，数据1爬一次够了。需要先对数据1进行数据清洗和筛选<br>下面就不隐藏了</p>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">def name(arr0):</span><br><span class="line">    arr01 = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,<span class="built_in">len</span>(arr0),<span class="number">2</span>): <span class="comment">#步长设为2，项目名和单位两两一对</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            name=arr0[i]+arr0[i+<span class="number">1</span>] <span class="comment">#把单位和名称合并</span></span><br><span class="line">        except:</span><br><span class="line">            name=<span class="string">&quot;&quot;</span></span><br><span class="line">        arr01.append(name) <span class="comment">#重新合并成一个列表</span></span><br><span class="line">    arr011=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> arr01:</span><br><span class="line">        <span class="keyword">a</span>=<span class="string">&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> e <span class="keyword">in</span> i:</span><br><span class="line">            <span class="keyword">if</span> e!=<span class="string">&quot; &quot;</span>: <span class="comment">#NBSP  #把空格给删掉</span></span><br><span class="line">                <span class="keyword">a</span>+=e</span><br><span class="line">        <span class="keyword">if</span> is_number(<span class="keyword">a</span>)==False <span class="keyword">and</span> <span class="keyword">a</span>!=<span class="string">&quot;&quot;</span>:  <span class="comment">#把无用部分去掉</span></span><br><span class="line">            arr011.append(<span class="keyword">a</span>)</span><br><span class="line">    <span class="literal">return</span> arr011</span><br></pre></td></tr></table></figure>
<p>因为如果回看之前的数据，爬取下来的数据2<br>跟本周期不同，所以写了两份</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line">def <span class="built_in">num</span>(arr1):</span><br><span class="line"></span><br><span class="line">    arr11=[]</span><br><span class="line">    for i in arr1:</span><br><span class="line">        if <span class="built_in">is_number</span>(i)==True or i==<span class="string">&quot;-&quot;</span> or i==<span class="string">&#x27;***&#x27;</span>:</span><br><span class="line">            a=i</span><br><span class="line">            arr11.<span class="built_in">append</span>(a)</span><br><span class="line">    arr12=[]</span><br><span class="line">    for e in <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(arr11),<span class="number">5</span>):</span><br><span class="line">        arr12.<span class="built_in">append</span>(arr11[e])</span><br><span class="line">    return arr12</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">num1</span>(<span class="params">arr1,n</span>):</span><br><span class="line"></span><br><span class="line">    arr11=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> arr1:</span><br><span class="line">        <span class="keyword">if</span> is_number(i)==<span class="literal">True</span> <span class="keyword">or</span> i==<span class="string">&quot;-&quot;</span> <span class="keyword">or</span> i==<span class="string">&#x27;***&#x27;</span>: <span class="comment">#中标部分数据，不以数字形式出现</span></span><br><span class="line">            a=i</span><br><span class="line">            arr11.append(a)</span><br><span class="line">    arr12=[]</span><br><span class="line">    <span class="keyword">for</span> e <span class="keyword">in</span> <span class="built_in">range</span>(n,<span class="built_in">len</span>(arr11),<span class="number">5</span>): <span class="comment">#步长为5，是因为存在5组的数据，n则代表所在组的列数</span></span><br><span class="line">        arr12.append(arr11[e])</span><br><span class="line">    <span class="keyword">return</span> arr12</span><br></pre></td></tr></table></figure>
<p>数据处理完后，就生产df数据，待生成excel表</p>
<p>3.以上是竞争结果的数据处理部分，下面是<br>生产数据的合并部分</p>
<details>
<summary>
<p>
长数据警告(点我展开)
</p>
</summary>
<p>
[
    " 市场报告",
    " ",
    " 价格       (元/台)",
    "1070",
    "0",
    "750",
    " 销售量        (台)",
    "19764",
    "0",
    "5000",
    " 销售额 (百万元)",
    "21.14",
    "0",
    "3.75",
    " 市场占有率 (%)",
    "      3",
    " 产品质量评价",
    "      3",
    " 仓库报告I：原材料",
    " ",
    " 期初库存",
    "0",
    "0",
    "0",
    "   +增  加",
    "90000",
    "30",
    "2.7",
    "   - 消  耗",
    "32382",
    "30",
    "0.97",
    " =期末库存",
    "57618",
    "30",
    "1.72",
    " 仓库报告II：一般产品",
    " ",
    " 期初库存",
    "0",
    "0",
    "0",
    "   +增  加",
    "27382",
    "521.99",
    "14.29",
    "   - 消  耗",
    "19764",
    "521.99",
    "10.31",
    " =期末库存",
    "7618",
    "521.99",
    "3.97",
    " 仓库报告III：附件",
    " ",
    " 期初库存",
    "0",
    "0",
    "0",
    "   +增  加",
    "90000",
    "70",
    "6.3",
    "   - 消  耗",
    "27382",
    "70",
    "1.91",
    " =期末库存",
    "62618",
    "70",
    "4.38",
    " 人员报告I",
    " ",
    " 期初人员",
    "0",
    "0",
    "   +招  聘",
    "128",
    "8",
    "   - 解  雇",
    "0",
    "0",
    "   - 流  动",
    "0",
    " =期末人员",
    "128",
    "8",
    " 人员报告II",
    " 销  售",
    "59",
    " 采  购",
    "5",
    " 管  理",
    "25",
    " 管理的合理化系数",
    "1",
    " 生产报告I",
    " ",
    " 前周期",
    "0",
    "0",
    "   +投  资",
    "5",
    "0",
    "   - 变  卖",
    "0",
    "---",
    " 本周期",
    "5",
    "0",
    " 生产报告II",
    " 一般产品",
    "27382",
    "27382",
    "109.5",
    " 特殊产品",
    "5000",
    "4500",
    "17.8",
    " 合    计",
    "32382",
    "31882",
    "128",
    " 负载率(%)",
    "---",
    "100",
    "99.6",
    " 生产报告III",
    " 生产线的合理化系数",
    "1.09",
    " 生产线维修保养系数",
    "0.9",
    " 生产线负载率100%时生产能力",
    "31882"
]
</p>
</details>

<p>大概长这样，<br>数据提取函数</p>
<figure class="highlight prolog"><table><tr><td class="code"><pre><span class="line">def produ(<span class="symbol">Arr11</span>):</span><br><span class="line">    n = <span class="number">0</span></span><br><span class="line">    <span class="symbol">List11</span> = []</span><br><span class="line">    <span class="symbol">List12</span> = []</span><br><span class="line">    for i in <span class="symbol">Arr11</span>:</span><br><span class="line">        if is_number(i) == <span class="symbol">False</span> and i != <span class="string">&quot;&quot;</span> and i != <span class="string">&quot;---&quot;</span>:</span><br><span class="line">            <span class="symbol">List11</span>.append(n)</span><br><span class="line">        elif is_number(i) == <span class="symbol">True</span> or i == <span class="string">&quot;&quot;</span> or i == <span class="string">&quot;---&quot;</span>:</span><br><span class="line">            <span class="symbol">List12</span>.append(n)</span><br><span class="line">        n += <span class="number">1</span></span><br><span class="line">    <span class="symbol">Arr12</span> = []</span><br><span class="line">    for i in range(<span class="number">0</span>, len(<span class="symbol">List11</span>)):</span><br><span class="line">        <span class="symbol">List</span> = []</span><br><span class="line">        for e in <span class="symbol">List12</span>:</span><br><span class="line">            try:</span><br><span class="line">                if <span class="symbol">List11</span>[i] &lt; e &lt; <span class="symbol">List11</span>[i + <span class="number">1</span>]:</span><br><span class="line">                    <span class="symbol">List</span>.append(e)</span><br><span class="line">            except:</span><br><span class="line">                <span class="symbol">List</span> = []</span><br><span class="line">                <span class="symbol">List</span>.append(e)</span><br><span class="line">        <span class="symbol">Arr12</span>.append(<span class="symbol">List</span>)  #上述均为数据清洗操作</span><br><span class="line">    gm = []</span><br><span class="line">    cb=[]</span><br><span class="line">    tz=[]</span><br><span class="line">    sc=[]</span><br><span class="line">    bm=[]</span><br><span class="line">    bc=[]</span><br><span class="line">    for i in range(len(<span class="symbol">Arr12</span>)):</span><br><span class="line">        name = <span class="symbol">Arr11</span>[<span class="symbol">List11</span>[i]] #取出需要的数据</span><br><span class="line"></span><br><span class="line">        if name == <span class="string">&quot;   +增  加&quot;</span>:</span><br><span class="line">            gm.append(<span class="symbol">Arr11</span>[<span class="symbol">Arr12</span>[i][<span class="number">0</span>]])</span><br><span class="line">        if name == <span class="string">&quot;   +增  加&quot;</span>:</span><br><span class="line">            cb.append(<span class="symbol">Arr11</span>[<span class="symbol">Arr12</span>[i][<span class="number">1</span>]])</span><br><span class="line">        if name == <span class="string">&quot;   +投  资&quot;</span>:</span><br><span class="line">            tz.append(<span class="symbol">Arr11</span>[<span class="symbol">Arr12</span>[i][<span class="number">0</span>]])</span><br><span class="line">        if name == <span class="string">&quot; 前周期&quot;</span>:</span><br><span class="line">            sc.append(<span class="symbol">Arr11</span>[<span class="symbol">Arr12</span>[i][<span class="number">0</span>]])</span><br><span class="line">        if name == <span class="string">&quot;   - 变  卖&quot;</span>:</span><br><span class="line">            bm.append(<span class="symbol">Arr11</span>[<span class="symbol">Arr12</span>[i][<span class="number">0</span>]])</span><br><span class="line">        if name == <span class="string">&quot; 本周期&quot;</span>:</span><br><span class="line">            bc.append(<span class="symbol">Arr11</span>[<span class="symbol">Arr12</span>[i][<span class="number">0</span>]])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    for i in range(len(gm)):</span><br><span class="line">        if i == <span class="number">0</span>:</span><br><span class="line">            p31 = gm[i]</span><br><span class="line">        if i == <span class="number">2</span>:</span><br><span class="line">            p33 = gm[i]</span><br><span class="line">    for i in range(len(cb)):</span><br><span class="line">        if i == <span class="number">1</span>:</span><br><span class="line">            p11 = cb[i]</span><br><span class="line">    return p31,p33,p11,tz[<span class="number">0</span>],sc[<span class="number">0</span>] #return回需要的数据</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>添加函数，生产数据的合并</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">def clear0(df,L1,L2,L3,L4,L5):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(L1)):</span><br><span class="line">        L11 = []</span><br><span class="line">        e1,e2,e3,e4,<span class="attribute">e5</span>=L1[i],L2[i],L3[i],L4[i],L5[i]</span><br><span class="line">        L11.append(e1)</span><br><span class="line">        L11.append(e2)</span><br><span class="line">        L11.append(e3)</span><br><span class="line">        L11.append(e4)</span><br><span class="line">        L11.append(e5)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">i</span>==0: #dfinsert为df的插入函数，懒得写出来了，作用是插入在指定行的下方</span><br><span class="line">            df = dfinsert(df, <span class="string">&quot;原材料库存量(台)&quot;</span>, L11, <span class="string">&quot;原材料购买&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">i</span>==1:</span><br><span class="line">            df = dfinsert(df, <span class="string">&quot;附件库存量(台)&quot;</span>, L11, <span class="string">&quot;附件购买&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">i</span>==2:</span><br><span class="line">            df = dfinsert(df, <span class="string">&quot;一般市场的产品成本(元)&quot;</span>, L11, <span class="string">&quot;生产成本&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">i</span>==3:</span><br><span class="line">            df =dfinsert(df,<span class="string">&quot;生产线生产能力(台/周期)&quot;</span>,L11,<span class="string">&quot;生产线投资数&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">i</span>==4:</span><br><span class="line">            df = dfinsert(df, <span class="string">&quot;生产线投资数&quot;</span>, L11, <span class="string">&quot;上一周期生产线数量&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">i</span>==5:</span><br><span class="line">            df =dfinsert(df,<span class="string">&quot;生产线投资数&quot;</span>, L11, <span class="string">&quot;生产线变卖数&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">i</span>==6:</span><br><span class="line">            df =dfinsert(df,<span class="string">&quot;生产线投资数&quot;</span>, L11, <span class="string">&quot;本周期生产线数量&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    return df</span><br></pre></td></tr></table></figure>
<p>调用数据合并操作，要记得自己组的是在哪一个df，<br>生产数据只有自己的能够看到</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">df1</span>=clear0(df1,L1,L2,L3,L4,L5) <span class="comment">#选择在哪个组哪一列</span></span><br></pre></td></tr></table></figure>

<p>另一部分的数据插入，财务方面的数据，这一部分是<br>需要在原有数据进行计算然后插入，比较简单</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">def clear(df):</span><br><span class="line">    <span class="attribute">listt</span>=df.loc[<span class="string">&quot;本周期股息支付(百万元)&quot;</span>]</span><br><span class="line">    <span class="attribute">a</span>=0</span><br><span class="line">    listt1=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> listt:</span><br><span class="line">        a+=float(i)</span><br><span class="line">        listt1.append(a)</span><br><span class="line">    <span class="attribute">df</span>=dfinsert(df,&quot;本周期股息支付(百万元)&quot;,listt1,&quot;累计支付股息&quot;)</span><br><span class="line">    <span class="attribute">listt2</span>=df.loc[<span class="string">&quot;本周期利润储备(百万元)&quot;</span>]</span><br><span class="line"></span><br><span class="line">    l3,l4,l5,l6,l7=[],[],[],[],[]</span><br><span class="line">    <span class="attribute">n</span>=0</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> listt2:</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">n</span>==0:</span><br><span class="line">            l3.append(i)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">n</span>==1:</span><br><span class="line">            l4.append(i)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">n</span>==2:</span><br><span class="line">            l5.append(i)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">n</span>==3:</span><br><span class="line">            l6.append(i)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">n</span>==4:</span><br><span class="line">            l7.append(i)</span><br><span class="line">        n+=1</span><br><span class="line">    <span class="attribute">n</span>=0</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> listt:</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">n</span>==0:</span><br><span class="line">            l3.append(i)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">n</span>==1:</span><br><span class="line">            l4.append(i)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">n</span>==2:</span><br><span class="line">            l5.append(i)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">n</span>==3:</span><br><span class="line">            l6.append(i)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">n</span>==4:</span><br><span class="line">            l7.append(i)</span><br><span class="line">        n+=1</span><br><span class="line">    listt3=[]</span><br><span class="line">    <span class="attribute">a</span>=0</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> l3:</span><br><span class="line">        a+=float(i) </span><br><span class="line">    listt3.append(a)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    a4 = 0</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> l4:</span><br><span class="line">        a4+=float(i)</span><br><span class="line">    listt3.append(a4)</span><br><span class="line">    a1 = 0</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> l5:</span><br><span class="line">        a1+=float(i)</span><br><span class="line">    listt3.append(a1)</span><br><span class="line">    <span class="attribute">a2</span>=0</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> l6:</span><br><span class="line">        a2+=float(i)</span><br><span class="line">    listt3.append(a2)</span><br><span class="line"></span><br><span class="line">    <span class="attribute">a3</span>=0</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> l7:</span><br><span class="line">        a3+=float(i)</span><br><span class="line">    listt3.append(a3)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="attribute">df</span>=dfinsert(df,&quot;税前经营成果(百万元)&quot;,listt3,&quot;税后利润&quot;)</span><br><span class="line">    return df</span><br></pre></td></tr></table></figure>

<figure class="highlight abnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">df</span><span class="operator">=</span>clear(df)</span><br><span class="line"><span class="attribute">df1</span><span class="operator">=</span>clear(df1)</span><br><span class="line"><span class="attribute">df2</span><span class="operator">=</span>clear(df2)</span><br><span class="line"><span class="attribute">df3</span><span class="operator">=</span>clear(df3)</span><br><span class="line"><span class="attribute">df4</span><span class="operator">=</span>clear(df4)</span><br></pre></td></tr></table></figure>
<p>执行完就全部打出excel表就好了，不过要记得sheetname</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">path=<span class="string">&quot;jc2.xlsx&quot;</span></span><br><span class="line"><span class="keyword">with</span> pd.<span class="constructor">ExcelWriter(<span class="params">path</span>, <span class="params">engine</span>=&#x27;<span class="params">openpyxl</span>&#x27;, <span class="params">mode</span>=&#x27;<span class="params">w</span>&#x27;)</span> <span class="keyword">as</span> writer:</span><br><span class="line">    df.<span class="keyword">to</span><span class="constructor">_excel(<span class="params">writer</span>, <span class="params">sheet_name</span>=<span class="string">&quot;21&quot;</span>, <span class="params">index</span>=True)</span></span><br><span class="line">    df1.<span class="keyword">to</span><span class="constructor">_excel(<span class="params">writer</span>, <span class="params">sheet_name</span>=<span class="string">&quot;22&quot;</span>, <span class="params">index</span>=True)</span></span><br><span class="line">    df2.<span class="keyword">to</span><span class="constructor">_excel(<span class="params">writer</span>, <span class="params">sheet_name</span>=<span class="string">&quot;23&quot;</span>, <span class="params">index</span>=True)</span></span><br><span class="line">    df3.<span class="keyword">to</span><span class="constructor">_excel(<span class="params">writer</span>, <span class="params">sheet_name</span>=<span class="string">&quot;24&quot;</span>, <span class="params">index</span>=True)</span></span><br><span class="line">    df4.<span class="keyword">to</span><span class="constructor">_excel(<span class="params">writer</span>, <span class="params">sheet_name</span>=<span class="string">&quot;25&quot;</span>, <span class="params">index</span>=True)</span></span><br></pre></td></tr></table></figure>

<p><img data-src="/image/1004D_21_1.jpg" alt="1"></p>
]]></content>
      <categories>
        <category>介绍</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>css音频波浪动画</title>
    <url>/2023/10/03/css%E9%9F%B3%E9%A2%91%E6%B3%A2%E6%B5%AA%E5%8A%A8%E7%94%BB/</url>
    <content><![CDATA[<p><img data-src="/2023/10/03/css%E9%9F%B3%E9%A2%91%E6%B3%A2%E6%B5%AA%E5%8A%A8%E7%94%BB/1005D_253_1.jpg" alt="1005D_253_1.jpg"></p>
<span id="more"></span>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bars_music&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar_music&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar_music&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar_music&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar_music&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar_music&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar_music&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar_music&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar_music&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar_music&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar_music&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bars_music</span>&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">width</span>: <span class="number">60px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">margin</span>: auto;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span>&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">background</span>: <span class="number">#FF88C2</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">border</span>:<span class="number">1px</span> solid;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">height</span>: <span class="number">3px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">width</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">bottom</span>:<span class="number">1px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation</span>: voice <span class="number">0ms</span> -<span class="number">800ms</span> linear infinite alternate;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="keyword">@keyframes</span> voice&#123;</span></span><br><span class="line"><span class="language-css">	</span></span><br><span class="line"><span class="language-css">	<span class="number">0%</span>&#123;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">height</span>: <span class="number">3px</span>;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">opacity</span>: .<span class="number">35</span>;</span></span><br><span class="line"><span class="language-css">	&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">100%</span>&#123;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">height</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">opacity</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">	&#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>)  &#123; <span class="attribute">left</span>: <span class="number">1px</span>; <span class="attribute">animation-duration</span>: <span class="number">474ms</span>; &#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>)  &#123; <span class="attribute">left</span>: <span class="number">6px</span>; <span class="attribute">animation-duration</span>: <span class="number">433ms</span>; &#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>)  &#123; <span class="attribute">left</span>: <span class="number">11px</span>; <span class="attribute">animation-duration</span>: <span class="number">407ms</span>; &#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span><span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>)  &#123; <span class="attribute">left</span>: <span class="number">16px</span>; <span class="attribute">animation-duration</span>: <span class="number">458ms</span>; &#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span><span class="selector-pseudo">:nth-child</span>(<span class="number">5</span>)  &#123; <span class="attribute">left</span>: <span class="number">21px</span>; <span class="attribute">animation-duration</span>: <span class="number">400ms</span>; &#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span><span class="selector-pseudo">:nth-child</span>(<span class="number">6</span>)  &#123; <span class="attribute">left</span>: <span class="number">26px</span>; <span class="attribute">animation-duration</span>: <span class="number">427ms</span>; &#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span><span class="selector-pseudo">:nth-child</span>(<span class="number">7</span>)  &#123; <span class="attribute">left</span>: <span class="number">31px</span>; <span class="attribute">animation-duration</span>: <span class="number">441ms</span>; &#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span><span class="selector-pseudo">:nth-child</span>(<span class="number">8</span>)  &#123; <span class="attribute">left</span>: <span class="number">36px</span>; <span class="attribute">animation-duration</span>: <span class="number">419ms</span>; &#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span><span class="selector-pseudo">:nth-child</span>(<span class="number">9</span>)  &#123; <span class="attribute">left</span>: <span class="number">41px</span>; <span class="attribute">animation-duration</span>: <span class="number">487ms</span>; &#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span><span class="selector-pseudo">:nth-child</span>(<span class="number">10</span>) &#123; <span class="attribute">left</span>: <span class="number">46px</span>; <span class="attribute">animation-duration</span>: <span class="number">442ms</span>; &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>收藏</category>
      </categories>
  </entry>
  <entry>
    <title>（自用）梳理一下基本爬图思路</title>
    <url>/2023/10/01/%E6%A2%B3%E7%90%86%E4%B8%80%E4%B8%8B%E5%9F%BA%E6%9C%AC%E7%88%AC%E5%9B%BE%E6%80%9D%E8%B7%AF/</url>
    <content><![CDATA[<p><img data-src="/image/930D_27_1.jpg" alt="1"></p>
<p><a href="/2023/09/28/%E7%94%A8selenum%E5%88%B6%E4%BD%9C%E5%89%8D%E7%AB%AF%E5%BC%8F%E7%88%AC%E8%99%AB/">前文:用Selenium制作前端式爬虫</a><br><del><em>其实也不能叫梳理了，依旧还是很乱，将就写吧</em></del><br>说到爬虫肯定少不了爬图<br><del><em>为什么说是自用，因为我回看我以前写的是根本看不懂啊</em></del><br>本来写的就很乱很乱，函数套用太多了<br>本文主要不写全部代码了，就写主要的函数的结构，以防以后维护出问题</p>
<span id="more"></span>

<p>1.服务器访问模块<br>这里使用的是selenium所以相应有浏览器调用模块<br>driverbrowser() #浏览器调用 嵌套→browser_set() #浏览器设置<br>函数相应代码在前文有介绍</p>
<p>2.访问抓取模块<br>这几个基本都是一堆嵌套try，因为要防止服务器连接出错</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">res</span><span class="params">(url)</span></span>:</span><br><span class="line">    #防访问超时报错</span><br><span class="line">    driver=<span class="built_in">driverbrowser</span>()</span><br><span class="line">    <span class="keyword">if</span> driver!=<span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;测试&quot;</span>)</span><br><span class="line">        try:</span><br><span class="line">            url_get=<span class="built_in">browserget</span>(driver,url)</span><br><span class="line">            return url_get</span><br><span class="line">        except :</span><br><span class="line">            driver<span class="selector-class">.close</span>()</span><br><span class="line">            driver<span class="selector-class">.quit</span>()</span><br><span class="line">            secends = random<span class="selector-class">.randint</span>(<span class="number">120</span>, <span class="number">150</span>)</span><br><span class="line">            <span class="built_in">printpause</span>(secends)</span><br><span class="line">            try:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;***重试请求***&#x27;</span>)</span><br><span class="line">                driver = <span class="built_in">driverbrowser</span>()</span><br><span class="line">                url_get = <span class="built_in">browserget</span>(driver, url)</span><br><span class="line">                return url_get</span><br><span class="line">            except :</span><br><span class="line">                driver<span class="selector-class">.close</span>()</span><br><span class="line">                driver<span class="selector-class">.quit</span>()</span><br><span class="line">                <span class="built_in">printpause</span>(<span class="number">150</span>)</span><br><span class="line">                try:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&#x27;***重试请求***&#x27;</span>)</span><br><span class="line">                    driver = <span class="built_in">driverbrowser</span>()</span><br><span class="line">                    url_get = <span class="built_in">browserget</span>(driver, url)</span><br><span class="line">                    return url_get</span><br><span class="line">                except:</span><br><span class="line">                    driver<span class="selector-class">.close</span>()</span><br><span class="line">                    driver<span class="selector-class">.quit</span>()</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&#x27;***访问失败，程序继续***&#x27;</span>)</span><br><span class="line">                return <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>3.页面处理模块<br>这个地方利用伪css选择器的pyquery库实现处理的<br>写的很乱，姑且看看</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">pageget</span>(<span class="params">url,p_name=<span class="literal">None</span>,n_name=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="comment">#获取页面的信息(页数)，返回抓取主要部分</span></span><br><span class="line">    <span class="comment">#p_name 抓取最终页数</span></span><br><span class="line">    <span class="comment">#n_name 抓取下一页链接</span></span><br><span class="line">    <span class="comment">#pagenum 页数</span></span><br><span class="line">    <span class="comment">#pa_next 当前页面</span></span><br><span class="line">    <span class="comment">#nextpage 下一页链接</span></span><br><span class="line">	//略</span><br><span class="line">	<span class="keyword">return</span> pagenum,pa_next,nextpage</span><br></pre></td></tr></table></figure>
<p>此函数就是获取页面页的主要信息,页数，下一页链接，当前页资源等</p>
<figure class="highlight 1c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#p_name 抓取最终页数</span></span><br><span class="line"><span class="meta">#n_name 抓取下一页链接</span></span><br></pre></td></tr></table></figure>
<p>p_name,n_name是css选择器的定位方式<br>下一页链接有些时候不容易爬取，可以选用链接的方式如类似”&#x2F;page&#x2F;1”,据情况而定</p>
<p>4.主模块<br>爬图通常都要分主要页（也就是页面页），详细页。<br>主要页显示的图片都是压缩后的略图，毕竟是缩略图，<br>爬下来的质量堪忧，所以要进一步<br>的爬到详细页<br>大致如下<br>页面页模块</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">def pageweb(url,</span><br><span class="line">            p_name,n_name,</span><br><span class="line">            d_p_name,d_n_name,</span><br><span class="line">            <span class="attribute">fpn</span>=None):</span><br><span class="line">    # pagenum 页数</span><br><span class="line">    # pa_next 当前页面</span><br><span class="line">    # nextpage 下一页链接</span><br><span class="line">	#fpn 自定义页数</span><br><span class="line">    pagenum,pa_next,<span class="attribute">nextpage</span>=pageget(url=url,</span><br><span class="line">                                    <span class="attribute">p_name</span>=p_name,</span><br><span class="line">                                    <span class="attribute">n_name</span>=n_name)</span><br><span class="line">	</span><br><span class="line">	#略</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(int(pagenum)):</span><br><span class="line">		<span class="keyword">for</span> el0 <span class="keyword">in</span> pa0:</span><br><span class="line">			descriweb(ur,descriname,d_p_name,d_n_name)</span><br><span class="line">		pagenum, pa_next, nextpage = pageget(<span class="attribute">url</span>=nextpage,</span><br><span class="line"></span><br><span class="line">                                                 <span class="attribute">p_name</span>=p_name,</span><br><span class="line">                                                 <span class="attribute">n_name</span>=n_name)</span><br><span class="line">		</span><br></pre></td></tr></table></figure>
<p>详细页模块</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">def descriweb(ur,d_p_name,d_n_name):</span><br><span class="line">    #详细页</span><br><span class="line">    pagenum1, dl, nextpage1 = pageget(<span class="attribute">url</span>=ur,</span><br><span class="line">      </span><br><span class="line">                                      <span class="attribute">p_name</span>=d_p_name,</span><br><span class="line">                                      <span class="attribute">n_name</span>=d_n_name</span><br><span class="line">                                     )</span><br><span class="line">		<span class="keyword">for</span> i <span class="keyword">in</span> range(int(pagenum1)):</span><br><span class="line">			pagenum1, dl, nextpage1 = pageget(<span class="attribute">url</span>=nextpage1,</span><br><span class="line">      </span><br><span class="line">                                              <span class="attribute">p_name</span>=d_p_name,</span><br><span class="line">                                              <span class="attribute">n_name</span>=d_n_name</span><br><span class="line">                                              )</span><br><span class="line">			</span><br></pre></td></tr></table></figure>

<p>p_name,n_name 前一个是详细页链接定位，后一个是下一页定位<br>d_p_name,d_n_name，前一个是图片定位，后一个是下一页定位<br>（有些网站详细页也会有副页，所以要再嵌套一次，我写的虽然没有但备了一个）</p>
<p>5.数据存放模块<br>这里用的是pandas的dataframe用于存放图片链接<br>然后再输出excel</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">def saveexcel(df,path,sheet):</span><br><span class="line">    #保存数据</span><br><span class="line">    <span class="keyword">with</span> pd.<span class="constructor">ExcelWriter(<span class="params">path</span>, <span class="params">engine</span>=&#x27;<span class="params">openpyxl</span>&#x27;,<span class="params">mode</span>=&#x27;<span class="params">a</span>&#x27;)</span> <span class="keyword">as</span> writer:</span><br><span class="line">        df.<span class="keyword">to</span><span class="constructor">_excel(<span class="params">writer</span>, <span class="params">sheet_name</span>=<span class="params">sheet</span>, <span class="params">index</span>=True)</span></span><br></pre></td></tr></table></figure>

<p>6.下载图片模块<br>经历了一堆各种各样的操作之后，终于可以愉快的下图了<br>这模块是最简单的部分了，常规的pandas数据处理的部分<br>这一部分我是分开两个py文件写了，就可以先爬再下<br>由于图片下载部分不用担心反爬机制了，可以用requests库了<br>但是有时候用requests下载会卡着不动，所以还是try一下</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">def resg(url):</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.45 Safari/537.36&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    try:</span><br><span class="line">        return requests.<span class="built_in">get</span>(url,<span class="attribute">headers</span>=headers,timeout=30)</span><br><span class="line">    except:</span><br><span class="line">        secends = random.randint(60, 180)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;访问超时，程序暂停......&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(str(secends) + <span class="string">&#x27;秒后继续&#x27;</span>)</span><br><span class="line">        time.sleep(secends)  # 暂停1~3分钟，然后再尝试一次</span><br><span class="line">        try:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;重试请求......&#x27;</span>)</span><br><span class="line">            return requests.<span class="built_in">get</span>(url,<span class="attribute">headers</span>=headers,timeout=30)</span><br><span class="line">        except:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;访问超时，程序暂停......&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;3分钟后继续&#x27;</span>)</span><br><span class="line">            time.sleep(180)  # 暂停3分钟</span><br><span class="line">            return <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="attribute">start</span>=time.perf_counter()</span><br><span class="line"><span class="attribute">df</span>=pd.read_excel(io=&#x27;./picurl5.xlsx&#x27;,</span><br><span class="line">                 <span class="attribute">sheet_name</span>=<span class="string">&quot;图集&quot;</span>)</span><br><span class="line">df.drop(df.index[0])</span><br><span class="line"><span class="attribute">filename</span>=<span class="string">&quot;1001d&quot;</span> #文件名</span><br><span class="line">os.mkdir(filename)</span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> range(len(df.index)-1):</span><br><span class="line">    <span class="attribute">df1</span>=df.iloc[n+1,:]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(df.columns) - 1):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;执行第&#123;&#125;类第&#123;&#125;项目中.....&#x27;</span>.format(n + 1, i + 1))</span><br><span class="line">        pic1 = df1.iloc[i + 1]</span><br><span class="line">        <span class="keyword">if</span> pd.isna(pic1) != <span class="literal">True</span> <span class="keyword">and</span> pic1 != <span class="string">&#x27;empty&#x27;</span>:</span><br><span class="line">            r = resg(pic1)</span><br><span class="line">            <span class="keyword">if</span> r !=<span class="string">&#x27;&#x27;</span>:</span><br><span class="line">                with open(filename+<span class="string">&quot;/&quot;</span> +filename+ <span class="string">&#x27;_&#x27;</span> +str(n + 1) + <span class="string">&#x27;_&#x27;</span> + str(i + 1) + <span class="string">&quot;.jpg&quot;</span>, <span class="attribute">mode</span>=<span class="string">&quot;wb&quot;</span>) as f:</span><br><span class="line">                    f.write(r.content)</span><br><span class="line">            end = time.perf_counter()</span><br><span class="line">            runTime = end - start</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;运行时间：&#123;:.2f&#125;s&quot;</span>.format(runTime))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;执行成功&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>7.总结<br>所以总结下来大概就是<br>简写了</p>
<p>复用的部分：<br>浏览器调用函数，抓取处理函数，访问函数</p>
<p>主模块<br>页面处理模块，详细页处理模块 –&gt;调用 复用的部分–&gt;数字抓取 数据存放函数<br>–&gt;图片下载</p>
<p>需要获取的定位：<br>必选<br>页面页的图片框（每一个图片详细页链接&#x2F;文字描述等），<br>详细页的图片定位</p>
<p>可选：<br>末页（页数），下一页链接<br>如果详细页需要要获取两个<br><img data-src="/image/930D_171_1.jpg" alt="2"></p>
]]></content>
      <categories>
        <category>介绍</category>
      </categories>
      <tags>
        <tag>爬虫</tag>
      </tags>
  </entry>
  <entry>
    <title>【测试】js做的歌碟</title>
    <url>/2023/09/30/%E3%80%90%E7%9E%8E%E6%90%9E-%E6%B5%8B%E8%AF%95%E3%80%91js%E5%81%9A%E7%9A%84%E6%AD%8C%E7%A2%9F/</url>
    <content><![CDATA[<p><img data-src="/image/929D_257_1.jpg" alt="1"></p>
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js">
</script>
<script>
var s1=true;
var musicbox=$(".musicbox_test");
function mutr(){
    if (s1==false){
        s1=true;
        $(".music_test").attr("src","/image/Akatsuki.mp3")
        $(".recent_text").text("歌曲1")
        console.log("ch1")	
        if ($(".pic_box").css("animation-play-state")=="running"){
                $(".music_pic").css({"animation-play-state":"paused"});
                $(".pic_box").css({"animation-play-state":"paused"});
                $(".music_test").get(0).pause();
                s=true;
            }
    }
    else{
        s1=false;
        $(".music_test").attr("src","/image/wonderland.mp3")
        $(".recent_text").text("歌曲2")
        console.log("ch2")
        if ($(".pic_box").css("animation-play-state")=="running"){
                $(".music_pic").css({"animation-play-state":"paused"});
                $(".pic_box").css({"animation-play-state":"paused"});
                $(".music_test").get(0).pause();
                s=true;
            }
        }
}
s=true;

function muplay(){
    if (s==false){
        s=true;
        var music=$(".music_test").get(0);
        var pic=$(".music_pic");
        var box=$(".pic_box");
        music.pause();	 
        pic.css({"animation-play-state":"paused"});
        box.css({"animation-play-state":"paused"});
        }
    else{
        var music=$(".music_test").get(0);
        var pic=$(".music_pic");
        var box=$(".pic_box");
        s=false;
        music.play();
        pic.css({"animation-play-state":"running"});
        box.css({"animation-play-state":"running"});
        
        }
}
</script>
<style>
.pic_box{
    width:250px;
    border-radius: 50%;
    background-color:white;
    animation: Box 3s linear infinite;
    animation-play-state:paused;
}
.pic_box img{
    width:200px;
    height:200px;
    animation: Box 3s linear infinite;
    animation-play-state:paused;
    
    }
@keyframes Box{
    0%{transform: rotate(0deg);}
    50%{transform: rotate(180deg);}
    100%{transform: rotate(360deg);}
}
</style>
<span id="more"></span>
<div onclick="mutr()">
<p>音乐盒（点我切歌）</p>
<p class="recent_text">&nbsp;歌曲1</p>
</div>
<div id="box1" class="pic_box">
  <img id="pic" class="music_pic" onclick="muplay()" data-src="/image/420px-KoishiSubterranean封面.jpg" alt="" />
</div>
<div id="musicbox" class="musicbox_test">
    <audio id="Akatsuki" class="music_test" src="/image/Akatsuki.mp3" loop="loop" >
    </audio>
</div>


<p>源代码</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> s1=<span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> musicbox=$(<span class="string">&quot;.musicbox_test&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">mutr</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">if</span> (s1==<span class="literal">false</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">		s1=<span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">		$(<span class="string">&quot;.music_test&quot;</span>).<span class="title function_">attr</span>(<span class="string">&quot;src&quot;</span>,<span class="string">&quot;/image/Akatsuki.mp3&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">		$(<span class="string">&quot;.recent_text&quot;</span>).<span class="title function_">text</span>(<span class="string">&quot;歌曲1&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ch1&quot;</span>)	</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">if</span> ($(<span class="string">&quot;.pic_box&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;animation-play-state&quot;</span>)==<span class="string">&quot;running&quot;</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&quot;.music_pic&quot;</span>).<span class="title function_">css</span>(&#123;<span class="string">&quot;animation-play-state&quot;</span>:<span class="string">&quot;paused&quot;</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&quot;.pic_box&quot;</span>).<span class="title function_">css</span>(&#123;<span class="string">&quot;animation-play-state&quot;</span>:<span class="string">&quot;paused&quot;</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&quot;.music_test&quot;</span>).<span class="title function_">get</span>(<span class="number">0</span>).<span class="title function_">pause</span>();</span></span><br><span class="line"><span class="language-javascript">				s=<span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">	&#125;</span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">		s1=<span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">		$(<span class="string">&quot;.music_test&quot;</span>).<span class="title function_">attr</span>(<span class="string">&quot;src&quot;</span>,<span class="string">&quot;/image/wonderland.mp3&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">		$(<span class="string">&quot;.recent_text&quot;</span>).<span class="title function_">text</span>(<span class="string">&quot;歌曲2&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ch2&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">if</span> ($(<span class="string">&quot;.pic_box&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;animation-play-state&quot;</span>)==<span class="string">&quot;running&quot;</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&quot;.music_pic&quot;</span>).<span class="title function_">css</span>(&#123;<span class="string">&quot;animation-play-state&quot;</span>:<span class="string">&quot;paused&quot;</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&quot;.pic_box&quot;</span>).<span class="title function_">css</span>(&#123;<span class="string">&quot;animation-play-state&quot;</span>:<span class="string">&quot;paused&quot;</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&quot;.music_test&quot;</span>).<span class="title function_">get</span>(<span class="number">0</span>).<span class="title function_">pause</span>();</span></span><br><span class="line"><span class="language-javascript">				s=<span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">s=<span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">muplay</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">if</span> (s==<span class="literal">false</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">		s=<span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">var</span> music=$(<span class="string">&quot;.music_test&quot;</span>).<span class="title function_">get</span>(<span class="number">0</span>);</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">var</span> pic=$(<span class="string">&quot;.music_pic&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">var</span> box=$(<span class="string">&quot;.pic_box&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">		music.<span class="title function_">pause</span>();	 </span></span><br><span class="line"><span class="language-javascript">		pic.<span class="title function_">css</span>(&#123;<span class="string">&quot;animation-play-state&quot;</span>:<span class="string">&quot;paused&quot;</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">		box.<span class="title function_">css</span>(&#123;<span class="string">&quot;animation-play-state&quot;</span>:<span class="string">&quot;paused&quot;</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">		&#125;</span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">var</span> music=$(<span class="string">&quot;.music_test&quot;</span>).<span class="title function_">get</span>(<span class="number">0</span>);</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">var</span> pic=$(<span class="string">&quot;.music_pic&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">var</span> box=$(<span class="string">&quot;.pic_box&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">		s=<span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">		music.<span class="title function_">play</span>();</span></span><br><span class="line"><span class="language-javascript">		pic.<span class="title function_">css</span>(&#123;<span class="string">&quot;animation-play-state&quot;</span>:<span class="string">&quot;running&quot;</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">		box.<span class="title function_">css</span>(&#123;<span class="string">&quot;animation-play-state&quot;</span>:<span class="string">&quot;running&quot;</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">		</span></span><br><span class="line"><span class="language-javascript">		&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.pic_box</span>&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">width</span>:<span class="number">250px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">background-color</span>:white;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation</span>: Box <span class="number">3s</span> linear infinite;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation-play-state</span>:paused;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.pic_box</span> <span class="selector-tag">img</span>&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">width</span>:<span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">height</span>:<span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation</span>: Box <span class="number">3s</span> linear infinite;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation-play-state</span>:paused;</span></span><br><span class="line"><span class="language-css">	</span></span><br><span class="line"><span class="language-css">	&#125;</span></span><br><span class="line"><span class="language-css"><span class="keyword">@keyframes</span> Box&#123;</span></span><br><span class="line"><span class="language-css">	<span class="number">0%</span>&#123;<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">50%</span>&#123;<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">180deg</span>);&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">100%</span>&#123;<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);&#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--more--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onclick</span>=<span class="string">&quot;mutr()&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>音乐盒（点我切歌）<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;recent_text&quot;</span>&gt;</span><span class="symbol">&amp;nbsp;</span>歌曲1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pic_box&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;pic&quot;</span> <span class="attr">class</span>=<span class="string">&quot;music_pic&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;muplay()&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/image/420px-KoishiSubterranean封面.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;musicbox&quot;</span> <span class="attr">class</span>=<span class="string">&quot;musicbox_test&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">audio</span> <span class="attr">id</span>=<span class="string">&quot;Akatsuki&quot;</span> <span class="attr">class</span>=<span class="string">&quot;music_test&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/image/Akatsuki.mp3&quot;</span>  <span class="attr">loop</span>=<span class="string">&quot;loop&quot;</span> &gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>测试</category>
      </categories>
  </entry>
  <entry>
    <title>测试JS玩法</title>
    <url>/2023/09/30/%E6%B5%8B%E8%AF%95JS%E7%8E%A9%E6%B3%95/</url>
    <content><![CDATA[<p><img data-src="/image/929D_92_1.jpg" alt="1"><br><a class="comcu_btn" onclick="test()">乘数计算器</a></p>
<span id="more"></span>
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js">
</script>
<script src="//unpkg.com/layui@2.8.17/dist/layui.js"> </script>
<script>
    function isnum(str){
        if (!isNaN(parseFloat(str)) && isFinite(str) ){
            return true}
        else{return false}
    }
    var layer ;
    layui.use('layer', function(){
        layer = layui.layer;
    });
    function test(){
        layer.prompt({
            formType:0,
            title: '乘数计算器',
            id:"layui_text",
        },function(value,index,elem){
                if(value==""){
                    alert("请输入");
                    return
                }
                var data1=$('.new_input1').val()
                if (data1==""){
                    alert("请输入")
                    return
                }
                if (isnum(value) && isnum(data1)){
                    var mu =value*data1
                    alert(mu)
                }
                else{alert("输入不合法")}
                
                layer.close(index)
            })
        
        if ($(".new_input1").length == 0){ 
            $(".layui-layer-content").append("<br/><input type=\"text\" class=\"new_input1\" placeholder=\"输入随机数\"/>")
            $(".layui-layer-btn0").append("&nbsp;&nbsp;")
            }
        $(".layui-layer.layui-layer-page.layui-layer-prompt.layer-anim.layer-anim-00").css({"border":"3px solid",
                                "font-weight":"bold",
                                "border-radius": "5px",
                                "color": "black",
                                "padding": "15px",
                                "background-color":"white"})

    }
</script>
<p>源代码</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;comcu_btn&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;test()&quot;</span>&gt;</span>乘数计算器<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;//unpkg.com/layui@2.8.17/dist/layui.js&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">function</span> <span class="title function_">isnum</span>(<span class="params">str</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">if</span> (!<span class="built_in">isNaN</span>(<span class="built_in">parseFloat</span>(str)) &amp;&amp; <span class="built_in">isFinite</span>(str) )&#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">return</span> <span class="literal">true</span>&#125;</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">else</span>&#123;<span class="keyword">return</span> <span class="literal">false</span>&#125;</span></span><br><span class="line"><span class="language-javascript">	&#125;</span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">var</span> layer ;</span></span><br><span class="line"><span class="language-javascript">    layui.<span class="title function_">use</span>(<span class="string">&#x27;layer&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        layer = layui.<span class="property">layer</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">		layer.<span class="title function_">prompt</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">formType</span>:<span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">title</span>: <span class="string">&#x27;乘数计算器&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">id</span>:<span class="string">&quot;layui_text&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">		&#125;,<span class="keyword">function</span>(<span class="params">value,index,elem</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">if</span>(value==<span class="string">&quot;&quot;</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="title function_">alert</span>(<span class="string">&quot;请输入&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">var</span> data1=$(<span class="string">&#x27;.new_input1&#x27;</span>).<span class="title function_">val</span>()</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">if</span> (data1==<span class="string">&quot;&quot;</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="title function_">alert</span>(<span class="string">&quot;请输入&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">if</span> (<span class="title function_">isnum</span>(value) &amp;&amp; <span class="title function_">isnum</span>(data1))&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">var</span> mu =value*data1</span></span><br><span class="line"><span class="language-javascript">					<span class="title function_">alert</span>(mu)</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">else</span>&#123;<span class="title function_">alert</span>(<span class="string">&quot;输入不合法&quot;</span>)&#125;</span></span><br><span class="line"><span class="language-javascript">				</span></span><br><span class="line"><span class="language-javascript">				layer.<span class="title function_">close</span>(index)</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">if</span> ($(<span class="string">&quot;.new_input1&quot;</span>).<span class="property">length</span> == <span class="number">0</span>)&#123; </span></span><br><span class="line"><span class="language-javascript">			$(<span class="string">&quot;.layui-layer-content&quot;</span>).<span class="title function_">append</span>(<span class="string">&quot;&lt;br/&gt;&lt;input type=\&quot;text\&quot; class=\&quot;new_input1\&quot; placeholder=\&quot;输入随机数\&quot;/&gt;&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">			$(<span class="string">&quot;.layui-layer-btn0&quot;</span>).<span class="title function_">append</span>(<span class="string">&quot;&amp;nbsp;&amp;nbsp;&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		$(<span class="string">&quot;.layui-layer.layui-layer-page.layui-layer-prompt.layer-anim.layer-anim-00&quot;</span>).<span class="title function_">css</span>(&#123;<span class="string">&quot;border&quot;</span>:<span class="string">&quot;3px solid&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="string">&quot;font-weight&quot;</span>:<span class="string">&quot;bold&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="string">&quot;border-radius&quot;</span>: <span class="string">&quot;5px&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="string">&quot;color&quot;</span>: <span class="string">&quot;black&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="string">&quot;padding&quot;</span>: <span class="string">&quot;15px&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="string">&quot;background-color&quot;</span>:<span class="string">&quot;white&quot;</span>&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>测试</category>
      </categories>
  </entry>
  <entry>
    <title>(自用/收藏)CSS效果/CSS动画</title>
    <url>/2023/09/29/CSS%E5%8A%A8%E7%94%BB/</url>
    <content><![CDATA[<div class="biankuang">
<p>边框效果</p>
</div>
<style>
.biankuang{
        font-size:30px;
        font-weight:bold;
        color: black;
        border: 5px solid;
        border-radius: 5px;
        padding: 15px;
        background-color:white;
    }
</style>


<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.biankuang</span>&#123;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">font-size</span>:<span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">font-weight</span>:bold;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">color</span>: black;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">border</span>: <span class="number">5px</span> solid; #厚度</span></span><br><span class="line"><span class="language-css">		<span class="attribute">border-radius</span>: <span class="number">5px</span>; #曲率</span></span><br><span class="line"><span class="language-css">		<span class="attribute">padding</span>: <span class="number">15px</span>; </span></span><br><span class="line"><span class="language-css">		<span class="attribute">background-color</span>:white;</span></span><br><span class="line"><span class="language-css">	&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<span id="more"></span>


<div class="animate_test">
<p>边框效果</p>
</div>
<style>
.animate_test{
    animation: bounce; 
    animation-duration: 2s; 
}
</style>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;animate_test&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>边框效果<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.animate_test</span>&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation</span>: bounce; </span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation-duration</span>: <span class="number">2s</span>; </span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>介绍</category>
      </categories>
  </entry>
  <entry>
    <title>【算法/Python】DataFrame的单行指定插入</title>
    <url>/2023/09/29/%E3%80%90%E7%AE%97%E6%B3%95-Python%E3%80%91DataFrame%E7%9A%84%E5%8D%95%E8%A1%8C%E6%8C%87%E5%AE%9A%E6%8F%92%E5%85%A5/</url>
    <content><![CDATA[<p><img data-src="/image/929D_226_1.jpg" alt="1"><br>1.前言<br>Pandas的DataFrame常常用于存储二维数组<br>pandas的功能也比较强大，可以对接excel。<br>但当数据行数很多的情况，就想要新数据插入指定行，<br>似乎pandas并没有现成的函数支持<br>只有比较原始的插入，而且这种方法必须要求list的长度等于df的列数</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">df.<span class="keyword">loc</span>[<span class="built_in">len</span>(df.<span class="built_in">index</span>)]=<span class="keyword">list</span> </span><br></pre></td></tr></table></figure>

<p>于是就想写一个</p>
<span id="more"></span>
<p>2.算法<br>废话不多说上算法<br>利用分离，然后上下合并（concat）的方法<br>通常数据较多用行名作参数比较容易</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line">def <span class="built_in">dfinsert</span>(df, indexname, list,name):</span><br><span class="line">	#df为原数据，list为想要插入的数据</span><br><span class="line">    df_add = pd.<span class="built_in">DataFrame</span>(</span><br><span class="line">		columns=<span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(list) + <span class="number">1</span>))</span><br><span class="line">		)</span><br><span class="line">    df_add.loc[name] = list #创建想要插入的df数据</span><br><span class="line">    df1 = df.loc[:indexname, :]</span><br><span class="line">	# 不同于行数定位，要获取下一行有点绕</span><br><span class="line">    y=<span class="string">&quot;&quot;</span></span><br><span class="line">    for e in <span class="built_in">range</span>(<span class="built_in">len</span>(<span class="built_in">list</span>(df.index))):</span><br><span class="line">        if <span class="built_in">list</span>(df.index)[e]==indexname:</span><br><span class="line">            y=<span class="built_in">list</span>(df.index)[e+<span class="number">1</span>]</span><br><span class="line">    df2 = df.loc[y:, :]</span><br><span class="line">    df_new = pd.<span class="built_in">concat</span>([df1, df_add, df2])</span><br><span class="line">    return df_new #合并后的数据</span><br></pre></td></tr></table></figure>

<p>也可以用行数作参数，基本就改一下</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">dfinsert</span>(<span class="params">df, i, listt1,name</span>):</span><br><span class="line">	i=<span class="built_in">int</span>(i) <span class="comment"># 如果i是str先换成int</span></span><br><span class="line">    df_add = pd.DataFrame(</span><br><span class="line">        columns=<span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(listt1) + <span class="number">1</span>)))</span><br><span class="line">    df_add.loc[name] = listt1</span><br><span class="line">    df1 = df.loc[:i, :]</span><br><span class="line">	<span class="comment"># 行数定位加1就完了</span></span><br><span class="line">    df2 = df.loc[i+<span class="number">1</span>:, :]</span><br><span class="line">    df_new = pd.concat([df1, df_add, df2])</span><br><span class="line">    <span class="keyword">return</span> df_new <span class="comment">#合并后的数据</span></span><br></pre></td></tr></table></figure>
<p>完结</p>
]]></content>
      <categories>
        <category>算法</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>jQuery的css选择器的写法</title>
    <url>/2023/09/28/jQuery%E7%9A%84css%E9%80%89%E6%8B%A9%E5%99%A8%E7%9A%84%E5%86%99%E6%B3%95/</url>
    <content><![CDATA[<p>前文传送门<br><a href="/2023/09/27/%E7%94%A8JS%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%88%B6%E4%BD%9C%E7%9A%84%E7%AE%80%E6%98%93%E7%88%AC%E8%99%AB">前文：用JS（前端）制作的简易爬虫</a><br><img data-src="/image/928D_149_1.jpg" alt="1"><br><a href="https://www.runoob.com/jquery/jquery-install.html">参考</a></p>
<p>1.jQuery<br>jQuery主要可以简化一部分JS写法，同时功能性也很强大<br>笔者目前在学习阶段，对jQuery只是小有拙见，有误见谅。</p>
<span id="more"></span>
<p>2.jQuery的使用方法<br>调用jQuery</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这里用了百度源，也可以用其他的</p>
<p>3.函数写法差异<br>jQuery的写法更为简练<br>例：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;test_text&quot;</span>&gt;<span class="variable constant_">TEST</span>&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//js写法</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">var</span> text=<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.test_text&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="variable language_">console</span>.<span class="title function_">log</span>(text) <span class="comment">//输出TEST</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//jquery写法</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">var</span> text=$(<span class="string">&quot;.test_text&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="variable language_">console</span>.<span class="title function_">log</span>(text) <span class="comment">//输出TEST</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>4.常用函数<br>修改<br>.attr(“”,””) #属性<br>.css({“”:””}) #css样式<br>.text(“”) #文本<br>不赋值则会直接更改元素html</p>
<p>5.jQuery关于music pause的坑</p>
<figure class="highlight mel"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&quot;&quot;</span>).get(<span class="number">0</span>).<span class="keyword">pause</span>()</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line">$(<span class="string">&quot;&quot;</span>)[<span class="number">0</span>].<span class="keyword">pause</span>()</span><br></pre></td></tr></table></figure>
<p>如果直接,会报错</p>
<figure class="highlight mel"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&quot;&quot;</span>).<span class="keyword">pause</span>()</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>介绍</category>
      </categories>
      <tags>
        <tag>介绍</tag>
      </tags>
  </entry>
  <entry>
    <title>资料</title>
    <url>/2023/09/26/%E8%B5%84%E6%96%99/</url>
    <content><![CDATA[<p>hexo单设备部署多个服务器<br><a href="https://zhuanlan.zhihu.com/p/69218641">引用文章</a></p>
<p><img data-src="/image/2.jpeg" alt="1"></p>
]]></content>
      <categories>
        <category>测试</category>
      </categories>
  </entry>
  <entry>
    <title>东华大学介绍</title>
    <url>/2023/09/26/%E6%B5%8B%E8%AF%95/</url>
    <content><![CDATA[<p><img data-src="/image/1.png" alt="1"><br>学校介绍<br>东华大学是教育部直属、国家“211工程”、国家“双一流”建设高校。学校秉承“崇德博学、砺志尚实”的校训，不断开拓奋进，已发展成为以纺织、材料、设计为优势，特色鲜明的多科性、高水平大学。</p>
<span id="more"></span>
<p>学校的办学历史可追溯至1912年实业家张謇创办的纺织染传习所。1951年建校，时名华东纺织工学院。1960年，被国家教育部确定为全国重点大学。1981年，成为中国首批具有博士、硕士、学士三级学位授予权的大学之一。1985年，更名为中国纺织大学。1998年，被确定为国家“211工程”重点建设的高等学校。1999年，更名为东华大学。2017年，列入国家“双一流”建设高校。</p>
<p>学校地处中国上海，现有松江校区、延安路校区和新华路校区，占地面积近2000亩，校舍总建筑面积83万余平方米。学校是“上海市花园单位”和“上海市文明校园”。松江校区是国家级水利风景区。</p>
<p>学校全校教职工2289人，专任教师1462人，其中专职院士２人，资深院士2人，兼职院士17人，万人计划、长江学者、国家杰青等高层次人才60余人次，其他高级职称教师900余名。全校本科生14422人，硕士研究生7255人，博士研究生1404人，学历留学生705人。</p>
<p>学校现设有18个学院（部），拥有6个博士后流动站、11个一级学科博士点、3个博士专业学位授权类别、29个一级学科硕士点、2个二级学科硕士点、17个专业学位硕士授权类别、59个本科专业，涵盖工学、理学、管理学、经济学、艺术学、文学、法学、历史学、教育学九大学科门类。现有2个国家“双一流”建设学科， 1个上海高校Ι类高峰学科。纺织科学与工程保持国内领先，获评A+学科。化学、工程学、数学、材料科学、计算机科学、环境科学与生态学、生物与生化7个学科入围ESI全球前1%，其中材料科学学科进入全球前1‰。拥有1个国家重点实验室、1个国家工程技术研究中心、22个省部级重点科研平台，2个国家引智基地以及国家大学科技园。</p>
<p>学校以培养德智体美劳全面发展的社会主义建设者和接班人为根本任务，坚持“严谨、勤奋、求实、创新”的优良校风，培养基础宽厚、实践能力强、具有创新精神和社会责任感的高素质人才。学校积极建设“五育并举”的教育体系，构建本科生“分层教学、分流培养、多元成才、人人成才”的培养体系，持续深化教育教学改革，新世纪以来，获国家级教学成果奖8项。拥有2个国家级实验教学示范中心，1个国家级虚拟仿真实验教学中心，3个国家工程实践教育中心，10个国家级特色专业，29个国家级一流本科专业。入选 “全国高校黄大年式教师团队” 2个。学校积极构建一流的研究生培养机制，大力发展专业学位研究生教育，获评全国示范性工程专业学位研究生联合培养基地2个，首批进入教育部“卓越工程师教育培养计划”，获评“全国工程硕士研究生教育创新院校”。东华学子近三年获得国内外学科竞赛、文体比赛冠军、金奖或一等奖260余项，充分彰显学生的创造力。女足获大学生联赛全国冠军，学校进入“中国高校体育竞赛榜”前20名。学校全面推进双创教育，产教融合人才培养协同机制成效显著，新材料现代产业学院获批教育部首批现代产业学院，成为全国首次获批的50所现代产业学院之一。获评全国高校实践育人创新创业基地、全国创新创业典型经验高校、全国高等学校毕业生就业工作先进集体等荣誉。近年来，毕业生平均就业率超过96%，薪资位于中国高校毕业生薪酬指数排名16-21位，近五年，学生自主创业420余人。建校至今，为国家培养各类人才26万余人，毕业生成为各行各业的中坚和栋梁。</p>
<p>学校坚持产学研用相结合的办学特色，承接国家重大科研任务，支撑国家产业转型升级和新兴产业发展等战略需求。新世纪以来，获国家自然科学奖、国家技术发明奖和国家科技进步奖31项。大批科研成果广泛应用于航天航空、重大建筑工程、环境保护等领域，为“天宫”“天舟”“北斗”“天通”“嫦娥”做出贡献。纤维材料改性国家重点实验室获评“优秀”，获批建设国家先进功能纤维创新中心、国家先进印染技术创新中心、民用航空复合材料省部共建协同创新中心、上海市现代纺织前沿科学研究基地、“一带一路”纺织智能制造与工程国际联合实验室等。建立海派时尚设计及价值创造协同创新中心、城市创意经济与创新服务研究基地、东华大学“一带一路”研究中心等，服务国家经济社会发展、长三角一体化发展国家战略和上海时尚之都、设计之都建设。</p>
<p>学校大力推进新时期教育对外开放，积极对接国家“一带一路”重要倡议，联合18个国家35所纺织特色高校成立“一带一路”世界纺织大学联盟，与全球150多所国（境）外高校建立了良好的合作关系。获批教育部“中非高校20+20合作计划”，在肯尼亚莫伊大学建立世界首家纺织服装特色的莫伊大学孔子学院。与爱丁堡大学合作创办东华大学上海国际时尚创意学院，培养国际一流时尚创意人才。</p>
<p>面向未来，东华大学将继续以习近平新时代中国特色社会主义思想为指导，全面落实立德树人根本任务，加快“双一流”建设，全力服务国家和上海市的战略需求，为实现“国内一流、国际有影响，有特色的高水平研究型大学”的目标而不懈奋斗！</p>
]]></content>
      <categories>
        <category>测试</category>
      </categories>
  </entry>
</search>
