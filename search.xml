<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>基于hexo部署github的个人网站</title>
    <url>/2023/10/09/%E5%9F%BA%E4%BA%8Ehexo%E9%83%A8%E7%BD%B2github%E7%9A%84%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99/</url>
    <content><![CDATA[<p>前言：<br>GithubPages提供了免费的网页部署功能，一旦发布了网站，无论何时何地都可以在互联网上<br>查看。同时网站稳定，即使网站长年未更新，依旧仍然可以在互联网上查看。hexo是一个能够<br>快速通过GithubPages构建一个个人博客的框架，hexo生成出的网页，具有个人博客的基本<br>结构和组件，sidebar，menu，localsearch等，你只需要修改一些设置就能够建立出一个简<br>洁干净的个人博客的网站。同时hexo存在大量的第三方组件的支持，通过设置可以快捷调用出<br>想要的功能，如字数统计，置顶设置等操作。</p>
<span id="more"></span>

<p>正文：<br>以下是基于Github用hexo部署一个网站的步骤，最终会发布一个<br>hexo默认的网页，也就是landscape的主题，hexo还存在其他很多的第三方集成的主题<br>本文不包括网页设计部分和流程</p>
<p>1.首先是搭建环境<br>(1)<br><a href="https://nodejs.org/en">Nodejs下载</a><br>Nodejs安装后会携带npm，通过npm可以快速安装<br>一些第三方插件<br>(2)<br><a href="https://git-scm.com/download/win">Git下载</a><br>git安装可以打开git窗口，git可以在终端push到Github<br>hexo也主要通过git进行网页部署</p>
<p>2.Github基础配置<br>(1)注册登录<br><a href="https://github.com/">Github</a><br>(登不上请科学上网)</p>
<p>(2)创建新的仓库(repository)<br><img src="/2023/10/09/%E5%9F%BA%E4%BA%8Ehexo%E9%83%A8%E7%BD%B2github%E7%9A%84%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99/4.png" alt="1"><br>登录后创建一个新的repository，命名尽量按<br>用户名&#x2F;用户名.github.io，其他没要求，仓库设置为public</p>
<p>(3)SSH创建<br>SSH公钥是Github识别终端的其中一种方式，<br>在Github个人中心的右侧栏Setting点击后<br>在左侧栏进入带有的SSH字眼<br>创建一个新的SSH,名称随意,其中内容后续有用</p>
<p>3.Hexo<br><a href="https://hexo.io/zh-cn/index.html">Hexo官网</a><br><img src="/2023/10/09/%E5%9F%BA%E4%BA%8Ehexo%E9%83%A8%E7%BD%B2github%E7%9A%84%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99/1.png" alt="1"><br>(1)创建一个空的文件夹（可自己命名）<br>随意在任意磁盘的路径，创建一个空的文件夹<br>在文件夹里，右键点进Git Bash里<br>并在黑色命令框里依次输入<br>记住在命令框粘贴不是Ctrl+V,尽量用鼠标右键<br><img src="/2023/10/09/%E5%9F%BA%E4%BA%8Ehexo%E9%83%A8%E7%BD%B2github%E7%9A%84%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99/2.png" alt="1"></p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span> hexo-cli <span class="comment">#安装hexo</span></span><br><span class="line">hexo init <span class="comment">#hexo初始化</span></span><br><span class="line">npm <span class="keyword">install</span> <span class="comment">#npm安装</span></span><br></pre></td></tr></table></figure>
<p>(2)成功后,尝试输入</p>
<figure class="highlight verilog"><table><tr><td class="code"><pre><span class="line">hexo <span class="keyword">generate</span> #hexo解析md等文件，生成文件结构</span><br><span class="line">hexo server #hexo本地服务器查看</span><br></pre></td></tr></table></figure>
<p>可简写为</p>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">hexo g</span></span><br><span class="line"><span class="attribute">hexo s</span></span><br></pre></td></tr></table></figure>
<p>如下图左边这样的界面（这是官网给的图片）<br><img src="/2023/10/09/%E5%9F%BA%E4%BA%8Ehexo%E9%83%A8%E7%BD%B2github%E7%9A%84%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99/3.png" alt="1"><br>(3)上述代码成功<br>按住Ctrl就可以打开本地链接<br>测试成功后用键盘输入</p>
<figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line"><span class="variable">Ctrl</span><span class="operator">+</span><span class="built_in">C</span></span><br></pre></td></tr></table></figure>
<p>可以关闭本地服务器，Ctrl+C的操作可以停止任意命令操作</p>
<p>4.SSH公钥创建<br>(1)用cd命令进入SSH根目录<br>window打开命令框,win10可以快捷键win+r输入cmd<br>进行命令框，输入用cd命令进入SSH根目录</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">cd ~<span class="regexp">/.ssh/</span></span><br></pre></td></tr></table></figure>
<p>(2)在公钥中添加github信息</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -f  ~<span class="regexp">/.ssh/</span>密钥名称 -C <span class="string">&quot;邮箱&quot;</span></span><br></pre></td></tr></table></figure>
<p>(3)在SSH根目录找到config文件并更改</p>
<figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line">Host xxxxxx.github.com</span><br><span class="line">    HostName ssh/github.com</span><br><span class="line">    <span class="keyword">User</span> <span class="title">git</span></span><br><span class="line">    IdentityFile ~/.ssh/密钥名称</span><br></pre></td></tr></table></figure>
<p>(4)创建公钥</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line"><span class="built_in">clip</span> &lt; ~<span class="regexp">/.ssh/</span>密钥的名称.pub</span><br></pre></td></tr></table></figure>
<p>在目录下找到密钥名称的pub文件,打开复制里面内容,<br>粘贴到Github的SSH的内容里</p>
<p>(5)添加SSH</p>
<figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line">ssh-<span class="keyword">add</span> xxxxxx <span class="meta">#密钥名称</span></span><br></pre></td></tr></table></figure>
<p>如果执行以上命令出现错误：Could not open a<br>connection to your authentication agent.，<br>那么就需要先执行ssh-agent bash，再执行以上命令</p>
<p>(6)检验是否成功<br>xxxxxx”ssh目录下config文件中的命名</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">ssh</span> -T git<span class="variable">@xxxxxxx</span>.github.com</span><br></pre></td></tr></table></figure>
<p>出现</p>
<figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">You<span class="symbol">&#x27;ve</span> successfully authenticated, </span><br><span class="line">but GitHub does <span class="keyword">not</span> provide shell <span class="keyword">access</span>.</span><br></pre></td></tr></table></figure>
<p>则代表成功</p>
<p>5.配置github<br>(1)点进博客文件夹中的.deploy_git&#x2F;.git中<br>进入Git Bash里<br>.deploy_git需要打开查看隐藏文件的功能才能够找到，<br>详情自己百度查看，.deploy_git没有就hexo部署一次<br>就会出来了，会报错tell me who are you</p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">git config <span class="keyword">user</span>.name &quot;用户名&quot;</span><br><span class="line">git config <span class="keyword">user</span>.email &quot;邮箱&quot;</span><br></pre></td></tr></table></figure>
<p>(2)在博客文件夹中的_config.yml文件<br>打开在末尾更改下列代码</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: git@xxxxxx<span class="selector-class">.github</span><span class="selector-class">.com</span>:用户名/用户名<span class="selector-class">.github</span><span class="selector-class">.io</span><span class="selector-class">.git</span></span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<p>如果在github输入的不是上述这个格式，可能会打不开网页</p>
<p>(3)服务器部署<br>在博客文件夹的目录下进入Git Bash<br>依次输入</p>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">hexo clean</span></span><br><span class="line"><span class="attribute">hexo g</span></span><br><span class="line"><span class="attribute">hexo d</span></span><br></pre></td></tr></table></figure>
<p>部署成功后，服务器会有延迟，大概过一两分钟会更新页面<br>可以在github上看部署是否成功，如果失败github会发邮件的</p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>介绍</tag>
      </tags>
  </entry>
  <entry>
    <title>用Selenium制作前端式爬虫</title>
    <url>/2023/09/28/%E7%94%A8selenum%E5%88%B6%E4%BD%9C%E5%89%8D%E7%AB%AF%E5%BC%8F%E7%88%AC%E8%99%AB/</url>
    <content><![CDATA[<p>笔者也就小白水平，写selenium也是边学边写的<br>本文只是介绍抓取部分模块，怎么处理可以看看上文<br><a href="https://jkysei.space/2023/09/27/%E7%94%A8JS%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%88%B6%E4%BD%9C%E7%9A%84%E7%AE%80%E6%98%93%E7%88%AC%E8%99%AB/">用JS（前端）制作的简易爬虫</a><br>python也有类似CSS选择器的第三方库，后续再更新</p>
<span id="more"></span>
<p>1.前言<br>大部分的网站都有反爬机制<br><img src="/image/928D_113_1.jpg" alt="1"></p>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">requests.<span class="keyword">get</span>(url,headers,<span class="keyword">timeout</span>)</span><br></pre></td></tr></table></figure>
<p>requests早已经无法爬取网页了，<br>所以希望用一种能够越过反爬虫的第三方库<br>selenium是模拟驱动chrome访问网站的方式越过反爬虫<br>2.Selenium的调用</p>
<p>在Pycharm或pip上安装selenium<br>随后即可import</p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br></pre></td></tr></table></figure>
<p>为了方便修改浏览器设置,引用Options模块</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.<span class="keyword">options</span> <span class="keyword">import</span> <span class="keyword">Options</span></span><br></pre></td></tr></table></figure>
<p>用chrome_options存放options</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">chrome_options</span> = Options()</span><br><span class="line"><span class="attr">chrome_options.page_load_strategy</span> = <span class="string">&#x27;eager&#x27;</span></span><br></pre></td></tr></table></figure>
<p>page_load_strategy是浏览器加载策略，默认是normal，eager则是快速加载<br>在网页资源加载完成时就会立刻关闭，可以省很多时间。<br>网上有很多说有更加快速的方法，说实话是噱头，没有实际用处，<br>照着他的方法，会迅速加载网页然后光速关闭，根本无法正常抓取网页内容<br>eagle已经是最快的策略，更快可以尝试多线程的爬虫。</p>
<p>如果电脑里安装了多个chrome或者python无法获取你的chrome程序位置，<br>可以引用service模块</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">from selenium<span class="selector-class">.webdriver</span><span class="selector-class">.chrome</span><span class="selector-class">.service</span> import Service</span><br></pre></td></tr></table></figure>

<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">service</span>=Service(executable_path=<span class="string">&quot;路径&quot;</span>)</span><br><span class="line"><span class="comment">#注：python存放路径引号内,如果/可以只写一个,但是如果\\要写两个</span></span><br></pre></td></tr></table></figure>

<p>设置好就可以驱动浏览器了</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">driver = webdriver.<span class="constructor">Chrome(<span class="params">service</span>=<span class="params">service</span>,<span class="params">options</span>=<span class="params">chrome_options</span>)</span></span><br></pre></td></tr></table></figure>

<p>随后便可以抓取网页资源</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">driver<span class="selector-class">.get</span>(url)</span><br><span class="line">url_get = driver<span class="selector-class">.page_source</span> <span class="selector-id">#url_get</span> 就是抓取下的网页</span><br><span class="line">driver<span class="selector-class">.close</span>()</span><br><span class="line">driver<span class="selector-class">.quit</span>()</span><br></pre></td></tr></table></figure>

<p>3.报错模块<br>selenium虽然挺稳定，但有时因为网站连接不稳定，<br>就会报错，中途寄掉的情况。。。经常会有<br>特别是爬图，是需要爬到详细页面，页面数量也会倍增。<br>报错一般有，加载timeout，selenium一个狗血的地方，timeout会<br>让整个程序直接中断，所以一定要try，报错了让它except</p>
<p>selenium设置timeout的方式</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">browserset</span>.set_page_load_timeout(<span class="number">100</span>)</span><br><span class="line"><span class="attribute">browserset</span>.set_script_timeout(<span class="number">100</span>)</span><br></pre></td></tr></table></figure>
<p>第一种是页面加载报timeout的错误，退出，第二种是脚本中止加载<br>两者有点小区别，详细请百度。</p>
<p>驱动浏览器大致可以这么写</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#防空链接报错</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">printpause</span>(<span class="params">timepause</span>):</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;***访问超时，程序暂停***&#x27;</span>)</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&#x27;%d秒后继续&#x27;</span> %timepause)</span><br><span class="line">	time.sleep(timepause) <span class="comment">#报错会一时中止加载</span></span><br><span class="line">	</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">drivebrowser</span>():</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        browser=browser_set() <span class="comment">#browser_set()就是驱动浏览器的函数</span></span><br><span class="line">        <span class="keyword">return</span> browser <span class="comment">#如果try成功了就会return出browser</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        secends = random.randint(<span class="number">120</span>, <span class="number">150</span>) </span><br><span class="line">        printpause(secends) </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;***重试请求***&#x27;</span>)</span><br><span class="line">            browser=browser_set()</span><br><span class="line">            <span class="keyword">return</span> browser </span><br><span class="line">		<span class="keyword">except</span>:         <span class="comment">#写多几层保险一点</span></span><br><span class="line">            printpause(<span class="number">150</span>)</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;***重试请求***&#x27;</span>)</span><br><span class="line">                browser=browser_set()</span><br><span class="line">                <span class="keyword">return</span> browser</span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;***访问失败，程序继续***&#x27;</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>  <span class="comment">#实在不行就跳过了</span></span><br></pre></td></tr></table></figure>
<p>第二种报错就是访问超时的报错，也建议用try函数<br>访问函数也可以照着上面写try，except，这里就不多写了</p>
<p>写了这么多try之后，我也在想应该不可能报错了，其实上还是<br>会报的只不过几率很小很小，所以大型爬虫操作还是悠着点，<br>几千秒的运行中间报了错可不是开玩笑的。。</p>
<p><img src="/image/928D_91_1.jpg" alt="2"></p>
<p>4.额额额什么？<br>selenium无法正确抓取网页了？？<br>现在的情况是，单是selenium的爬虫已经会被网站拦截了</p>
<p>搜索别人的经验后，了解到了防侦测脚本驱动浏览器的第三库</p>
<figure class="highlight elm"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> undetected_chromedriver <span class="keyword">as</span> uc</span><br></pre></td></tr></table></figure>
<p>以下是抄的作业<br>以咱的水平看不懂，但确实神奇的解决了问题</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">browser_set</span>():</span><br><span class="line">    <span class="comment">#浏览器引擎设置</span></span><br><span class="line">    options = webdriver.ChromeOptions()</span><br><span class="line">	<span class="comment">#取出chrome的option设置</span></span><br><span class="line">    options.add_argument(<span class="string">&quot;--headless&quot;</span>)</span><br><span class="line">	<span class="comment">#后台驱动chrome</span></span><br><span class="line">    <span class="comment"># 去除“Chrome正受到自动测试软件的控制”的显示</span></span><br><span class="line">    options.add_experimental_option(<span class="string">&quot;excludeSwitches&quot;</span>, [<span class="string">&quot;enable-automation&quot;</span>])</span><br><span class="line">    browserset = webdriver.Chrome(options=options)</span><br><span class="line">    <span class="comment"># 设置headers</span></span><br><span class="line">    browserset.execute_cdp_cmd(<span class="string">&quot;Network.setExtraHTTPHeaders&quot;</span>,</span><br><span class="line">                           &#123;<span class="string">&quot;headers&quot;</span>:</span><br><span class="line">                                &#123;</span><br><span class="line">                                    <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36&quot;</span>,</span><br><span class="line">                                    &#125;</span><br><span class="line">                            &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 防止网站检测selenium的webdriver</span></span><br><span class="line">    browserset.execute_cdp_cmd(<span class="string">&quot;Page.addScriptToEvaluateOnNewDocument&quot;</span>, &#123;</span><br><span class="line">        <span class="string">&quot;source&quot;</span>: <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                Object.defineProperty(navigator, &#x27;webdriver&#x27;, &#123;</span></span><br><span class="line"><span class="string">                    get: () =&gt; False</span></span><br><span class="line"><span class="string">                &#125;)</span></span><br><span class="line"><span class="string">            &quot;&quot;&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line">    browserset.set_page_load_timeout(<span class="number">100</span>)</span><br><span class="line">    browserset.set_script_timeout(<span class="number">100</span>)</span><br><span class="line">    <span class="keyword">return</span> browserset</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>爬虫</tag>
      </tags>
  </entry>
  <entry>
    <title>【Python/数模】灰色关联分析</title>
    <url>/2023/10/13/%E3%80%90Python-%E6%95%B0%E6%A8%A1%E3%80%91%E7%81%B0%E8%89%B2%E5%85%B3%E8%81%94%E5%88%86%E6%9E%90/</url>
    <content><![CDATA[<p>一、前言<br>灰色关联分析(Grey Relation Analysis，GRA)<br>主要分析的是多因素对于指标的影响的关联度，<br>通过对数据的灰色关联分析，可以得到哪一个因素对于指标<br>的影响程度最高，关联度最高。哪一个因素关联度最低。</p>
<span id="more"></span>
<p>二、正文<br>1.数据<br>首先是数据，大概长这样,建立矩阵然后numpy化<br>这里数据使用了一组超市营收的数据,行索引值为年份<br>（按年份排列的数据）</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">name0</span>=[<span class="string">&quot;总营收&quot;</span>]</span><br><span class="line"><span class="attribute">li_name</span>=[ <span class="string">&quot;顾客量&quot;</span>,<span class="string">&quot;销售量&quot;</span>,<span class="string">&quot;采购量&quot;</span>]</span><br><span class="line"><span class="attribute">l1</span>=[<span class="number">340</span>,<span class="number">355</span>,<span class="number">458</span>,<span class="number">502</span>,<span class="number">568</span>]; #指标数据也就作为参考数列</span><br><span class="line"><span class="attribute">l2</span>=[<span class="number">400</span>,<span class="number">559</span>,<span class="number">580</span>,<span class="number">725</span>,<span class="number">840</span>]; </span><br><span class="line"><span class="attribute">l3</span>=[<span class="number">349</span>,<span class="number">361</span>,<span class="number">366</span>,<span class="number">402</span>,<span class="number">424</span>];</span><br><span class="line"><span class="attribute">l4</span>=[<span class="number">23</span>,<span class="number">93</span>,<span class="number">228</span>,<span class="number">268</span>,<span class="number">304</span>]</span><br><span class="line"><span class="attribute">matrix</span>=[l1,l2,l3,l4]</span><br><span class="line"><span class="attribute">matrix</span>=np.array(matrix)</span><br></pre></td></tr></table></figure>
<p>2.灰色关联系数的计算<br>然后灰色关联分析核心函数</p>
<figure class="highlight stan"><table><tr><td class="code"><pre><span class="line">def grey_coefficient(datamatrix):</span><br><span class="line">    <span class="comment">#归一化，这里用了均值法</span></span><br><span class="line">    <span class="comment">#data=np.array(datamatrix)</span></span><br><span class="line">    lt=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(datamatrix)):</span><br><span class="line">        t=datamatrix[i]</span><br><span class="line">        l=[]</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(t)):</span><br><span class="line">            l.append(datamatrix[i][j]/(np.<span class="built_in">mean</span>(t)))</span><br><span class="line">        lt.append(l)</span><br><span class="line">    <span class="title">data</span> = np.<span class="type">array</span>(lt)</span><br><span class="line">    max_i=list(<span class="title">data</span>[<span class="number">0</span>]) <span class="comment">#选取反映指标的数列作为参考数列</span></span><br><span class="line">    <span class="title">data</span>=<span class="title">data</span>[<span class="number">1</span>:] <span class="comment">#选取需要研究的灰色因素矩阵</span></span><br><span class="line">    n, m = <span class="title">data</span>.shape</span><br><span class="line">    min1 = np.<span class="built_in">min</span>(np.<span class="built_in">abs</span>(max_i - <span class="title">data</span>))</span><br><span class="line">    <span class="comment">#每列数值与最大值的差值绝对值的最小值</span></span><br><span class="line">    max1 = np.<span class="built_in">max</span>(np.<span class="built_in">abs</span>(max_i - <span class="title">data</span>))</span><br><span class="line">    <span class="comment"># 每列数值与最大值的差值绝对值的最大值</span></span><br><span class="line">    rho=<span class="number">0.5</span>  <span class="comment">#分辨系数</span></span><br><span class="line">    coefficient = np.zeros((n, m))</span><br><span class="line">    <span class="comment">#计算灰色关联系数</span></span><br><span class="line">    <span class="comment">#for循环矩阵的维度，行s，列k</span></span><br><span class="line">    <span class="keyword">for</span> s <span class="keyword">in</span> range(n):</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> range(m):</span><br><span class="line">            temp = np.<span class="built_in">abs</span>(max_i[k] - <span class="title">data</span>[s, k])</span><br><span class="line">            coefficient[s, k] = (min1 + rho * max1) / (temp + rho * max1)</span><br><span class="line">    <span class="keyword">return</span> coefficient</span><br></pre></td></tr></table></figure>

<p>下图为计算灰色关联系数的公式,看着十分复杂的样子，<br><img src="/2023/10/13/%E3%80%90Python-%E6%95%B0%E6%A8%A1%E3%80%91%E7%81%B0%E8%89%B2%E5%85%B3%E8%81%94%E5%88%86%E6%9E%90/grey.png" alt="1"><br>一一解读，rho是分辨系数，通常选取为0.5，<br>分子前面一堆是每个数值与参考数列（按列）的差值绝对值的最小值，计为a<br>后面一堆是每个数值与参考数列（按列）的差值绝对值的最大值乘以分辨系数， 把它计为b<br>分母前面一堆是每个数值与参考数列（按列）的差值绝对值，计为c<br>后面一堆其实和前面一样的数值<br>所以公式就是 (a+b)&#x2F;(c+b)，具体咋算的看上述代码<br>计算完灰色关联系数后就可以计算出每个因素的关联度了<br>3.灰色关联度的计算<br>关联度函数如下</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">grey_degree</span>(<span class="params">coefficient,weight=<span class="literal">None</span></span>):</span><br><span class="line">    m,n=coefficient.shape</span><br><span class="line">    <span class="keyword">if</span> weight <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        weight=np.ones(n)/n</span><br><span class="line">        <span class="comment">#均分权重</span></span><br><span class="line">    degree=np.dot(coefficient,weight)</span><br><span class="line">    <span class="comment">#向量点积,权重与关联系数的矩阵之间相乘，得到关联度数列</span></span><br><span class="line">    <span class="keyword">return</span> degree</span><br></pre></td></tr></table></figure>
<p>4.输出<br>调用主函数</p>
<figure class="highlight asciidoc"><table><tr><td class="code"><pre><span class="line">def main(matrix,li<span class="emphasis">_name): </span></span><br><span class="line"><span class="emphasis">	cofficient=(grey_coefficient(matrix))</span></span><br><span class="line"><span class="emphasis">	li_degree=grey_degree(cofficient)</span></span><br><span class="line"><span class="emphasis">	for i in range(len(li_name)):</span></span><br><span class="line"><span class="emphasis">		print(&quot;%1s的关联度为%2s&quot; %(li_name[i],li_degree[i]))</span></span><br><span class="line"><span class="emphasis">main(matrix,li_</span>name)</span><br><span class="line"><span class="code">	</span></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">输出结果如下：</span><br><span class="line">顾客量的关联度为0.8867594971864958</span><br><span class="line">销售量的关联度为0.8204732176462252</span><br><span class="line">采购量的关联度为0.5382259267869652</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>
<p>可以得出顾客量，销售量与总营收的关联度比较高，<br>采购量的关联度较低，所以超市应该一个做出采购的调整。</p>
<p>5.灰色关联分析有关存疑<br>灰色关联分析除了能够分析多因素对于单个指标的关联度，还能通过分析多因素的关联度，<br>从而得到每个因素的评分，然后就可以进行综合评价（类似TOPSIS），但是这时<br>参考数列就变成了数据中每列（每个因素的最大值）但是此时的min min (x0k-xik)就一定变成0<br>（因为参考数据是从数据里面选取的，相减必定为0）。<br>由于对灰色关联分析的了解甚少，灰色关联是否能够作为综合评价的数学模型存疑，有兴趣的话可以试试。</p>
<p>完结~~<br><img src="/2023/10/13/%E3%80%90Python-%E6%95%B0%E6%A8%A1%E3%80%91%E7%81%B0%E8%89%B2%E5%85%B3%E8%81%94%E5%88%86%E6%9E%90/1010D_218_1.jpg" alt="1"></p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
  </entry>
  <entry>
    <title>【数据挖掘/Python实现Apriori关联分析算法】</title>
    <url>/2023/10/12/%E3%80%90%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98-Python-Apriori%E5%85%B3%E8%81%94%E5%88%86%E6%9E%90%E7%AE%97%E6%B3%95%E3%80%91/</url>
    <content><![CDATA[<p>一、前言<br>关联规则分析是数据挖掘中最活跃的研究方法之一，通过关联规则分析，<br>可以得出不同数据中间的关联度，得到结论。<br>如对超市的销售数据进行关联分析，能够优化一些商品的组合销售。</p>
<span id="more"></span>
<p>二、参数<br>支持度（Support）<br>Support（A&#x3D;&gt;B）&#x3D;P(A∪B)<br>置信度(Confidence)<br>Confidence(A&#x3D;&gt;B)&#x3D;P(B∣A)<br>项集 (items)<br>如{A，B}<br>频繁度 (frequency)<br>frequency({B,C})&#x3D;BC出现次数&#x2F;总数据<br>frequency items(频繁项集)就是frequency的集合</p>
<p>三、mlxtend库<br>Python的mlxtend就有apriori模块，<br>直接代入就行，十分简单</p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> mlxtend.frequent_patterns <span class="keyword">import</span> apriori, association_rules</span><br></pre></td></tr></table></figure>
<p>apriori分析主要函数</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">def df<span class="constructor">_apriori(<span class="params">path</span>,<span class="params">df</span>,<span class="params">min_support</span>,<span class="params">min_threshold</span>)</span>:</span><br><span class="line">    frequent_itemsets = apriori(df, min_support, use_colnames=True)</span><br><span class="line">	#生成频繁项集，min_support为最小支持度，这项是筛选，如果数据过大尽量调低一点</span><br><span class="line">	<span class="keyword">try</span>:</span><br><span class="line">		rules = association<span class="constructor">_rules(<span class="params">frequent_itemsets</span>, <span class="params">metric</span>=&#x27;<span class="params">lift</span>&#x27;, <span class="params">min_threshold</span>)</span></span><br><span class="line">		#min_threshold为阈值，尽量不过低</span><br><span class="line">		#导出excel表，path为路径</span><br><span class="line">		<span class="keyword">with</span> pd.<span class="constructor">ExcelWriter(<span class="params">path</span>, <span class="params">engine</span>=&#x27;<span class="params">openpyxl</span>&#x27;, <span class="params">mode</span>=&#x27;<span class="params">w</span>&#x27;)</span> <span class="keyword">as</span> writer:</span><br><span class="line">			rules.<span class="keyword">to</span><span class="constructor">_excel(<span class="params">writer</span>, <span class="params">sheet_name</span>=<span class="string">&quot;Apriori&quot;</span>, <span class="params">index</span>=True)</span></span><br></pre></td></tr></table></figure>
<p>dataframe要求，例如下的一个顾客购买的订单信息</p>
<figure class="highlight asciidoc"><table><tr><td class="code"><pre><span class="line">df= pd.DataFrame(&#123;</span><br><span class="line"><span class="code">	香蕉:[1,0,1,0],</span></span><br><span class="line"><span class="code">	苹果:[1,1,1,1],</span></span><br><span class="line"><span class="code">	柑橘:[0,1,1,0],</span></span><br><span class="line"><span class="code">	芒果:[0,0,1,0],&#125;,</span></span><br><span class="line"><span class="code">	index=[i for i in range(4)])</span></span><br><span class="line"></span><br><span class="line">#实际是长这样的,1是该顾客购买了，0是没有购买</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"><span class="code">  香蕉 苹果 柑橘 芒果</span></span><br><span class="line">0 1    1    0    0 </span><br><span class="line">1 0    1    1    0</span><br><span class="line">2 1    1    1    1</span><br><span class="line">3 0    1    0    0</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>
<p>由于一般给出的数据肯定不长0，1矩阵这样，所以<br>要做数据处理，从数据库上导出的数据可能长这样</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">df</span></span></span><br><span class="line">订单 购买商品</span><br><span class="line">1    苹果</span><br><span class="line">1    香蕉 </span><br><span class="line">2    苹果</span><br><span class="line">2    柑橘</span><br><span class="line">3    香蕉 </span><br><span class="line">3    苹果 </span><br><span class="line">3    柑橘 </span><br><span class="line">3    芒果</span><br><span class="line">4    苹果</span><br></pre></td></tr></table></figure>
<p>这样的数据处理真的比较阴间。<br>下面的代码部分比较多，如果不需要处理的话可以跳过了</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line"><span class="comment">#两个基本函数</span></span><br><span class="line"><span class="comment">#注意pandas取出下来要处理才能变成列表</span></span><br><span class="line">def ti(df):</span><br><span class="line">    l=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> df:</span><br><span class="line">        l.append(i)</span><br><span class="line">    return l</span><br><span class="line"><span class="comment">#去重函数，为了获取所有商品名</span></span><br><span class="line">def de(li):</span><br><span class="line">    <span class="attribute">new_li</span>=set(li)</span><br><span class="line">    return new_li</span><br><span class="line"><span class="comment">#先将数据分列取出</span></span><br><span class="line"><span class="attribute">l_number</span>=ti(df.iloc[:,0]);<span class="attribute">l_data</span>=ti(df.iloc[:,1])</span><br><span class="line"><span class="comment">#上面为数据，下面为商品名和订单号列表</span></span><br><span class="line"><span class="attribute">l_order</span>=de(l_number);l_name=de(l_data)</span><br></pre></td></tr></table></figure>
<p>分订单得到每个订单的商品名，这里用了比较原始的方法，<br>可以使用更好的算法，运行压力也会减小</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">#return回元素的列表索引值</span><br><span class="line">def li_index(li,element):</span><br><span class="line">	<span class="keyword">try</span>:</span><br><span class="line">		<span class="built_in">index</span> = li.<span class="built_in">index</span>(element)</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">index</span></span><br><span class="line">	except:</span><br><span class="line">		<span class="keyword">return</span> None</span><br><span class="line">lt1 = []</span><br><span class="line"><span class="keyword">for</span> i in l_order :</span><br><span class="line">	<span class="keyword">lt</span>=[]</span><br><span class="line">	<span class="keyword">for</span> <span class="keyword">e</span> in <span class="built_in">range</span>(<span class="built_in">len</span>(l_data)):</span><br><span class="line">		<span class="keyword">if</span> l_number[<span class="keyword">e</span>]==i:</span><br><span class="line">			<span class="keyword">lt</span>.<span class="keyword">append</span>(li_index(li=l_name,element=l_data[<span class="keyword">e</span>]))</span><br><span class="line">	lt1.<span class="keyword">append</span>(<span class="keyword">lt</span>)</span><br><span class="line"># lt1分订单得到每个订单购买的商品的序号</span><br></pre></td></tr></table></figure>
<p>得到每个订单购买的商品的序号后，就可以建立矩阵了</p>
<figure class="highlight asciidoc"><table><tr><td class="code"><pre><span class="line">lt2 = [l<span class="emphasis">_name];</span></span><br><span class="line"><span class="emphasis">for i in range(len(lt1)):</span></span><br><span class="line"><span class="emphasis">	t = lt1[i]</span></span><br><span class="line"><span class="emphasis">	l_number = [0] * 4</span></span><br><span class="line"><span class="emphasis">	for e in t:</span></span><br><span class="line"><span class="emphasis">		l_number[e] = 1</span></span><br><span class="line"><span class="emphasis">	lt2.append(l_</span>number)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"><span class="code"> lt2=[[香蕉,苹果,柑橘,芒果],</span></span><br><span class="line"><span class="code">	[1,0,1,0],</span></span><br><span class="line"><span class="code">	[1,1,1,1],</span></span><br><span class="line"><span class="code">	[0,1,1,0],</span></span><br><span class="line"><span class="code">	[0,0,1,0]]</span></span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>
<p>最终终于得到了0，1的二维列表了，之后就是转化df了</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">df2 = pd<span class="selector-class">.DataFrame</span>(</span><br><span class="line">	lt2<span class="selector-attr">[1:]</span>, </span><br><span class="line">	<span class="attribute">columns</span>=lt2[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>
<p><img src="/2023/10/12/%E3%80%90%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98-Python-Apriori%E5%85%B3%E8%81%94%E5%88%86%E6%9E%90%E7%AE%97%E6%B3%95%E3%80%91/1.png" alt="1"></p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">df_apriori</span>(df2) #min_support=<span class="number">0</span>.<span class="number">5</span>，min_threshold=<span class="number">0</span>.<span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>运行后，得到下图<br><img src="/2023/10/12/%E3%80%90%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98-Python-Apriori%E5%85%B3%E8%81%94%E5%88%86%E6%9E%90%E7%AE%97%E6%B3%95%E3%80%91/2.png" alt="1"><br>然而得到的上图的结果并不充分，lift太低，这是由于数据量的问题，<br>实际问题的数据量会很大，lift会比较高，support会比较低，但其实aprioiri<br>对于数据量很大的数据，运行效率比较感人，所以相应也有很多优化的算法，<br>留个悬念以后再研究<br>四、完结<br><img src="/2023/10/12/%E3%80%90%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98-Python-Apriori%E5%85%B3%E8%81%94%E5%88%86%E6%9E%90%E7%AE%97%E6%B3%95%E3%80%91/1010D_106_1.jpg" alt="1"></p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
  </entry>
  <entry>
    <title>【Pytohn/数模】AHP层次分析法</title>
    <url>/2023/10/12/%E3%80%90Pytohn-%E6%95%B0%E6%A8%A1%E3%80%91AHP%E5%B1%82%E6%AC%A1%E5%88%86%E6%9E%90%E6%B3%95/</url>
    <content><![CDATA[<p>一、前言<br>AHP即层次分析法，也就是需要分层次来分析，<br>第一层是目标层，最终选择的方案，<br>第二层是准则层，要选择的方案考虑的基本因素。<br>第三层就是方案层，待选择的方案的层次。<br>然而这样讲肯定听不懂，所以举个栗子。</p>
<span id="more"></span>
<p>二、正文<br>准则层的判断矩阵<br><img src="/2023/10/12/%E3%80%90Pytohn-%E6%95%B0%E6%A8%A1%E3%80%91AHP%E5%B1%82%E6%AC%A1%E5%88%86%E6%9E%90%E6%B3%95/1.png" alt="1"><br>每格的数字代表行的元素对于列的元素的重要度，<br>数字越大则代表相对重要度就越高<br>可以看到主对角线全都为1（自身对自身的重要度为1）<br>与对角线相对称的两格数字相乘等于1<br>（自身对对方乘对方对自身&#x3D;1）</p>
<p>之后是方案层<br>方案层也就是不同地方对于因素的取舍<br>依次在五个因素中不同地方之间比对的矩阵，数值大<br>代表该地相较于比对的地方的对应因素要好。<br><img src="/2023/10/12/%E3%80%90Pytohn-%E6%95%B0%E6%A8%A1%E3%80%91AHP%E5%B1%82%E6%AC%A1%E5%88%86%E6%9E%90%E6%B3%95/2.png" alt="1"><br><img src="/2023/10/12/%E3%80%90Pytohn-%E6%95%B0%E6%A8%A1%E3%80%91AHP%E5%B1%82%E6%AC%A1%E5%88%86%E6%9E%90%E6%B3%95/3.png" alt="2"></p>
<p>判断矩阵的处理函数如下</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">def</span> ahp(datamatrix):</span><br><span class="line">    <span class="attribute">datamatrix</span> = np.array(datamatrix)</span><br><span class="line">	<span class="comment">#numpy化</span></span><br><span class="line">    <span class="attribute">m</span> = len(datamatrix)</span><br><span class="line">	<span class="comment">#获取矩阵的维度</span></span><br><span class="line">	<span class="comment">#每个数值标准：每个数值除以该行总和，axis=0是行的意思</span></span><br><span class="line">	<span class="comment">#然后每列求和除以维度得到的就是权重，axis=1是列的意思</span></span><br><span class="line">    <span class="attribute">weight</span> = (datamatrix / datamatrix.sum(axis=<span class="number">0</span>)).sum(axis=<span class="number">1</span>) / m</span><br><span class="line">	<span class="comment">#用权重乘以每个数值整列求和，除以权重求和再除以维度</span></span><br><span class="line">	<span class="comment">#得到最大特征值</span></span><br><span class="line">	<span class="comment">#lambda_max=1/n∑(AWi)/Wi (i为列，n为行)</span></span><br><span class="line">	<span class="comment">#AWi是乘以权重后每列的累计值</span></span><br><span class="line">    <span class="attribute">Lambda_max</span> = sum((weight * datamatrix).sum(axis=<span class="number">1</span>) / (m * weight))</span><br><span class="line">    <span class="attribute">CI</span> = (Lambda_max - m) / (m - <span class="number">1</span>)</span><br><span class="line">    <span class="attribute">RI</span> = &#123;<span class="number">1</span>: <span class="number">0</span>,</span><br><span class="line">          <span class="attribute">2</span>: <span class="number">0</span>,</span><br><span class="line">          <span class="attribute">3</span>: <span class="number">0</span>.<span class="number">58</span>,</span><br><span class="line">          <span class="attribute">4</span>: <span class="number">0</span>.<span class="number">90</span>,</span><br><span class="line">          <span class="attribute">5</span>: <span class="number">1</span>.<span class="number">12</span>,</span><br><span class="line">          <span class="attribute">6</span>: <span class="number">1</span>.<span class="number">24</span>,</span><br><span class="line">          <span class="attribute">7</span>: <span class="number">1</span>.<span class="number">32</span>,</span><br><span class="line">          <span class="attribute">8</span>: <span class="number">1</span>.<span class="number">41</span>,</span><br><span class="line">          <span class="attribute">9</span>: <span class="number">1</span>.<span class="number">45</span>,</span><br><span class="line">          <span class="attribute">10</span>: <span class="number">1</span>.<span class="number">49</span>,</span><br><span class="line">          <span class="attribute">11</span>: <span class="number">1</span>.<span class="number">51</span>&#125;</span><br><span class="line">    <span class="attribute">CR</span> = CI / RI[m]</span><br><span class="line">    <span class="attribute">if</span> CR &lt; <span class="number">0</span>.<span class="number">1</span>:</span><br><span class="line">        <span class="attribute">extra</span> = &#x27;True&#x27;</span><br><span class="line">    <span class="attribute">else</span>:</span><br><span class="line">        <span class="attribute">extra</span> = &#x27;False&#x27;</span><br><span class="line">    <span class="attribute">return</span> Lambda_max, extra, weight</span><br></pre></td></tr></table></figure>
<p>然而也有这种计算方式，有兴趣就看一下，<br>计算结果是一样的</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">cal_weights</span>(<span class="params">input_matrix</span>):</span><br><span class="line">	input_matrix = np.array(input_matrix)</span><br><span class="line">	n, n1 = input_matrix.shape</span><br><span class="line">	<span class="comment">#获取矩阵行，列</span></span><br><span class="line">	<span class="comment">##这一部分为判断矩阵是否符合上述的要求</span></span><br><span class="line">	<span class="keyword">assert</span> n == n1, <span class="string">&#x27;不是一个方阵&#x27;</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">		<span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">			<span class="keyword">if</span> np.<span class="built_in">abs</span>(input_matrix[i, j] * input_matrix[j, i] - <span class="number">1</span>) &gt; <span class="number">1e-7</span>:</span><br><span class="line">				<span class="keyword">raise</span> ValueError(<span class="string">&#x27;不是反互对称矩阵&#x27;</span>)</span><br><span class="line">	<span class="comment">##np.linalg.eig是获取矩阵的特征值和特征向量</span></span><br><span class="line">	eigenvalues, eigenvectors = np.linalg.eig(input_matrix)</span><br><span class="line">	<span class="comment">#获取到最大特征值的索引</span></span><br><span class="line">	max_idx = np.argmax(eigenvalues)</span><br><span class="line">	<span class="comment">#获取到最大特征值</span></span><br><span class="line">	max_eigen = eigenvalues[max_idx].real</span><br><span class="line">	eigen = eigenvectors[:, max_idx].real</span><br><span class="line">	<span class="comment">#获取特征值</span></span><br><span class="line">	eigen = eigen / eigen.<span class="built_in">sum</span>()</span><br><span class="line">	<span class="comment">#判断一致性</span></span><br><span class="line">	<span class="keyword">if</span> n &gt; <span class="number">9</span>:</span><br><span class="line">		CR = <span class="literal">None</span></span><br><span class="line">		warnings.warn(<span class="string">&#x27;无法判断一致性&#x27;</span>)</span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		CI = (max_eigen - n) / (n - <span class="number">1</span>)</span><br><span class="line">		CR = CI / RI[n]</span><br><span class="line">	<span class="keyword">return</span> max_eigen, CR, eigen</span><br><span class="line">	<span class="comment">#RI = (0, 0, 0.58, 0.9, 1.12, 1.24, 1.32, 1.41, 1.45, 1.49)</span></span><br><span class="line">	<span class="comment">#RI是一个判断常数，根据矩阵的维度变化，一般最大为10。</span></span><br><span class="line">	</span><br></pre></td></tr></table></figure>
<p>准则层通过函数调用得到结果如下<br><img src="/2023/10/12/%E3%80%90Pytohn-%E6%95%B0%E6%A8%A1%E3%80%91AHP%E5%B1%82%E6%AC%A1%E5%88%86%E6%9E%90%E6%B3%95/4.png" alt="1"></p>
<p>之后是目标层，目标层通过函数调用得到5对权重，<br>W1,W2,W3,W4,W5，对应五个因素在不同地方的得分<br>相应数值乘以对应因素权重再求和<br>就可以得到不同地方的总和得分，<br>用总和得分就可以得到最终方案的选择<br>文字有点绕，姑且写个函数出来。</p>
<figure class="highlight prolog"><table><tr><td class="code"><pre><span class="line">#目标层矩阵</span><br><span class="line">b1 = [[<span class="number">1</span>, <span class="number">1</span> / <span class="number">3</span>, <span class="number">1</span> / <span class="number">8</span>], [<span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span> / <span class="number">3</span>], [<span class="number">8</span>, <span class="number">3</span>, <span class="number">1</span>]]</span><br><span class="line">b2 = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>], [<span class="number">1</span> / <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>], [<span class="number">1</span> / <span class="number">5</span>, <span class="number">1</span> / <span class="number">2</span>, <span class="number">1</span>]]</span><br><span class="line">b3 = [[<span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>], [<span class="number">1</span> / <span class="number">3</span>, <span class="number">1</span> / <span class="number">3</span>, <span class="number">1</span>]]</span><br><span class="line">b4 = [[<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">1</span> / <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>], [<span class="number">1</span> / <span class="number">4</span>, <span class="number">1</span>, <span class="number">1</span>]]</span><br><span class="line">b5 = [[<span class="number">1</span>, <span class="number">4</span>, <span class="number">1</span> / <span class="number">2</span>], [<span class="number">1</span> / <span class="number">4</span>, <span class="number">1</span>, <span class="number">1</span> / <span class="number">4</span>], [<span class="number">2</span>, <span class="number">4</span>, <span class="number">1</span>]]</span><br><span class="line"></span><br><span class="line">def target_h(weight):</span><br><span class="line">    #获取目标层矩阵的权重</span><br><span class="line">    w1=ahp(b1)[<span class="number">2</span>];w2=ahp(b2)[<span class="number">2</span>];w3=ahp(b3)[<span class="number">2</span>];w4=ahp(b4)[<span class="number">2</span>];w5=ahp(b5)[<span class="number">2</span>];</span><br><span class="line">    s_li=[]</span><br><span class="line">    for i in range(len(w1)):</span><br><span class="line">        #for 循环<span class="number">3</span>次</span><br><span class="line">        t1=w1[i];t2=w2[i];t3=w3[i];t4=w4[i];t5=w5[i];</span><br><span class="line">        #乘以权重</span><br><span class="line">        s=t1*weight[<span class="number">0</span>]+t2*weight[<span class="number">1</span>]+t3*weight[<span class="number">2</span>]+t4*weight[<span class="number">3</span>]+t5*weight[<span class="number">4</span>]</span><br><span class="line">        s_li.append(s)</span><br><span class="line">    return s_li</span><br><span class="line">print(<span class="string">&quot;目标层得分 %s&quot;</span> <span class="comment">%target_h(weight))</span></span><br><span class="line"></span><br><span class="line">#print结果</span><br><span class="line">#目标层得分 [<span class="number">0.3187820596698437</span>, <span class="number">0.2391959202186192</span>, <span class="number">0.44202202011153713</span>]</span><br><span class="line">#分别代表地方<span class="number">1</span>，地方<span class="number">2</span>，地方<span class="number">3</span>三处的评分，可以得出地方<span class="number">3</span>的评分最高，</span><br><span class="line">#因此最优选择为地方<span class="number">3</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>三、附加<br>结果着色，让结果看起来更好看一点。<br>这里也可以采用雷达图的方式<br>稍微修改一下函数</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">def target_h1(weight):</span><br><span class="line">    #获取目标层矩阵的权重</span><br><span class="line">    <span class="attribute">w1</span>=ahp(b1)[2];<span class="attribute">w2</span>=ahp(b2)[2];<span class="attribute">w3</span>=ahp(b3)[2];<span class="attribute">w4</span>=ahp(b4)[2];<span class="attribute">w5</span>=ahp(b5)[2];</span><br><span class="line">    s_li=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(w1)):</span><br><span class="line">        t_li=[]</span><br><span class="line">        #<span class="keyword">for</span> 循环3次</span><br><span class="line">        <span class="attribute">t1</span>=w1[i];<span class="attribute">t2</span>=w2[i];<span class="attribute">t3</span>=w3[i];<span class="attribute">t4</span>=w4[i];<span class="attribute">t5</span>=w5[i];</span><br><span class="line">        #乘以权重</span><br><span class="line">        <span class="attribute">s1</span>=t1*weight[0];<span class="attribute">s2</span>=t2*weight[1];<span class="attribute">s3</span>=t3*weight[2];<span class="attribute">s4</span>=t4*weight[3];<span class="attribute">s5</span>=t5*weight[4]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> [s1, s2, s3, s4, s5]:</span><br><span class="line">            t_li.append(i );</span><br><span class="line">			#把每个地方的每个因素的得分给分出来</span><br><span class="line">        <span class="attribute">s</span>=s1+s2+s3+s4+s5</span><br><span class="line">		#将总得分添加到里面</span><br><span class="line">        t_li.append(s);s_li.append(t_li);</span><br><span class="line">    return s_li</span><br></pre></td></tr></table></figure>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line"><span class="attribute">t_l1</span>=target_h1(weight)</span><br><span class="line">df= pd.DataFrame(</span><br><span class="line">    t_l1[0:],</span><br><span class="line">    columns=[<span class="string">&quot;景色&quot;</span>,<span class="string">&quot;费用&quot;</span>,<span class="string">&quot;居住&quot;</span>,<span class="string">&quot;饮食&quot;</span>,<span class="string">&quot;旅途&quot;</span>,<span class="string">&quot;总得分&quot;</span>],</span><br><span class="line">    index=[<span class="string">&#x27;地方&#x27;</span> + i <span class="keyword">for</span> i <span class="keyword">in</span> list(<span class="string">&#x27;ABC&#x27;</span>) ]</span><br><span class="line">)</span><br><span class="line"><span class="attribute">path</span>=<span class="string">&quot;AHP分析.xlsx&quot;</span></span><br><span class="line">with pd.ExcelWriter(path) as writer:</span><br><span class="line">    df.to_excel(writer, <span class="attribute">sheet_name</span>=<span class="string">&quot;AHP分析&quot;</span>, <span class="attribute">index</span>=<span class="literal">True</span>)</span><br><span class="line">resultpic1(<span class="attribute">data</span>=df,</span><br><span class="line">           <span class="attribute">path</span>=path)</span><br><span class="line"><span class="comment">#resultpic1是雷达图生成函数，这个地方在上文用过，可以回头看看</span></span><br></pre></td></tr></table></figure>
<p>最终结果如下图<br><img src="/2023/10/12/%E3%80%90Pytohn-%E6%95%B0%E6%A8%A1%E3%80%91AHP%E5%B1%82%E6%AC%A1%E5%88%86%E6%9E%90%E6%B3%95/5.png" alt="1"><br>可能由于数据是随机填的，得到的结果比较离谱<br>完结<br><img src="/2023/10/12/%E3%80%90Pytohn-%E6%95%B0%E6%A8%A1%E3%80%91AHP%E5%B1%82%E6%AC%A1%E5%88%86%E6%9E%90%E6%B3%95/1010D_48_1.jpg" alt="2"></p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
  </entry>
  <entry>
    <title>【Python/数模】topsis综合评价</title>
    <url>/2023/10/11/%E3%80%90Python-%E6%95%B0%E6%A8%A1%E3%80%91topsis%E7%BB%BC%E5%90%88%E8%AF%84%E4%BB%B7/</url>
    <content><![CDATA[<p>一、前言<br>二维数据分析时往往会需要用到综合评价分析，其中TOPSIS就是一种<br>比较常用的分析方法<br>TOPSIS全名（Technique for Order Preference by Similarity to Ideal Solution）<br>逼近理想解排序法，理想解一般认为是数据（每列）中最优的数值，topsis主要将<br>数值标准化，通过计算与理想解的距离，得出综合评价，取得排名</p>
<span id="more"></span>

<p>二、正文<br>废话不多说，直接上代码<br>TOPSIS主函数如下</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">def topsis(data, weight):</span><br><span class="line">    data <span class="operator">=</span> data <span class="operator">/</span> np.<span class="built_in">sqrt</span>((data <span class="operator">*</span><span class="operator">*</span> <span class="number">2</span>).<span class="built_in">sum</span>()) </span><br><span class="line">	#将所有数据标准化，每个数据除以每行数据的平方和</span><br><span class="line">    Z <span class="operator">=</span> pd.DataFrame([data.<span class="built_in">min</span>(), data.<span class="built_in">max</span>()], index<span class="operator">=</span>[<span class="string">&#x27;负理想解&#x27;</span>, <span class="string">&#x27;正理想解&#x27;</span>]) </span><br><span class="line">	#最优和最劣为正负理想解</span><br><span class="line">    weight <span class="operator">=</span> np.array(weight)</span><br><span class="line">    <span class="keyword">Result</span> <span class="operator">=</span> data.copy()</span><br><span class="line">    <span class="keyword">Result</span>[<span class="string">&#x27;正理想解&#x27;</span>] <span class="operator">=</span> np.<span class="built_in">sqrt</span>(((data <span class="operator">-</span> Z.loc[<span class="string">&#x27;正理想解&#x27;</span>]) <span class="operator">*</span><span class="operator">*</span> <span class="number">2</span> <span class="operator">*</span> weight).<span class="built_in">sum</span>(axis<span class="operator">=</span><span class="number">1</span>)) </span><br><span class="line">	#计算整行与正理想解的距离的总和乘以权重</span><br><span class="line">    <span class="keyword">Result</span>[<span class="string">&#x27;负理想解&#x27;</span>] <span class="operator">=</span> np.<span class="built_in">sqrt</span>(((data <span class="operator">-</span> Z.loc[<span class="string">&#x27;负理想解&#x27;</span>]) <span class="operator">*</span><span class="operator">*</span> <span class="number">2</span> <span class="operator">*</span> weight).<span class="built_in">sum</span>(axis<span class="operator">=</span><span class="number">1</span>))</span><br><span class="line">	#计算整行与负理想解的距离的总和乘以权重</span><br><span class="line">    <span class="keyword">Result</span>[<span class="string">&#x27;综合得分指数&#x27;</span>] <span class="operator">=</span> <span class="keyword">Result</span>[<span class="string">&#x27;负理想解&#x27;</span>] <span class="operator">/</span> (<span class="keyword">Result</span>[<span class="string">&#x27;负理想解&#x27;</span>] <span class="operator">+</span> <span class="keyword">Result</span>[<span class="string">&#x27;正理想解&#x27;</span>])</span><br><span class="line">	#得出综合得分</span><br><span class="line">    <span class="keyword">Result</span>[<span class="string">&#x27;排序&#x27;</span>] <span class="operator">=</span> Result.<span class="built_in">rank</span>(ascending<span class="operator">=</span><span class="literal">False</span>)[<span class="string">&#x27;综合得分指数&#x27;</span>] </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">Result</span>, Z, weight</span><br></pre></td></tr></table></figure>

<p>大概数据要长这样,每行是一个地方的各项指标，由于无法通过这堆数据，<br>直接获得到哪个地方更好，因此需要通过topsis进行综合评价</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">data = pd<span class="selector-class">.DataFrame</span>(</span><br><span class="line">        &#123;<span class="string">&#x27;旅游增量&#x27;</span>: <span class="selector-attr">[5,2,3,3,6]</span>,</span><br><span class="line">		 <span class="string">&#x27;经济增量&#x27;</span>: <span class="selector-attr">[1,4,6,2,5]</span>,</span><br><span class="line">		 <span class="string">&#x27;旅客评价&#x27;</span>: <span class="selector-attr">[5,1,4,6,7]</span>,</span><br><span class="line">         <span class="string">&#x27;政府投资&#x27;</span>: <span class="selector-attr">[5,7,1,5,6]</span>,</span><br><span class="line">		 <span class="string">&#x27;其他扶持&#x27;</span>: <span class="selector-attr">[6,5,7,2,1]</span>&#125;,</span><br><span class="line">	index=<span class="selector-attr">[<span class="string">&#x27;地方&#x27;</span> + i for i in list(<span class="string">&#x27;ABCDE&#x27;</span>)]</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>之后是权重设置，假设Weight平分那么应该是</p>
<figure class="highlight fortran"><table><tr><td class="code"><pre><span class="line">Result=topsis(<span class="keyword">data</span>=<span class="keyword">data</span>,</span><br><span class="line">	weight=[<span class="number">1</span>/<span class="built_in">int</span>(len(<span class="keyword">data</span>.columns))]*<span class="built_in">int</span>(len(<span class="keyword">data</span>.columns))</span><br><span class="line">	)</span><br></pre></td></tr></table></figure>
<p>其实权重分析也是一项重要的数据分析，这个地方就不多介绍了<br>得到了数据就是输出了</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">def output(data,path,weight):</span><br><span class="line">	<span class="keyword">if</span>(os.path.isfile(path)):</span><br><span class="line">		os.<span class="built_in">remove</span>(path)</span><br><span class="line">	<span class="attribute">out1</span>=textput(data=data,</span><br><span class="line">			<span class="attribute">weight</span>=weight,</span><br><span class="line">			<span class="attribute">name</span>=<span class="string">&quot;自定义权重&quot;</span>)</span><br><span class="line">	with pd.ExcelWriter(path) as writer:</span><br><span class="line">		data.to_excel(writer, <span class="attribute">sheet_name</span>=<span class="string">&quot;原始数据&quot;</span>, <span class="attribute">index</span>=<span class="literal">True</span>)</span><br><span class="line">		out1.to_excel(writer, <span class="attribute">sheet_name</span>=<span class="string">&quot;自定义权重&quot;</span>, <span class="attribute">index</span>=<span class="literal">True</span>)</span><br><span class="line">		</span><br><span class="line">def textput(data,weight,name):</span><br><span class="line">	out = topsis(data, weight)[0]</span><br><span class="line">	weight = list(weight)</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(len(out.columns) - len(weight)):</span><br><span class="line">		weight.append(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">	out.loc[name] = weight </span><br><span class="line">	#加一行weight数据</span><br><span class="line">	return out</span><br><span class="line">output(data,</span><br><span class="line">	   <span class="attribute">path</span>=<span class="string">&#x27;Topsis评价.xlsx&#x27;</span>,</span><br><span class="line">	   weight=[0.2, 0.3, 0.3, 0.1,0.1]) #权重设置</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2023/10/11/%E3%80%90Python-%E6%95%B0%E6%A8%A1%E3%80%91topsis%E7%BB%BC%E5%90%88%E8%AF%84%E4%BB%B7/top1.png" alt="1"><br>输出结果如上</p>
<p>三、然而这样看得比较空，<br>所以可以加上一个分析图，雷达图比较适合<br>雷达图的绘制比较复杂，代码如下</p>
<figure class="highlight maxima"><table><tr><td class="code"><pre><span class="line">def picput(choice,data,name,weight):</span><br><span class="line">	leng = len(data.<span class="built_in">columns</span>)</span><br><span class="line">	<span class="keyword">if</span> choice != &#x27;A&#x27;:</span><br><span class="line">		# choice用来判断是否为原始数据</span><br><span class="line">		result = topsis(data,weight)[<span class="number">0</span>]</span><br><span class="line">		list1 = list(<span class="built_in">range</span>(leng))</span><br><span class="line">		list1.<span class="built_in">append</span>(leng + <span class="number">2</span>)</span><br><span class="line">		</span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		result=data</span><br><span class="line">		list1 = list(<span class="built_in">range</span>(leng))</span><br><span class="line">	<span class="built_in">labels</span> = result.<span class="built_in">columns</span>[list1]</span><br><span class="line">	#设置<span class="built_in">label</span>元素</span><br><span class="line">	<span class="built_in">length</span> = len(<span class="built_in">labels</span>)</span><br><span class="line">	#angle角元素</span><br><span class="line">	angles = <span class="built_in">np</span>.linspace(<span class="number">0</span>, <span class="number">2</span> * <span class="built_in">np</span>.pi, <span class="built_in">length</span>, endpoint=False)</span><br><span class="line">	angles = <span class="built_in">np</span>.concatenate((angles, [angles[<span class="number">0</span>]]))</span><br><span class="line">	<span class="built_in">labels</span> = <span class="built_in">np</span>.concatenate((<span class="built_in">labels</span>, [<span class="built_in">labels</span>[<span class="number">0</span>]]))</span><br><span class="line">	fig = plt.figure()</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(len(list(result.index))):</span><br><span class="line">		temp = result.iloc[i, list1]</span><br><span class="line">		temp = <span class="built_in">np</span>.concatenate((temp, [temp[<span class="number">0</span>]]))</span><br><span class="line">		#设置数据</span><br><span class="line">		plt.<span class="built_in">polar</span>(angles, temp, <span class="built_in">label</span>=result.index[i])</span><br><span class="line">	plt.thetagrids(angles * <span class="number">180</span> / <span class="built_in">np</span>.pi, <span class="built_in">labels</span>)</span><br><span class="line">	plt.<span class="built_in">legend</span>(bbox_to_anchor=(<span class="number">1.2</span>, <span class="number">1</span>))</span><br><span class="line">	plt.<span class="built_in">title</span>(name, y=<span class="number">1.2</span>)</span><br><span class="line">	<span class="built_in">return</span> fig</span><br></pre></td></tr></table></figure>
<p>return回图形后，再写一个图形导出函数，<br>将图形导出到excel里</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">def resultpic1(data,path,weight):</span><br><span class="line">	<span class="attribute">fig0</span>=picput(choice=&#x27;A&#x27;,</span><br><span class="line">				<span class="attribute">data</span>=data,</span><br><span class="line">				<span class="attribute">name</span>=<span class="string">&quot;原始数据&quot;</span>,</span><br><span class="line">				<span class="attribute">weight</span>=None,</span><br><span class="line">				)</span><br><span class="line">	fig1 = picput(<span class="attribute">choice</span>=<span class="string">&#x27;B&#x27;</span>,</span><br><span class="line">				  <span class="attribute">data</span>=data,</span><br><span class="line">				  <span class="attribute">name</span>=<span class="string">&quot;自定义权重Topsis评价&quot;</span>,</span><br><span class="line">				  <span class="attribute">weight</span>=weight,</span><br><span class="line">				  )</span><br><span class="line">	app = xw.App(<span class="attribute">visible</span>=<span class="literal">False</span>)</span><br><span class="line">	wb = app.books.open(path)</span><br><span class="line">	ws0 = wb.sheets[0]</span><br><span class="line">	ws1 = wb.sheets[1]</span><br><span class="line">	ws0.pictures.<span class="built_in">add</span>(fig0,</span><br><span class="line">					 <span class="attribute">left</span>=ws0.range(&#x27;K7&#x27;).left</span><br><span class="line">					 )</span><br><span class="line">	ws1.pictures.<span class="built_in">add</span>(fig1,</span><br><span class="line">					 <span class="attribute">left</span>=ws1.range(&#x27;K7&#x27;).left</span><br><span class="line">					 )</span><br><span class="line">	wb.save(path)</span><br><span class="line">	wb.close()</span><br><span class="line">	app.quit()</span><br></pre></td></tr></table></figure>
<p><img src="/2023/10/11/%E3%80%90Python-%E6%95%B0%E6%A8%A1%E3%80%91topsis%E7%BB%BC%E5%90%88%E8%AF%84%E4%BB%B7/top2.png" alt="1"><br>~~完结<br><img src="/2023/10/11/%E3%80%90Python-%E6%95%B0%E6%A8%A1%E3%80%91topsis%E7%BB%BC%E5%90%88%E8%AF%84%E4%BB%B7/1010D_173_1.jpg" alt="1"></p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
  </entry>
  <entry>
    <title>word测试</title>
    <url>/2023/10/11/word%E6%B5%8B%E8%AF%95/</url>
    <content><![CDATA[<p>—占位—<br>本文提供了一个ppt预览和下载功能<br>—占位—</p>
<span id="more"></span>
<p><a target="_blank" href="/word/物流小组作业（新调度优化）.docx" download="物流小组作业（新调度优化）.docx">物流小组作业（新调度优化）.docx</a></p>
]]></content>
      <categories>
        <category>测试</category>
      </categories>
  </entry>
  <entry>
    <title>【Python】Pyquery 一个Python的CSS选择器</title>
    <url>/2023/10/10/%E3%80%90Python%E3%80%91Pyquery/</url>
    <content><![CDATA[<p>一、前言<br>JS可以通过CSS选择器快速定位元素，但前端的限制较多（如跨域传输）<br>并且油猴必须要手动驱动浏览器才可以运行，无法形成自动脚本。<br>Python中也有类似JS的CSS选择器的第三方库，我选择的是Pyquery，<br>Pyquery的语法跟JS的写法十分相似，而且用起来很简单。<br><a href="/2023/09/27/%E7%94%A8JS%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%88%B6%E4%BD%9C%E7%9A%84%E7%AE%80%E6%98%93%E7%88%AC%E8%99%AB/">用JS（前端）制作的简易爬虫</a><br><a href="/2023/09/28/jQuery%E7%9A%84css%E9%80%89%E6%8B%A9%E5%99%A8%E7%9A%84%E5%86%99%E6%B3%95/">jQuery的css选择器的写法</a><br>如何爬取网页下来请看这篇<br><a href="/2023/09/28/%E7%94%A8selenum%E5%88%B6%E4%BD%9C%E5%89%8D%E7%AB%AF%E5%BC%8F%E7%88%AC%E8%99%AB/">用selenum制作前端式爬虫</a></p>
<span id="more"></span>
<p><img src="/2023/10/10/%E3%80%90Python%E3%80%91Pyquery/1010D_117_1.jpg" alt="1"><br>二、正文<br>1、老操作<br>先安装Pyquery库，pip install或者pycharm安装</p>
<figure class="highlight capnproto"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pyquery <span class="keyword">import</span> PyQuery <span class="keyword">as</span> pq</span><br></pre></td></tr></table></figure>
<p>安装后import<br>2.初步处理操作<br>假设爬下的网页资源为</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">browser_get</span>=driver.page_source</span><br></pre></td></tr></table></figure>
<p>browser_get得到的是整个网页的资源<br>获取后需要pyquery处理,</p>
<figure class="highlight perl"><table><tr><td class="code"><pre><span class="line">pq1=p<span class="string">q(browser_get)</span></span><br></pre></td></tr></table></figure>

<p>3.定位元素<br>pyquery写法基本跟jquery一毛一样，其实完全就可以当作是<br>python里的jquery（认真的）<br>pyquery提供了find函数，可以这么使用</p>
<figure class="highlight sqf"><table><tr><td class="code"><pre><span class="line"><span class="built_in">items</span>=pq1.<span class="built_in">find</span>(<span class="string">&quot;CSS选择器&quot;</span>).<span class="built_in">items</span>()</span><br><span class="line">#.<span class="built_in">items</span>()会获取所有html</span><br></pre></td></tr></table></figure>
<p>然而也可以直接这么写</p>
<figure class="highlight abnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">items</span><span class="operator">=</span>pq1(<span class="string">&quot;CSS选择器&quot;</span>).items()</span><br></pre></td></tr></table></figure>
<p>文本则是</p>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">.<span class="built_in">text</span>()</span><br></pre></td></tr></table></figure>
<p>属性</p>
<figure class="highlight q"><table><tr><td class="code"><pre><span class="line">.<span class="built_in">attr</span>(<span class="string">&quot;属性名&quot;</span>)</span><br><span class="line">.<span class="built_in">attr</span>(<span class="string">&quot;src&quot;</span>)  #img的链接</span><br><span class="line">.<span class="built_in">attr</span>(<span class="string">&quot;href&quot;</span>) #a的链接</span><br></pre></td></tr></table></figure>
<p>如果要获取子节点<br>或者父节点那就</p>
<figure class="highlight asciidoc"><table><tr><td class="code"><pre><span class="line"><span class="title">.children()</span></span><br><span class="line"><span class="title">.parents()</span></span><br></pre></td></tr></table></figure>
<p>4.处理多个元素<br>pyquery提供了for循环的方式,如</p>
<figure class="highlight clean"><table><tr><td class="code"><pre><span class="line">for i <span class="keyword">in</span> pq1(<span class="string">&quot;li&quot;</span>).items()：</span><br><span class="line">	## 处理操作</span><br></pre></td></tr></table></figure>
<p>利用for循环就可以逐一迭代</p>
<p>5.完结<br><img src="/2023/10/10/%E3%80%90Python%E3%80%91Pyquery/1010D_56_1.jpg" alt="1"></p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
  </entry>
  <entry>
    <title>【搬运】html游戏 贪吃蛇</title>
    <url>/2023/10/09/%E3%80%90%E6%90%AC%E8%BF%90%E3%80%91html%E6%B8%B8%E6%88%8F-%E8%B4%AA%E5%90%83%E8%9B%87/</url>
    <content><![CDATA[<p>请使用电脑进入，游戏画面需要刷新页面<br>—占位—<br>如题<br>本文为搬运的html游戏<br>—占位—</p>
<span id="more"></span>
<canvas id="tanchishe_Canvas" width="400" height="400" >
</canvas>
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js">
</script>
<script type="text/javascript" src="/js/tanchishe_js.js">
</script>
<style>
    #tanchishe_Canvas{	
            background-color:white;
            z-index:1;
            border:5px solid;
            border-color:black;
        }
</style>]]></content>
      <categories>
        <category>HTML游戏</category>
      </categories>
  </entry>
  <entry>
    <title>【搬运】HTML5游戏 糖豆人</title>
    <url>/2023/10/08/%E7%B3%96%E8%B1%86%E4%BA%BA%E6%B5%8B%E8%AF%95/</url>
    <content><![CDATA[<p>请使用电脑进入，游戏画面需要刷新页面<br><a href="https://github.com/mumuy/pacman">搬运Pacman 吃豆游戏</a><br>—占位—</p>
<p>—占位—</p>
<span id="more"></span>
<link rel="shortcut icon" href="/image/favicon.png">
<style>
    .mod-game .info{
        padding: 10px 0;
        margin-bottom: 5px;
        line-height: 20px;
        text-align: center;
        color: #666;
    }
    .mod-game .info p{
        line-height: 20px;
        font-size: 14px;
        color: #666;
    }
    .mod-game .intro{
        padding: 10px 15px;
        background: #f8f8f8;
        border-radius: 5px;
    }
    .mod-game .intro p{
        line-height: 22px;
        text-indent: 2em;
        font-size: 14px;
        color: #666;
    }
    .mod-button{
        height: 32px;
        padding: 15px 0;
        text-align: center;
    }
    .mod-button span,.mod-button a{
        vertical-align: middle;
    }
    .mod-button .btn{
        display: inline-block;
        padding: 0 12px;
        line-height: 26px;
        color: #24292f;
        border: 1px solid #dddede;
        text-decoration: none;
        font-size: 13px;
        color: #24292f;
        border-radius: 2px;
    }
</style>
<div class="wrapper">
    <div class="mod-game">
        <canvas id="pacman_canvas" width="960" height="640">不支持画布</canvas>
        <div class="info">
            <p>按 [空格键] 暂停或继续</p>
        </div>	
    </div>
</div>
<script src="/js/pacman_game.js"></script>
<script src="/js/pacman_index.js"></script>
<script async defer src="https://buttons.github.io/buttons.js"></script>


]]></content>
      <categories>
        <category>HTML游戏</category>
      </categories>
  </entry>
  <entry>
    <title>ppt测试</title>
    <url>/2023/10/08/ppt%E6%B5%8B%E8%AF%95/</url>
    <content><![CDATA[<p>—占位—<br>本文提供了一个ppt预览和下载功能<br>—占位—</p>
<span id="more"></span>
<p><img src="https://suxingchahui.fun/2023/10/04/%E9%A2%9C%E8%89%BA%E5%A4%A7%E8%B5%8F2/asa51.png" alt="1"></p>
<iframe src="/pdf/汇报.pdf" style="width:800px; height:500px;" frameborder="0"></iframe>

<p><a target="_blank" href="/pdf/汇报.pdf" download="汇报.pdf">汇报.pdf</a></p>

<p><a target="_blank" href="/pdf/汇报.pptx" download="汇报.pptx">汇报.pptx</a></p>

]]></content>
      <categories>
        <category>测试</category>
      </categories>
  </entry>
  <entry>
    <title>【Python/脚本】一个懒得自己打字的md图片插入脚本</title>
    <url>/2023/10/05/%E3%80%90Python-%E8%84%9A%E6%9C%AC%E3%80%91%E4%B8%80%E4%B8%AA%E6%87%92%E5%BE%97%E8%87%AA%E5%B7%B1%E6%89%93%E5%AD%97%E7%9A%84md%E5%9B%BE%E7%89%87%E6%8F%92%E5%85%A5%E8%84%9A%E6%9C%AC/</url>
    <content><![CDATA[<p>Markdown也就是md文件<br>Markdown文件插入可以遵循html的标签方式，但<br>这种插入方式比较麻烦，可以用md自己的格式</p>
<span id="more"></span>
<p>1.md图片插入格式</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line">!<span class="selector-attr">[若图片not Found显示的文字]</span>(路径)</span><br></pre></td></tr></table></figure>
<p>一般可以这么写，&#x2F;image自动索引到资源文件</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">![<span class="number">28.</span>webp](<span class="regexp">/image/</span><span class="number">28.</span>webp)</span><br></pre></td></tr></table></figure>
<p><img src="/2023/10/05/%E3%80%90Python-%E8%84%9A%E6%9C%AC%E3%80%91%E4%B8%80%E4%B8%AA%E6%87%92%E5%BE%97%E8%87%AA%E5%B7%B1%E6%89%93%E5%AD%97%E7%9A%84md%E5%9B%BE%E7%89%87%E6%8F%92%E5%85%A5%E8%84%9A%E6%9C%AC/1005D_140_1.jpg" alt="1005D_140_1.jpg"></p>
<!--more-->
<p>2.代码十分简单，不到一分钟写完了</p>
<figure class="highlight dust"><table><tr><td class="code"><pre><span class="line"><span class="language-xml">import os</span></span><br><span class="line"><span class="language-xml">filePath = &#x27;D:\\Blog\\Blog1\\source\\_posts\\【图集】10-3图图&#x27;</span></span><br><span class="line"><span class="language-xml">n=0</span></span><br><span class="line"><span class="language-xml">for i,j,k in os.walk(filePath):</span></span><br><span class="line"><span class="language-xml">    for i in k:</span></span><br><span class="line"><span class="language-xml">        n+=1</span></span><br><span class="line"><span class="language-xml">        print(&quot;![</span><span class="template-variable">&#123;&#125;</span><span class="language-xml">](/image/</span><span class="template-variable">&#123;&#125;</span><span class="language-xml">)&quot;.format(i, i)) #中间部分自己改</span></span><br><span class="line"><span class="language-xml">        if n==2:</span></span><br><span class="line"><span class="language-xml">            print(&quot;<span class="comment">&lt;!--more--&gt;</span>&quot;)</span></span><br></pre></td></tr></table></figure>

<p><code>&lt;!--more--&gt;</code><br>用来手动隐藏，图片占首页太长不好看</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>【整理/自用】整理一个即兴写的数据整理和导出脚本</title>
    <url>/2023/10/04/%E3%80%90%E6%95%B4%E7%90%86%E3%80%91%E6%95%B4%E7%90%86%E4%B8%80%E4%B8%AA%E5%8D%B3%E5%85%B4%E5%86%99%E7%9A%84%E6%95%B0%E6%8D%AE%E6%95%B4%E7%90%86%E5%92%8C%E5%AF%BC%E5%87%BA%E8%84%9A%E6%9C%AC/</url>
    <content><![CDATA[<p>1.前言<br>由于以前(一周前)写的一个脚本太过即兴，<br>原数据的长度过于冗长，导致脚本异常的乱，<del><em>想要去回看却完全看不懂了</em></del><br>该脚本主要是处理爬取后杂乱的数据，进行筛选，合并的过程<br>主要是一个整理处理过程的文章，会省略掉很多<br>没什么大用的部分或者简单的部分，处理函数十分<br>物尽其用，没有特别花哨的玩意<br>爬取对象为创业决策（决策天地）的决策结果数据</p>
<span id="more"></span>
<p><img src="/image/1002D_239_1.jpg" alt="1"><br>2.数据来源<br><a href="www.jctd.net">创业决策</a><br>主要是爬取模拟决策后的各项数据，竞争结果数据，<br>但结果是竞争结果的数据并不全，生产相关数据<br>需要在另一个爬取，所以应该分为两个部分。</p>
<p>3.结果数据</p>
<details>
<summary>
<p>
长数据警告(点我展开)
</p>
</summary>
<p>
[
    "  一般市场价格",
    "(元/台) ",
    "  广告费用投入",
    "(百万元) ",
    "  销售人员数量",
    "(人) ",
    "  销售人员费用",
    "(百万元) ",
    "  产品质量评价",
    "(1--5) ",
    "  研发投入效应",
    "(百万元) ",
    "  一般市场销售量",
    "(台) ",
    "  一般市场销售额",
    "(百万元) ",
    "  理论市场占有率",
    "(%) ",
    "  实际市场占有率",
    "(%) ",
    "  附加市场 I 销售量",
    "(台) ",
    "  附加市场 I 销售额",
    "(百万元) ",
    "  附加市场II 销售量",
    "(台) ",
    "  附加市场II 销售额",
    "(百万元) ",
    "  中标企业",
    "(打***号企业) ",
    "  中标企业投标价格",
    "(台/元) ",
    "  原材料库存量",
    "(台) ",
    "  附件库存量",
    "(台) ",
    "  产品累积库存数量",
    "(台) ",
    "  机器人数量",
    "(个) ",
    "  研究人员数",
    "(个) ",
    "  一般市场计划量",
    "(台) ",
    "  一般市场生产量",
    "(台) ",
    "  维修保养系数",
    "(0--1) ",
    "  合理化系数",
    "(0--1) ",
    "  生产线生产能力",
    "(台/周期) ",
    "  生产人员数",
    "(个) ",
    "  生产线负载率",
    "(%) ",
    "  生产人员负载率",
    "(%) ",
    "  一般市场的产品成本",
    "(元) ",
    "  税前经营成果",
    "(百万元) ",
    "  本周期亏损结转",
    "(百万元) ",
    "  本周期股息支付",
    "(百万元) ",
    "  本周期利润储备",
    "(百万元) ",
    "  本周期中期贷款",
    "(百万元) ",
    "  本周期期末现金",
    "(百万元) ",
    "  总的利润储备额",
    "(百万元) ",
    "  本周期透支贷款",
    "(百万元) ",
    "  资产负债总和",
    "(百万元) ",
    "",
    "",
    "",
    "",
    ""
]
</p>
</details>

<details>
<summary>
<p>
长数据警告(点我展开)
</p>
</summary>
<p>
[
    "各企业市场营销及生产研究报告",
    "(第5周期)",
    "1 to 5       ",
    "6 to 10       ",
    "11 to 15       ",
    "16 to 20       ",
    "21 to 25       ",
    "项目/企业",
    "618",
    "700",
    "642",
    "1150",
    "705",
    "3.5",
    "2",
    "3",
    "1",
    "2.61",
    "88",
    "57",
    "100",
    "40",
    "65",
    "3.36",
    "2.18",
    "3.82",
    "1.53",
    "2.48",
    "1",
    "3",
    "2",
    "3",
    "2",
    ".",
    "",
    "首页     创业导航     创业原理     使用手册     创业流程     决策仿真     教学大纲",
    "本网站系统版权属东华大学旭日工商管理学院信息管理研究所宋福根教授所有，未经授权许可，不得转载或建立镜像",
    "Copyright@2019 上海宏飞科技发展有限公司；沪ICP备2023000744号-1；公安备3101052004737号；电话13916008968",
    "",
    "",
    "",
    "",
    "",
    "2.11",
    "1.03",
    "0.96",
    "0.82",
    "1.43",
    "71474",
    "44043",
    "63957",
    "6187",
    "48072",
    "44.17",
    "30.83",
    "41.06",
    "7.11",
    "33.89",
    "5.3",
    "3.7",
    "5",
    "0.8",
    "4.1",
    "5.6",
    "3.9",
    "5.2",
    "0.9",
    "4.3",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "3200",
    "3200",
    "3200",
    "2000",
    "3200",
    "2.17",
    "2.17",
    "2.17",
    "1.36",
    "2.17",
    "-",
    "-",
    "-",
    "-",
    "-",
    "0",
    "700",
    "0",
    "0",
    "684",
    "179",
    "774",
    "320",
    "0",
    "94629",
    "979",
    "4374",
    "3520",
    "0",
    "12839",
    "6106",
    "15308",
    "1781",
    "66933",
    "20514",
    "0",
    "0",
    "32",
    "0",
    "96",
    "8",
    "8",
    "14",
    "8",
    "18",
    "47000",
    "33682",
    "54447",
    "21600",
    "49715",
    "47000",
    "33682",
    "54447",
    "21600",
    "49715",
    "0.9",
    "0.9",
    "0.98",
    "0.9",
    "0.9",
    "1.25",
    "1.25",
    "1.3",
    "1",
    "1.3",
    "51187",
    "36562",
    "57967",
    "23400",
    "53235",
    "202",
    "140",
    "200",
    "94",
    "117",
    "98.7",
    "101.8",
    "100",
    "101.7",
    "100",
    "100",
    "106.3",
    "99.9",
    "101.3",
    "100",
    "719.19",
    "791.24",
    "646.89",
    "1013.34",
    "633.91",
    "-4.24",
    "-6.03",
    "0.28",
    "-9.48",
    "-0.61",
    "-4.24",
    "-6.03",
    "0",
    "-19.99",
    "-0.61",
    "0",
    "0",
    "0.17",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "5",
    "15",
    "0",
    "5",
    "39.44",
    "0.1",
    "7.27",
    "0.21",
    "0.1",
    "0.11",
    "5.28",
    "5.05",
    "8.57",
    "0.08",
    "1.1",
    "2.24",
    "0",
    "0",
    "38.97",
    "0",
    "33.29",
    "39.03",
    "33.75",
    "49.07",
    "64.93",
    "",
    "",
    "",
    "",
    ""
]
</p>
</details>


<p>上述为决策第一周期数据1和数据2<br>数据1中可以看到是项目名的部分，数据2则是对应数据。<br>所以，数据1爬一次够了。需要先对数据1进行数据清洗和筛选<br>下面就不隐藏了</p>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">def name(arr0):</span><br><span class="line">    arr01 = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,<span class="built_in">len</span>(arr0),<span class="number">2</span>): <span class="comment">#步长设为2，项目名和单位两两一对</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            name=arr0[i]+arr0[i+<span class="number">1</span>] <span class="comment">#把单位和名称合并</span></span><br><span class="line">        except:</span><br><span class="line">            name=<span class="string">&quot;&quot;</span></span><br><span class="line">        arr01.append(name) <span class="comment">#重新合并成一个列表</span></span><br><span class="line">    arr011=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> arr01:</span><br><span class="line">        <span class="keyword">a</span>=<span class="string">&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> e <span class="keyword">in</span> i:</span><br><span class="line">            <span class="keyword">if</span> e!=<span class="string">&quot; &quot;</span>: <span class="comment">#NBSP  #把空格给删掉</span></span><br><span class="line">                <span class="keyword">a</span>+=e</span><br><span class="line">        <span class="keyword">if</span> is_number(<span class="keyword">a</span>)==False <span class="keyword">and</span> <span class="keyword">a</span>!=<span class="string">&quot;&quot;</span>:  <span class="comment">#把无用部分去掉</span></span><br><span class="line">            arr011.append(<span class="keyword">a</span>)</span><br><span class="line">    <span class="literal">return</span> arr011</span><br></pre></td></tr></table></figure>
<p>因为如果回看之前的数据，爬取下来的数据2<br>跟本周期不同，所以写了两份</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line">def <span class="built_in">num</span>(arr1):</span><br><span class="line"></span><br><span class="line">    arr11=[]</span><br><span class="line">    for i in arr1:</span><br><span class="line">        if <span class="built_in">is_number</span>(i)==True or i==<span class="string">&quot;-&quot;</span> or i==<span class="string">&#x27;***&#x27;</span>:</span><br><span class="line">            a=i</span><br><span class="line">            arr11.<span class="built_in">append</span>(a)</span><br><span class="line">    arr12=[]</span><br><span class="line">    for e in <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(arr11),<span class="number">5</span>):</span><br><span class="line">        arr12.<span class="built_in">append</span>(arr11[e])</span><br><span class="line">    return arr12</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">num1</span>(<span class="params">arr1,n</span>):</span><br><span class="line"></span><br><span class="line">    arr11=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> arr1:</span><br><span class="line">        <span class="keyword">if</span> is_number(i)==<span class="literal">True</span> <span class="keyword">or</span> i==<span class="string">&quot;-&quot;</span> <span class="keyword">or</span> i==<span class="string">&#x27;***&#x27;</span>: <span class="comment">#中标部分数据，不以数字形式出现</span></span><br><span class="line">            a=i</span><br><span class="line">            arr11.append(a)</span><br><span class="line">    arr12=[]</span><br><span class="line">    <span class="keyword">for</span> e <span class="keyword">in</span> <span class="built_in">range</span>(n,<span class="built_in">len</span>(arr11),<span class="number">5</span>): <span class="comment">#步长为5，是因为存在5组的数据，n则代表所在组的列数</span></span><br><span class="line">        arr12.append(arr11[e])</span><br><span class="line">    <span class="keyword">return</span> arr12</span><br></pre></td></tr></table></figure>
<p>数据处理完后，就生产df数据，待生成excel表</p>
<p>3.以上是竞争结果的数据处理部分，下面是<br>生产数据的合并部分</p>
<details>
<summary>
<p>
长数据警告(点我展开)
</p>
</summary>
<p>
[
    " 市场报告",
    " ",
    " 价格       (元/台)",
    "1070",
    "0",
    "750",
    " 销售量        (台)",
    "19764",
    "0",
    "5000",
    " 销售额 (百万元)",
    "21.14",
    "0",
    "3.75",
    " 市场占有率 (%)",
    "      3",
    " 产品质量评价",
    "      3",
    " 仓库报告I：原材料",
    " ",
    " 期初库存",
    "0",
    "0",
    "0",
    "   +增  加",
    "90000",
    "30",
    "2.7",
    "   - 消  耗",
    "32382",
    "30",
    "0.97",
    " =期末库存",
    "57618",
    "30",
    "1.72",
    " 仓库报告II：一般产品",
    " ",
    " 期初库存",
    "0",
    "0",
    "0",
    "   +增  加",
    "27382",
    "521.99",
    "14.29",
    "   - 消  耗",
    "19764",
    "521.99",
    "10.31",
    " =期末库存",
    "7618",
    "521.99",
    "3.97",
    " 仓库报告III：附件",
    " ",
    " 期初库存",
    "0",
    "0",
    "0",
    "   +增  加",
    "90000",
    "70",
    "6.3",
    "   - 消  耗",
    "27382",
    "70",
    "1.91",
    " =期末库存",
    "62618",
    "70",
    "4.38",
    " 人员报告I",
    " ",
    " 期初人员",
    "0",
    "0",
    "   +招  聘",
    "128",
    "8",
    "   - 解  雇",
    "0",
    "0",
    "   - 流  动",
    "0",
    " =期末人员",
    "128",
    "8",
    " 人员报告II",
    " 销  售",
    "59",
    " 采  购",
    "5",
    " 管  理",
    "25",
    " 管理的合理化系数",
    "1",
    " 生产报告I",
    " ",
    " 前周期",
    "0",
    "0",
    "   +投  资",
    "5",
    "0",
    "   - 变  卖",
    "0",
    "---",
    " 本周期",
    "5",
    "0",
    " 生产报告II",
    " 一般产品",
    "27382",
    "27382",
    "109.5",
    " 特殊产品",
    "5000",
    "4500",
    "17.8",
    " 合    计",
    "32382",
    "31882",
    "128",
    " 负载率(%)",
    "---",
    "100",
    "99.6",
    " 生产报告III",
    " 生产线的合理化系数",
    "1.09",
    " 生产线维修保养系数",
    "0.9",
    " 生产线负载率100%时生产能力",
    "31882"
]
</p>
</details>

<p>大概长这样，<br>数据提取函数</p>
<figure class="highlight prolog"><table><tr><td class="code"><pre><span class="line">def produ(<span class="symbol">Arr11</span>):</span><br><span class="line">    n = <span class="number">0</span></span><br><span class="line">    <span class="symbol">List11</span> = []</span><br><span class="line">    <span class="symbol">List12</span> = []</span><br><span class="line">    for i in <span class="symbol">Arr11</span>:</span><br><span class="line">        if is_number(i) == <span class="symbol">False</span> and i != <span class="string">&quot;&quot;</span> and i != <span class="string">&quot;---&quot;</span>:</span><br><span class="line">            <span class="symbol">List11</span>.append(n)</span><br><span class="line">        elif is_number(i) == <span class="symbol">True</span> or i == <span class="string">&quot;&quot;</span> or i == <span class="string">&quot;---&quot;</span>:</span><br><span class="line">            <span class="symbol">List12</span>.append(n)</span><br><span class="line">        n += <span class="number">1</span></span><br><span class="line">    <span class="symbol">Arr12</span> = []</span><br><span class="line">    for i in range(<span class="number">0</span>, len(<span class="symbol">List11</span>)):</span><br><span class="line">        <span class="symbol">List</span> = []</span><br><span class="line">        for e in <span class="symbol">List12</span>:</span><br><span class="line">            try:</span><br><span class="line">                if <span class="symbol">List11</span>[i] &lt; e &lt; <span class="symbol">List11</span>[i + <span class="number">1</span>]:</span><br><span class="line">                    <span class="symbol">List</span>.append(e)</span><br><span class="line">            except:</span><br><span class="line">                <span class="symbol">List</span> = []</span><br><span class="line">                <span class="symbol">List</span>.append(e)</span><br><span class="line">        <span class="symbol">Arr12</span>.append(<span class="symbol">List</span>)  #上述均为数据清洗操作</span><br><span class="line">    gm = []</span><br><span class="line">    cb=[]</span><br><span class="line">    tz=[]</span><br><span class="line">    sc=[]</span><br><span class="line">    bm=[]</span><br><span class="line">    bc=[]</span><br><span class="line">    for i in range(len(<span class="symbol">Arr12</span>)):</span><br><span class="line">        name = <span class="symbol">Arr11</span>[<span class="symbol">List11</span>[i]] #取出需要的数据</span><br><span class="line"></span><br><span class="line">        if name == <span class="string">&quot;   +增  加&quot;</span>:</span><br><span class="line">            gm.append(<span class="symbol">Arr11</span>[<span class="symbol">Arr12</span>[i][<span class="number">0</span>]])</span><br><span class="line">        if name == <span class="string">&quot;   +增  加&quot;</span>:</span><br><span class="line">            cb.append(<span class="symbol">Arr11</span>[<span class="symbol">Arr12</span>[i][<span class="number">1</span>]])</span><br><span class="line">        if name == <span class="string">&quot;   +投  资&quot;</span>:</span><br><span class="line">            tz.append(<span class="symbol">Arr11</span>[<span class="symbol">Arr12</span>[i][<span class="number">0</span>]])</span><br><span class="line">        if name == <span class="string">&quot; 前周期&quot;</span>:</span><br><span class="line">            sc.append(<span class="symbol">Arr11</span>[<span class="symbol">Arr12</span>[i][<span class="number">0</span>]])</span><br><span class="line">        if name == <span class="string">&quot;   - 变  卖&quot;</span>:</span><br><span class="line">            bm.append(<span class="symbol">Arr11</span>[<span class="symbol">Arr12</span>[i][<span class="number">0</span>]])</span><br><span class="line">        if name == <span class="string">&quot; 本周期&quot;</span>:</span><br><span class="line">            bc.append(<span class="symbol">Arr11</span>[<span class="symbol">Arr12</span>[i][<span class="number">0</span>]])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    for i in range(len(gm)):</span><br><span class="line">        if i == <span class="number">0</span>:</span><br><span class="line">            p31 = gm[i]</span><br><span class="line">        if i == <span class="number">2</span>:</span><br><span class="line">            p33 = gm[i]</span><br><span class="line">    for i in range(len(cb)):</span><br><span class="line">        if i == <span class="number">1</span>:</span><br><span class="line">            p11 = cb[i]</span><br><span class="line">    return p31,p33,p11,tz[<span class="number">0</span>],sc[<span class="number">0</span>] #return回需要的数据</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>添加函数，生产数据的合并</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">def clear0(df,L1,L2,L3,L4,L5):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(L1)):</span><br><span class="line">        L11 = []</span><br><span class="line">        e1,e2,e3,e4,<span class="attribute">e5</span>=L1[i],L2[i],L3[i],L4[i],L5[i]</span><br><span class="line">        L11.append(e1)</span><br><span class="line">        L11.append(e2)</span><br><span class="line">        L11.append(e3)</span><br><span class="line">        L11.append(e4)</span><br><span class="line">        L11.append(e5)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">i</span>==0: #dfinsert为df的插入函数，懒得写出来了，作用是插入在指定行的下方</span><br><span class="line">            df = dfinsert(df, <span class="string">&quot;原材料库存量(台)&quot;</span>, L11, <span class="string">&quot;原材料购买&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">i</span>==1:</span><br><span class="line">            df = dfinsert(df, <span class="string">&quot;附件库存量(台)&quot;</span>, L11, <span class="string">&quot;附件购买&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">i</span>==2:</span><br><span class="line">            df = dfinsert(df, <span class="string">&quot;一般市场的产品成本(元)&quot;</span>, L11, <span class="string">&quot;生产成本&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">i</span>==3:</span><br><span class="line">            df =dfinsert(df,<span class="string">&quot;生产线生产能力(台/周期)&quot;</span>,L11,<span class="string">&quot;生产线投资数&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">i</span>==4:</span><br><span class="line">            df = dfinsert(df, <span class="string">&quot;生产线投资数&quot;</span>, L11, <span class="string">&quot;上一周期生产线数量&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">i</span>==5:</span><br><span class="line">            df =dfinsert(df,<span class="string">&quot;生产线投资数&quot;</span>, L11, <span class="string">&quot;生产线变卖数&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">i</span>==6:</span><br><span class="line">            df =dfinsert(df,<span class="string">&quot;生产线投资数&quot;</span>, L11, <span class="string">&quot;本周期生产线数量&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    return df</span><br></pre></td></tr></table></figure>
<p>调用数据合并操作，要记得自己组的是在哪一个df，<br>生产数据只有自己的能够看到</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">df1</span>=clear0(df1,L1,L2,L3,L4,L5) <span class="comment">#选择在哪个组哪一列</span></span><br></pre></td></tr></table></figure>

<p>另一部分的数据插入，财务方面的数据，这一部分是<br>需要在原有数据进行计算然后插入，比较简单</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">def clear(df):</span><br><span class="line">    <span class="attribute">listt</span>=df.loc[<span class="string">&quot;本周期股息支付(百万元)&quot;</span>]</span><br><span class="line">    <span class="attribute">a</span>=0</span><br><span class="line">    listt1=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> listt:</span><br><span class="line">        a+=float(i)</span><br><span class="line">        listt1.append(a)</span><br><span class="line">    <span class="attribute">df</span>=dfinsert(df,&quot;本周期股息支付(百万元)&quot;,listt1,&quot;累计支付股息&quot;)</span><br><span class="line">    <span class="attribute">listt2</span>=df.loc[<span class="string">&quot;本周期利润储备(百万元)&quot;</span>]</span><br><span class="line"></span><br><span class="line">    l3,l4,l5,l6,l7=[],[],[],[],[]</span><br><span class="line">    <span class="attribute">n</span>=0</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> listt2:</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">n</span>==0:</span><br><span class="line">            l3.append(i)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">n</span>==1:</span><br><span class="line">            l4.append(i)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">n</span>==2:</span><br><span class="line">            l5.append(i)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">n</span>==3:</span><br><span class="line">            l6.append(i)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">n</span>==4:</span><br><span class="line">            l7.append(i)</span><br><span class="line">        n+=1</span><br><span class="line">    <span class="attribute">n</span>=0</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> listt:</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">n</span>==0:</span><br><span class="line">            l3.append(i)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">n</span>==1:</span><br><span class="line">            l4.append(i)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">n</span>==2:</span><br><span class="line">            l5.append(i)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">n</span>==3:</span><br><span class="line">            l6.append(i)</span><br><span class="line">        <span class="keyword">if</span> <span class="attribute">n</span>==4:</span><br><span class="line">            l7.append(i)</span><br><span class="line">        n+=1</span><br><span class="line">    listt3=[]</span><br><span class="line">    <span class="attribute">a</span>=0</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> l3:</span><br><span class="line">        a+=float(i) </span><br><span class="line">    listt3.append(a)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    a4 = 0</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> l4:</span><br><span class="line">        a4+=float(i)</span><br><span class="line">    listt3.append(a4)</span><br><span class="line">    a1 = 0</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> l5:</span><br><span class="line">        a1+=float(i)</span><br><span class="line">    listt3.append(a1)</span><br><span class="line">    <span class="attribute">a2</span>=0</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> l6:</span><br><span class="line">        a2+=float(i)</span><br><span class="line">    listt3.append(a2)</span><br><span class="line"></span><br><span class="line">    <span class="attribute">a3</span>=0</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> l7:</span><br><span class="line">        a3+=float(i)</span><br><span class="line">    listt3.append(a3)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="attribute">df</span>=dfinsert(df,&quot;税前经营成果(百万元)&quot;,listt3,&quot;税后利润&quot;)</span><br><span class="line">    return df</span><br></pre></td></tr></table></figure>

<figure class="highlight abnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">df</span><span class="operator">=</span>clear(df)</span><br><span class="line"><span class="attribute">df1</span><span class="operator">=</span>clear(df1)</span><br><span class="line"><span class="attribute">df2</span><span class="operator">=</span>clear(df2)</span><br><span class="line"><span class="attribute">df3</span><span class="operator">=</span>clear(df3)</span><br><span class="line"><span class="attribute">df4</span><span class="operator">=</span>clear(df4)</span><br></pre></td></tr></table></figure>
<p>执行完就全部打出excel表就好了，不过要记得sheetname</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">path=<span class="string">&quot;jc2.xlsx&quot;</span></span><br><span class="line"><span class="keyword">with</span> pd.<span class="constructor">ExcelWriter(<span class="params">path</span>, <span class="params">engine</span>=&#x27;<span class="params">openpyxl</span>&#x27;, <span class="params">mode</span>=&#x27;<span class="params">w</span>&#x27;)</span> <span class="keyword">as</span> writer:</span><br><span class="line">    df.<span class="keyword">to</span><span class="constructor">_excel(<span class="params">writer</span>, <span class="params">sheet_name</span>=<span class="string">&quot;21&quot;</span>, <span class="params">index</span>=True)</span></span><br><span class="line">    df1.<span class="keyword">to</span><span class="constructor">_excel(<span class="params">writer</span>, <span class="params">sheet_name</span>=<span class="string">&quot;22&quot;</span>, <span class="params">index</span>=True)</span></span><br><span class="line">    df2.<span class="keyword">to</span><span class="constructor">_excel(<span class="params">writer</span>, <span class="params">sheet_name</span>=<span class="string">&quot;23&quot;</span>, <span class="params">index</span>=True)</span></span><br><span class="line">    df3.<span class="keyword">to</span><span class="constructor">_excel(<span class="params">writer</span>, <span class="params">sheet_name</span>=<span class="string">&quot;24&quot;</span>, <span class="params">index</span>=True)</span></span><br><span class="line">    df4.<span class="keyword">to</span><span class="constructor">_excel(<span class="params">writer</span>, <span class="params">sheet_name</span>=<span class="string">&quot;25&quot;</span>, <span class="params">index</span>=True)</span></span><br></pre></td></tr></table></figure>

<p><img src="/2023/10/04/%E3%80%90%E6%95%B4%E7%90%86%E3%80%91%E6%95%B4%E7%90%86%E4%B8%80%E4%B8%AA%E5%8D%B3%E5%85%B4%E5%86%99%E7%9A%84%E6%95%B0%E6%8D%AE%E6%95%B4%E7%90%86%E5%92%8C%E5%AF%BC%E5%87%BA%E8%84%9A%E6%9C%AC/1010D_190_1.jpg" alt="1"></p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>css音频波浪动画</title>
    <url>/2023/10/03/css%E9%9F%B3%E9%A2%91%E6%B3%A2%E6%B5%AA%E5%8A%A8%E7%94%BB/</url>
    <content><![CDATA[<p>如题<br>本文主要收藏一个CSS动画，<br>可以用来配合音乐做出音频波浪的效果。</p>
<span id="more"></span>
<p><img src="/2023/10/03/css%E9%9F%B3%E9%A2%91%E6%B3%A2%E6%B5%AA%E5%8A%A8%E7%94%BB/1005D_253_1.jpg" alt="1005D_253_1.jpg"></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bars_music&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar_music&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar_music&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar_music&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar_music&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar_music&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar_music&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar_music&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar_music&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar_music&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bar_music&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bars_music</span>&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">width</span>: <span class="number">60px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">margin</span>: auto;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span>&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">background</span>: <span class="number">#FF88C2</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">border</span>:<span class="number">1px</span> solid;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">height</span>: <span class="number">3px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">width</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">bottom</span>:<span class="number">1px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation</span>: voice <span class="number">0ms</span> -<span class="number">800ms</span> linear infinite alternate;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="keyword">@keyframes</span> voice&#123;</span></span><br><span class="line"><span class="language-css">	</span></span><br><span class="line"><span class="language-css">	<span class="number">0%</span>&#123;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">height</span>: <span class="number">3px</span>;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">opacity</span>: .<span class="number">35</span>;</span></span><br><span class="line"><span class="language-css">	&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">100%</span>&#123;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">height</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">opacity</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">	&#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>)  &#123; <span class="attribute">left</span>: <span class="number">1px</span>; <span class="attribute">animation-duration</span>: <span class="number">474ms</span>; &#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>)  &#123; <span class="attribute">left</span>: <span class="number">6px</span>; <span class="attribute">animation-duration</span>: <span class="number">433ms</span>; &#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>)  &#123; <span class="attribute">left</span>: <span class="number">11px</span>; <span class="attribute">animation-duration</span>: <span class="number">407ms</span>; &#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span><span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>)  &#123; <span class="attribute">left</span>: <span class="number">16px</span>; <span class="attribute">animation-duration</span>: <span class="number">458ms</span>; &#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span><span class="selector-pseudo">:nth-child</span>(<span class="number">5</span>)  &#123; <span class="attribute">left</span>: <span class="number">21px</span>; <span class="attribute">animation-duration</span>: <span class="number">400ms</span>; &#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span><span class="selector-pseudo">:nth-child</span>(<span class="number">6</span>)  &#123; <span class="attribute">left</span>: <span class="number">26px</span>; <span class="attribute">animation-duration</span>: <span class="number">427ms</span>; &#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span><span class="selector-pseudo">:nth-child</span>(<span class="number">7</span>)  &#123; <span class="attribute">left</span>: <span class="number">31px</span>; <span class="attribute">animation-duration</span>: <span class="number">441ms</span>; &#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span><span class="selector-pseudo">:nth-child</span>(<span class="number">8</span>)  &#123; <span class="attribute">left</span>: <span class="number">36px</span>; <span class="attribute">animation-duration</span>: <span class="number">419ms</span>; &#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span><span class="selector-pseudo">:nth-child</span>(<span class="number">9</span>)  &#123; <span class="attribute">left</span>: <span class="number">41px</span>; <span class="attribute">animation-duration</span>: <span class="number">487ms</span>; &#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.bar_music</span><span class="selector-pseudo">:nth-child</span>(<span class="number">10</span>) &#123; <span class="attribute">left</span>: <span class="number">46px</span>; <span class="attribute">animation-duration</span>: <span class="number">442ms</span>; &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>前端CSS</category>
      </categories>
  </entry>
  <entry>
    <title>hexo常用的API（插件）</title>
    <url>/2023/10/01/hexo%E5%B8%B8%E7%94%A8%E7%9A%84API%EF%BC%88%E6%8F%92%E4%BB%B6%EF%BC%89/</url>
    <content><![CDATA[<p>一、前言<br>本文主要介绍一些常用&#x2F;必用插件，我用的主题主要是next，<br>next里面有很多已经支持的API，只需要在配置文件修改。<br>其他一部分则需要npm或者git安装。但一些API长年<br>没有维护或者版本更新，配置发生了变化。<br>主要说一下已经能够完成完整功能，没有出bug的插件，<br>避一下踩过的坑</p>
<span id="more"></span>
<p>二、正文<br>待更新—-<br>1.</p>
<h1 id="设置博客单词统计"><a href="#设置博客单词统计" class="headerlink" title="设置博客单词统计"></a>设置博客单词统计</h1><p>symbols_count_time:</p>
<h1 id="文章字数统计"><a href="#文章字数统计" class="headerlink" title="文章字数统计"></a>文章字数统计</h1><p>symbols: true</p>
<h1 id="文章阅读时间统计"><a href="#文章阅读时间统计" class="headerlink" title="文章阅读时间统计"></a>文章阅读时间统计</h1><p>time: true</p>
<h1 id="站点总字数统计"><a href="#站点总字数统计" class="headerlink" title="站点总字数统计"></a>站点总字数统计</h1><p>total_symbols: true</p>
<h1 id="站点总阅读时间统计"><a href="#站点总阅读时间统计" class="headerlink" title="站点总阅读时间统计"></a>站点总阅读时间统计</h1><p>total_time: true<br>exclude_codeblock: false</p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
  </entry>
  <entry>
    <title>（自用）梳理一下基本爬图思路</title>
    <url>/2023/10/01/%E6%A2%B3%E7%90%86%E4%B8%80%E4%B8%8B%E5%9F%BA%E6%9C%AC%E7%88%AC%E5%9B%BE%E6%80%9D%E8%B7%AF/</url>
    <content><![CDATA[<p><a href="/2023/09/28/%E7%94%A8selenum%E5%88%B6%E4%BD%9C%E5%89%8D%E7%AB%AF%E5%BC%8F%E7%88%AC%E8%99%AB/">前文:用Selenium制作前端式爬虫</a><br><del><em>其实也不能叫梳理了，依旧还是很乱，将就写吧</em></del><br>说到爬虫肯定少不了爬图<br><del><em>为什么说是自用，因为我回看我以前写的是根本看不懂啊</em></del><br>本来写的就很乱很乱，函数套用太多了<br>本文主要不写全部代码了，就写主要的函数的结构，以防以后维护出问题</p>
<span id="more"></span>
<p><img src="/image/930D_27_1.jpg" alt="1"></p>
<p>1.服务器访问模块<br>这里使用的是selenium所以相应有浏览器调用模块<br>driverbrowser() #浏览器调用 嵌套→browser_set() #浏览器设置<br>函数相应代码在前文有介绍</p>
<p>2.访问抓取模块<br>这几个基本都是一堆嵌套try，因为要防止服务器连接出错</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">res</span><span class="params">(url)</span></span>:</span><br><span class="line">    #防访问超时报错</span><br><span class="line">    driver=<span class="built_in">driverbrowser</span>()</span><br><span class="line">    <span class="keyword">if</span> driver!=<span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;测试&quot;</span>)</span><br><span class="line">        try:</span><br><span class="line">            url_get=<span class="built_in">browserget</span>(driver,url)</span><br><span class="line">            return url_get</span><br><span class="line">        except :</span><br><span class="line">            driver<span class="selector-class">.close</span>()</span><br><span class="line">            driver<span class="selector-class">.quit</span>()</span><br><span class="line">            secends = random<span class="selector-class">.randint</span>(<span class="number">120</span>, <span class="number">150</span>)</span><br><span class="line">            <span class="built_in">printpause</span>(secends)</span><br><span class="line">            try:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;***重试请求***&#x27;</span>)</span><br><span class="line">                driver = <span class="built_in">driverbrowser</span>()</span><br><span class="line">                url_get = <span class="built_in">browserget</span>(driver, url)</span><br><span class="line">                return url_get</span><br><span class="line">            except :</span><br><span class="line">                driver<span class="selector-class">.close</span>()</span><br><span class="line">                driver<span class="selector-class">.quit</span>()</span><br><span class="line">                <span class="built_in">printpause</span>(<span class="number">150</span>)</span><br><span class="line">                try:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&#x27;***重试请求***&#x27;</span>)</span><br><span class="line">                    driver = <span class="built_in">driverbrowser</span>()</span><br><span class="line">                    url_get = <span class="built_in">browserget</span>(driver, url)</span><br><span class="line">                    return url_get</span><br><span class="line">                except:</span><br><span class="line">                    driver<span class="selector-class">.close</span>()</span><br><span class="line">                    driver<span class="selector-class">.quit</span>()</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&#x27;***访问失败，程序继续***&#x27;</span>)</span><br><span class="line">                return <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>3.页面处理模块<br>这个地方利用伪css选择器的pyquery库实现处理的<br>写的很乱，姑且看看</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">pageget</span>(<span class="params">url,p_name=<span class="literal">None</span>,n_name=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="comment">#获取页面的信息(页数)，返回抓取主要部分</span></span><br><span class="line">    <span class="comment">#p_name 抓取最终页数</span></span><br><span class="line">    <span class="comment">#n_name 抓取下一页链接</span></span><br><span class="line">    <span class="comment">#pagenum 页数</span></span><br><span class="line">    <span class="comment">#pa_next 当前页面</span></span><br><span class="line">    <span class="comment">#nextpage 下一页链接</span></span><br><span class="line">	//略</span><br><span class="line">	<span class="keyword">return</span> pagenum,pa_next,nextpage</span><br></pre></td></tr></table></figure>
<p>此函数就是获取页面页的主要信息,页数，下一页链接，当前页资源等</p>
<figure class="highlight 1c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#p_name 抓取最终页数</span></span><br><span class="line"><span class="meta">#n_name 抓取下一页链接</span></span><br></pre></td></tr></table></figure>
<p>p_name,n_name是css选择器的定位方式<br>下一页链接有些时候不容易爬取，可以选用链接的方式如类似”&#x2F;page&#x2F;1”,据情况而定</p>
<p>4.主模块<br>爬图通常都要分主要页（也就是页面页），详细页。<br>主要页显示的图片都是压缩后的略图，毕竟是缩略图，<br>爬下来的质量堪忧，所以要进一步<br>的爬到详细页<br>大致如下<br>页面页模块</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">def pageweb(url,</span><br><span class="line">            p_name,n_name,</span><br><span class="line">            d_p_name,d_n_name,</span><br><span class="line">            <span class="attribute">fpn</span>=None):</span><br><span class="line">    # pagenum 页数</span><br><span class="line">    # pa_next 当前页面</span><br><span class="line">    # nextpage 下一页链接</span><br><span class="line">	#fpn 自定义页数</span><br><span class="line">    pagenum,pa_next,<span class="attribute">nextpage</span>=pageget(url=url,</span><br><span class="line">                                    <span class="attribute">p_name</span>=p_name,</span><br><span class="line">                                    <span class="attribute">n_name</span>=n_name)</span><br><span class="line">	</span><br><span class="line">	#略</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(int(pagenum)):</span><br><span class="line">		<span class="keyword">for</span> el0 <span class="keyword">in</span> pa0:</span><br><span class="line">			descriweb(ur,descriname,d_p_name,d_n_name)</span><br><span class="line">		pagenum, pa_next, nextpage = pageget(<span class="attribute">url</span>=nextpage,</span><br><span class="line"></span><br><span class="line">                                                 <span class="attribute">p_name</span>=p_name,</span><br><span class="line">                                                 <span class="attribute">n_name</span>=n_name)</span><br><span class="line">		</span><br></pre></td></tr></table></figure>
<p>详细页模块</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">def descriweb(ur,d_p_name,d_n_name):</span><br><span class="line">    #详细页</span><br><span class="line">    pagenum1, dl, nextpage1 = pageget(<span class="attribute">url</span>=ur,</span><br><span class="line">      </span><br><span class="line">                                      <span class="attribute">p_name</span>=d_p_name,</span><br><span class="line">                                      <span class="attribute">n_name</span>=d_n_name</span><br><span class="line">                                     )</span><br><span class="line">		<span class="keyword">for</span> i <span class="keyword">in</span> range(int(pagenum1)):</span><br><span class="line">			pagenum1, dl, nextpage1 = pageget(<span class="attribute">url</span>=nextpage1,</span><br><span class="line">      </span><br><span class="line">                                              <span class="attribute">p_name</span>=d_p_name,</span><br><span class="line">                                              <span class="attribute">n_name</span>=d_n_name</span><br><span class="line">                                              )</span><br><span class="line">			</span><br></pre></td></tr></table></figure>

<p>p_name,n_name 前一个是详细页链接定位，后一个是下一页定位<br>d_p_name,d_n_name，前一个是图片定位，后一个是下一页定位<br>（有些网站详细页也会有副页，所以要再嵌套一次，我写的虽然没有但备了一个）</p>
<p>5.数据存放模块<br>这里用的是pandas的dataframe用于存放图片链接<br>然后再输出excel</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">def saveexcel(df,path,sheet):</span><br><span class="line">    #保存数据</span><br><span class="line">    <span class="keyword">with</span> pd.<span class="constructor">ExcelWriter(<span class="params">path</span>, <span class="params">engine</span>=&#x27;<span class="params">openpyxl</span>&#x27;,<span class="params">mode</span>=&#x27;<span class="params">a</span>&#x27;)</span> <span class="keyword">as</span> writer:</span><br><span class="line">        df.<span class="keyword">to</span><span class="constructor">_excel(<span class="params">writer</span>, <span class="params">sheet_name</span>=<span class="params">sheet</span>, <span class="params">index</span>=True)</span></span><br></pre></td></tr></table></figure>

<p>6.下载图片模块<br>经历了一堆各种各样的操作之后，终于可以愉快的下图了<br>这模块是最简单的部分了，常规的pandas数据处理的部分<br>这一部分我是分开两个py文件写了，就可以先爬再下<br>由于图片下载部分不用担心反爬机制了，可以用requests库了<br>但是有时候用requests下载会卡着不动，所以还是try一下</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">def resg(url):</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.45 Safari/537.36&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    try:</span><br><span class="line">        return requests.<span class="built_in">get</span>(url,<span class="attribute">headers</span>=headers,timeout=30)</span><br><span class="line">    except:</span><br><span class="line">        secends = random.randint(60, 180)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;访问超时，程序暂停......&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(str(secends) + <span class="string">&#x27;秒后继续&#x27;</span>)</span><br><span class="line">        time.sleep(secends)  # 暂停1~3分钟，然后再尝试一次</span><br><span class="line">        try:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;重试请求......&#x27;</span>)</span><br><span class="line">            return requests.<span class="built_in">get</span>(url,<span class="attribute">headers</span>=headers,timeout=30)</span><br><span class="line">        except:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;访问超时，程序暂停......&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;3分钟后继续&#x27;</span>)</span><br><span class="line">            time.sleep(180)  # 暂停3分钟</span><br><span class="line">            return <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="attribute">start</span>=time.perf_counter()</span><br><span class="line"><span class="attribute">df</span>=pd.read_excel(io=&#x27;./picurl5.xlsx&#x27;,</span><br><span class="line">                 <span class="attribute">sheet_name</span>=<span class="string">&quot;图集&quot;</span>)</span><br><span class="line">df.drop(df.index[0])</span><br><span class="line"><span class="attribute">filename</span>=<span class="string">&quot;1001d&quot;</span> #文件名</span><br><span class="line">os.mkdir(filename)</span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> range(len(df.index)-1):</span><br><span class="line">    <span class="attribute">df1</span>=df.iloc[n+1,:]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(df.columns) - 1):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;执行第&#123;&#125;类第&#123;&#125;项目中.....&#x27;</span>.format(n + 1, i + 1))</span><br><span class="line">        pic1 = df1.iloc[i + 1]</span><br><span class="line">        <span class="keyword">if</span> pd.isna(pic1) != <span class="literal">True</span> <span class="keyword">and</span> pic1 != <span class="string">&#x27;empty&#x27;</span>:</span><br><span class="line">            r = resg(pic1)</span><br><span class="line">            <span class="keyword">if</span> r !=<span class="string">&#x27;&#x27;</span>:</span><br><span class="line">                with open(filename+<span class="string">&quot;/&quot;</span> +filename+ <span class="string">&#x27;_&#x27;</span> +str(n + 1) + <span class="string">&#x27;_&#x27;</span> + str(i + 1) + <span class="string">&quot;.jpg&quot;</span>, <span class="attribute">mode</span>=<span class="string">&quot;wb&quot;</span>) as f:</span><br><span class="line">                    f.write(r.content)</span><br><span class="line">            end = time.perf_counter()</span><br><span class="line">            runTime = end - start</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;运行时间：&#123;:.2f&#125;s&quot;</span>.format(runTime))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;执行成功&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>7.总结<br>所以总结下来大概就是<br>简写了</p>
<p>复用的部分：<br>浏览器调用函数，抓取处理函数，访问函数</p>
<p>主模块<br>页面处理模块，详细页处理模块 –&gt;调用 复用的部分–&gt;数字抓取 数据存放函数<br>–&gt;图片下载</p>
<p>需要获取的定位：<br>必选<br>页面页的图片框（每一个图片详细页链接&#x2F;文字描述等），<br>详细页的图片定位</p>
<p>可选：<br>末页（页数），下一页链接<br>如果详细页需要要获取两个<br><img src="/image/930D_171_1.jpg" alt="2"></p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>爬虫</tag>
      </tags>
  </entry>
  <entry>
    <title>【测试】js做的歌碟</title>
    <url>/2023/09/30/%E3%80%90%E7%9E%8E%E6%90%9E-%E6%B5%8B%E8%AF%95%E3%80%91js%E5%81%9A%E7%9A%84%E6%AD%8C%E7%A2%9F/</url>
    <content><![CDATA[<p>本文写的用纯JS（Jquery）写出的歌碟，<br>歌碟通过CSS转动，可以切歌。</p>
<span id="more"></span>

<p><img src="/image/929D_257_1.jpg" alt="1"></p>
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js">
</script>
<script>
var s1=true;
var musicbox=$(".musicbox_test");
function mutr(){
    if (s1==false){
        s1=true;
        $(".music_test").attr("src","/image/Akatsuki.mp3")
        $(".recent_text").text("歌曲1")
        console.log("ch1")	
        if ($(".pic_box").css("animation-play-state")=="running"){
                $(".music_pic").css({"animation-play-state":"paused"});
                $(".pic_box").css({"animation-play-state":"paused"});
                $(".music_test").get(0).pause();
                s=true;
            }
    }
    else{
        s1=false;
        $(".music_test").attr("src","/image/wonderland.mp3")
        $(".recent_text").text("歌曲2")
        console.log("ch2")
        if ($(".pic_box").css("animation-play-state")=="running"){
                $(".music_pic").css({"animation-play-state":"paused"});
                $(".pic_box").css({"animation-play-state":"paused"});
                $(".music_test").get(0).pause();
                s=true;
            }
        }
}
s=true;

function muplay(){
    if (s==false){
        s=true;
        var music=$(".music_test").get(0);
        var pic=$(".music_pic");
        var box=$(".pic_box");
        music.pause();	 
        pic.css({"animation-play-state":"paused"});
        box.css({"animation-play-state":"paused"});
        }
    else{
        var music=$(".music_test").get(0);
        var pic=$(".music_pic");
        var box=$(".pic_box");
        s=false;
        music.play();
        pic.css({"animation-play-state":"running"});
        box.css({"animation-play-state":"running"});
        
        }
}
</script>
<style>
.pic_box{
    width:250px;
    border-radius: 50%;
    background-color:white;
    animation: Box 3s linear infinite;
    animation-play-state:paused;
}
.pic_box img{
    width:200px;
    height:200px;
    animation: Box 3s linear infinite;
    animation-play-state:paused;
    
    }
@keyframes Box{
    0%{transform: rotate(0deg);}
    50%{transform: rotate(180deg);}
    100%{transform: rotate(360deg);}
}
</style>
<!--more-->
<div onclick="mutr()">
<p>音乐盒（点我切歌）</p>
<p class="recent_text">&nbsp;歌曲1</p>
</div>
<div id="box1" class="pic_box">
  <img id="pic" class="music_pic" onclick="muplay()" src="/image/420px-KoishiSubterranean封面.jpg" alt="" />
</div>
<div id="musicbox" class="musicbox_test">
    <audio id="Akatsuki" class="music_test" src="/image/Akatsuki.mp3" loop="loop" >
    </audio>
</div>


<p>源代码</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> s1=<span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> musicbox=$(<span class="string">&quot;.musicbox_test&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">mutr</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">if</span> (s1==<span class="literal">false</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">		s1=<span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">		$(<span class="string">&quot;.music_test&quot;</span>).<span class="title function_">attr</span>(<span class="string">&quot;src&quot;</span>,<span class="string">&quot;/image/Akatsuki.mp3&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">		$(<span class="string">&quot;.recent_text&quot;</span>).<span class="title function_">text</span>(<span class="string">&quot;歌曲1&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ch1&quot;</span>)	</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">if</span> ($(<span class="string">&quot;.pic_box&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;animation-play-state&quot;</span>)==<span class="string">&quot;running&quot;</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&quot;.music_pic&quot;</span>).<span class="title function_">css</span>(&#123;<span class="string">&quot;animation-play-state&quot;</span>:<span class="string">&quot;paused&quot;</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&quot;.pic_box&quot;</span>).<span class="title function_">css</span>(&#123;<span class="string">&quot;animation-play-state&quot;</span>:<span class="string">&quot;paused&quot;</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&quot;.music_test&quot;</span>).<span class="title function_">get</span>(<span class="number">0</span>).<span class="title function_">pause</span>();</span></span><br><span class="line"><span class="language-javascript">				s=<span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">	&#125;</span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">		s1=<span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">		$(<span class="string">&quot;.music_test&quot;</span>).<span class="title function_">attr</span>(<span class="string">&quot;src&quot;</span>,<span class="string">&quot;/image/wonderland.mp3&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">		$(<span class="string">&quot;.recent_text&quot;</span>).<span class="title function_">text</span>(<span class="string">&quot;歌曲2&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ch2&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">if</span> ($(<span class="string">&quot;.pic_box&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;animation-play-state&quot;</span>)==<span class="string">&quot;running&quot;</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&quot;.music_pic&quot;</span>).<span class="title function_">css</span>(&#123;<span class="string">&quot;animation-play-state&quot;</span>:<span class="string">&quot;paused&quot;</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&quot;.pic_box&quot;</span>).<span class="title function_">css</span>(&#123;<span class="string">&quot;animation-play-state&quot;</span>:<span class="string">&quot;paused&quot;</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&quot;.music_test&quot;</span>).<span class="title function_">get</span>(<span class="number">0</span>).<span class="title function_">pause</span>();</span></span><br><span class="line"><span class="language-javascript">				s=<span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">s=<span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">muplay</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">if</span> (s==<span class="literal">false</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">		s=<span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">var</span> music=$(<span class="string">&quot;.music_test&quot;</span>).<span class="title function_">get</span>(<span class="number">0</span>);</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">var</span> pic=$(<span class="string">&quot;.music_pic&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">var</span> box=$(<span class="string">&quot;.pic_box&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">		music.<span class="title function_">pause</span>();	 </span></span><br><span class="line"><span class="language-javascript">		pic.<span class="title function_">css</span>(&#123;<span class="string">&quot;animation-play-state&quot;</span>:<span class="string">&quot;paused&quot;</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">		box.<span class="title function_">css</span>(&#123;<span class="string">&quot;animation-play-state&quot;</span>:<span class="string">&quot;paused&quot;</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">		&#125;</span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">var</span> music=$(<span class="string">&quot;.music_test&quot;</span>).<span class="title function_">get</span>(<span class="number">0</span>);</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">var</span> pic=$(<span class="string">&quot;.music_pic&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">var</span> box=$(<span class="string">&quot;.pic_box&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">		s=<span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">		music.<span class="title function_">play</span>();</span></span><br><span class="line"><span class="language-javascript">		pic.<span class="title function_">css</span>(&#123;<span class="string">&quot;animation-play-state&quot;</span>:<span class="string">&quot;running&quot;</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">		box.<span class="title function_">css</span>(&#123;<span class="string">&quot;animation-play-state&quot;</span>:<span class="string">&quot;running&quot;</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">		</span></span><br><span class="line"><span class="language-javascript">		&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.pic_box</span>&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">width</span>:<span class="number">250px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">background-color</span>:white;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation</span>: Box <span class="number">3s</span> linear infinite;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation-play-state</span>:paused;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.pic_box</span> <span class="selector-tag">img</span>&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">width</span>:<span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">height</span>:<span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation</span>: Box <span class="number">3s</span> linear infinite;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation-play-state</span>:paused;</span></span><br><span class="line"><span class="language-css">	</span></span><br><span class="line"><span class="language-css">	&#125;</span></span><br><span class="line"><span class="language-css"><span class="keyword">@keyframes</span> Box&#123;</span></span><br><span class="line"><span class="language-css">	<span class="number">0%</span>&#123;<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">50%</span>&#123;<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">180deg</span>);&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">100%</span>&#123;<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);&#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--more--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onclick</span>=<span class="string">&quot;mutr()&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>音乐盒（点我切歌）<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;recent_text&quot;</span>&gt;</span><span class="symbol">&amp;nbsp;</span>歌曲1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pic_box&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;pic&quot;</span> <span class="attr">class</span>=<span class="string">&quot;music_pic&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;muplay()&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/image/420px-KoishiSubterranean封面.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;musicbox&quot;</span> <span class="attr">class</span>=<span class="string">&quot;musicbox_test&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">audio</span> <span class="attr">id</span>=<span class="string">&quot;Akatsuki&quot;</span> <span class="attr">class</span>=<span class="string">&quot;music_test&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/image/Akatsuki.mp3&quot;</span>  <span class="attr">loop</span>=<span class="string">&quot;loop&quot;</span> &gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>前端JS</category>
      </categories>
  </entry>
  <entry>
    <title>测试JS玩法</title>
    <url>/2023/09/30/%E6%B5%8B%E8%AF%95JS%E7%8E%A9%E6%B3%95/</url>
    <content><![CDATA[<p>本文主要测试JS的数学计算功能，<br>以及交互功能，本文主要用了JS的第三方完成交互功能。</p>
<span id="more"></span>
<p><a class="comcu_btn" onclick="test()">乘数计算器</a></p>
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js">
</script>
<script src="//unpkg.com/layui@2.8.17/dist/layui.js"> </script>
<script>
    function isnum(str){
        if (!isNaN(parseFloat(str)) && isFinite(str) ){
            return true}
        else{return false}
    }
    var layer ;
    layui.use('layer', function(){
        layer = layui.layer;
    });
    function test(){
        layer.prompt({
            formType:0,
            title: '乘数计算器',
            id:"layui_text",
        },function(value,index,elem){
                if(value==""){
                    alert("请输入");
                    return
                }
                var data1=$('.new_input1').val()
                if (data1==""){
                    alert("请输入")
                    return
                }
                if (isnum(value) && isnum(data1)){
                    var mu =value*data1
                    alert(mu)
                }
                else{alert("输入不合法")}
                
                layer.close(index)
            })
        
        if ($(".new_input1").length == 0){ 
            $(".layui-layer-content").append("<br/><input type=\"text\" class=\"new_input1\" placeholder=\"输入随机数\"/>")
            $(".layui-layer-btn0").append("&nbsp;&nbsp;")
            }
        $(".layui-layer.layui-layer-page.layui-layer-prompt.layer-anim.layer-anim-00").css({"border":"3px solid",
                                "font-weight":"bold",
                                "border-radius": "5px",
                                "color": "black",
                                "padding": "15px",
                                "background-color":"white"})

    }
</script>
<p>源代码</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;comcu_btn&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;test()&quot;</span>&gt;</span>乘数计算器<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;//unpkg.com/layui@2.8.17/dist/layui.js&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">function</span> <span class="title function_">isnum</span>(<span class="params">str</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">if</span> (!<span class="built_in">isNaN</span>(<span class="built_in">parseFloat</span>(str)) &amp;&amp; <span class="built_in">isFinite</span>(str) )&#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">return</span> <span class="literal">true</span>&#125;</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">else</span>&#123;<span class="keyword">return</span> <span class="literal">false</span>&#125;</span></span><br><span class="line"><span class="language-javascript">	&#125;</span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">var</span> layer ;</span></span><br><span class="line"><span class="language-javascript">    layui.<span class="title function_">use</span>(<span class="string">&#x27;layer&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        layer = layui.<span class="property">layer</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">		layer.<span class="title function_">prompt</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">formType</span>:<span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">title</span>: <span class="string">&#x27;乘数计算器&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">id</span>:<span class="string">&quot;layui_text&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">		&#125;,<span class="keyword">function</span>(<span class="params">value,index,elem</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">if</span>(value==<span class="string">&quot;&quot;</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="title function_">alert</span>(<span class="string">&quot;请输入&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">var</span> data1=$(<span class="string">&#x27;.new_input1&#x27;</span>).<span class="title function_">val</span>()</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">if</span> (data1==<span class="string">&quot;&quot;</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="title function_">alert</span>(<span class="string">&quot;请输入&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">if</span> (<span class="title function_">isnum</span>(value) &amp;&amp; <span class="title function_">isnum</span>(data1))&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">var</span> mu =value*data1</span></span><br><span class="line"><span class="language-javascript">					<span class="title function_">alert</span>(mu)</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">else</span>&#123;<span class="title function_">alert</span>(<span class="string">&quot;输入不合法&quot;</span>)&#125;</span></span><br><span class="line"><span class="language-javascript">				</span></span><br><span class="line"><span class="language-javascript">				layer.<span class="title function_">close</span>(index)</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">if</span> ($(<span class="string">&quot;.new_input1&quot;</span>).<span class="property">length</span> == <span class="number">0</span>)&#123; </span></span><br><span class="line"><span class="language-javascript">			$(<span class="string">&quot;.layui-layer-content&quot;</span>).<span class="title function_">append</span>(<span class="string">&quot;&lt;br/&gt;&lt;input type=\&quot;text\&quot; class=\&quot;new_input1\&quot; placeholder=\&quot;输入随机数\&quot;/&gt;&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">			$(<span class="string">&quot;.layui-layer-btn0&quot;</span>).<span class="title function_">append</span>(<span class="string">&quot;&amp;nbsp;&amp;nbsp;&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		$(<span class="string">&quot;.layui-layer.layui-layer-page.layui-layer-prompt.layer-anim.layer-anim-00&quot;</span>).<span class="title function_">css</span>(&#123;<span class="string">&quot;border&quot;</span>:<span class="string">&quot;3px solid&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="string">&quot;font-weight&quot;</span>:<span class="string">&quot;bold&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="string">&quot;border-radius&quot;</span>: <span class="string">&quot;5px&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="string">&quot;color&quot;</span>: <span class="string">&quot;black&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="string">&quot;padding&quot;</span>: <span class="string">&quot;15px&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="string">&quot;background-color&quot;</span>:<span class="string">&quot;white&quot;</span>&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>前端JS</category>
      </categories>
  </entry>
  <entry>
    <title>(自用/收藏)CSS效果/CSS动画</title>
    <url>/2023/09/29/CSS%E5%8A%A8%E7%94%BB/</url>
    <content><![CDATA[<p>本文主要收藏一些有用常用的CSS语句，<br>可以修饰文字或者炫酷的特效等。</p>
<span id="more"></span>
<div class="biankuang">
<p>边框效果</p>
</div>
<style>
.biankuang{
        font-size:30px;
        font-weight:bold;
        color: black;
        border: 5px solid;
        border-radius: 5px;
        padding: 15px;
        background-color:white;
    }
</style>


<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.biankuang</span>&#123;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">font-size</span>:<span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">font-weight</span>:bold;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">color</span>: black;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">border</span>: <span class="number">5px</span> solid; #厚度</span></span><br><span class="line"><span class="language-css">		<span class="attribute">border-radius</span>: <span class="number">5px</span>; #曲率</span></span><br><span class="line"><span class="language-css">		<span class="attribute">padding</span>: <span class="number">15px</span>; </span></span><br><span class="line"><span class="language-css">		<span class="attribute">background-color</span>:white;</span></span><br><span class="line"><span class="language-css">	&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<!--more-->


<div class="animate_test">
<p>边框效果</p>
</div>
<style>
.animate_test{
    animation: bounce; 
    animation-duration: 2s; 
}
</style>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;animate_test&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>边框效果<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.animate_test</span>&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation</span>: bounce; </span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation-duration</span>: <span class="number">2s</span>; </span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>前端CSS</category>
      </categories>
  </entry>
  <entry>
    <title>【算法/Python】数字提取</title>
    <url>/2023/09/29/%E3%80%90%E7%AE%97%E6%B3%95-Python%E3%80%91%E6%95%B0%E5%AD%97%E6%8F%90%E5%8F%96/</url>
    <content><![CDATA[<p>1.前言<br>数字提取是一个难题，然而爬虫有些时候是非常需要，<br>如果爬下来的数字是错的，整个数学运算就寄了</p>
<span id="more"></span>
<p><img src="/image/929D_294_1.jpg" alt="1"><br>像字符串逐个读取这样，这样的算法只能读取一个数字，<br>而且不能读取负数，百分数等</p>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">def numget(<span class="keyword">string</span>):</span><br><span class="line">    <span class="keyword">a</span> = <span class="string">&#x27;&#x27;</span>   <span class="comment"># 将空值赋值给a</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="keyword">string</span>:    <span class="comment"># 将字符串进行遍历</span></span><br><span class="line">        <span class="keyword">if</span> str.isdigit(i)==True:    <span class="comment"># 判断i是否为数字，如果“是”返回True，“不是”返回False</span></span><br><span class="line">            <span class="keyword">a</span> += i   <span class="comment"># 如果i是数字格式，将i以字符串格式加到a上</span></span><br><span class="line">        elif i==<span class="string">&quot;.&quot;</span>:</span><br><span class="line">            <span class="keyword">a</span>+=<span class="string">&quot;.&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">a</span> ==<span class="string">&quot;&quot;</span>:</span><br><span class="line">        <span class="keyword">a</span>+=<span class="string">&quot;0&quot;</span></span><br><span class="line">    <span class="literal">return</span> <span class="keyword">a</span></span><br></pre></td></tr></table></figure>

<p>如果用现成的re.findall无法解决百分数，负数，小数点的问题</p>
<figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"><span class="built_in">str</span>=<span class="string">&quot;很好hh-20.1计算机11.1你好90%我 -50&quot;</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="built_in">print</span>(re.<span class="property">findall</span>(<span class="string">&quot;\d+&quot;</span>,<span class="built_in">str</span>))</span><br><span class="line"># 输出：[<span class="string">&#x27;20&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;90&#x27;</span>, <span class="string">&#x27;50&#x27;</span>]</span><br></pre></td></tr></table></figure>
<p>再试试正则表达式呢<br>网上找到的常用方法</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">sentence = <span class="string">&quot;很好hh-20.1计算机11.1你好90%我 -50&quot;</span></span><br><span class="line">s = [<span class="built_in">float</span>(s) <span class="keyword">for</span> s <span class="keyword">in</span> re.findall(<span class="string">r&#x27;-?\d+\.?\d*&#x27;</span>, sentence)]</span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line"><span class="comment">#输出：[-20.1, 11.1, 90.0, -50.0]</span></span><br></pre></td></tr></table></figure>
<p>然而寄在百分数上了</p>
<p>但其实好像是能做的，把%的匹配给加上</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">sentence = <span class="string">&quot;很好hh-20.1计算机11.1你好90%我 -50&quot;</span></span><br><span class="line">s2 = [s  <span class="keyword">for</span> s <span class="keyword">in</span> re.findall(<span class="string">r&#x27;-?\d+%?\.?\d*&#x27;</span>, sentence)  ]</span><br><span class="line">s3=[]</span><br><span class="line"><span class="keyword">for</span> s <span class="keyword">in</span> s2:</span><br><span class="line">    <span class="keyword">if</span> is_number(s)==<span class="literal">False</span>:</span><br><span class="line">        s=s.replace(<span class="string">&quot;%&quot;</span>,<span class="string">&quot;&quot;</span>)</span><br><span class="line">        s=<span class="built_in">float</span>(s)/<span class="number">100</span></span><br><span class="line">    s3.append(s)</span><br><span class="line"><span class="built_in">print</span>(s3)</span><br><span class="line"><span class="comment">#[&#x27;-20.1&#x27;, &#x27;11.1&#x27;, 0.9, &#x27;-50&#x27;]</span></span><br></pre></td></tr></table></figure>
<p>其实还是挺麻烦的</p>
<p>2.自己乱写的算法，写得超级超级的乱<br>在数字提取之前应该需要一个判断数字的函数<br>isdigit()可以判断单个字符<br>可能会有疏漏，但基本满足了需求</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">numget</span>(<span class="params">string</span>):</span><br><span class="line">    a = <span class="string">&#x27;&#x27;</span>   <span class="comment"># 将空值赋值给a</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> string:    <span class="comment"># 将字符串进行遍历</span></span><br><span class="line">        <span class="keyword">if</span> is_number(i)==<span class="literal">True</span>:    <span class="comment"># 判断i是否为数字</span></span><br><span class="line">            a += i</span><br><span class="line">        <span class="keyword">if</span> i==<span class="string">&quot;.&quot;</span> <span class="keyword">or</span> i==<span class="string">&quot;%&quot;</span> <span class="keyword">or</span> i==<span class="string">&quot;-&quot;</span>:</span><br><span class="line">            a+=i</span><br><span class="line">        <span class="keyword">elif</span> is_number(i)==<span class="literal">False</span> :</span><br><span class="line">            a+=<span class="string">&quot; &quot;</span> <span class="comment">#为数字之间制造间隔</span></span><br><span class="line">    <span class="keyword">if</span> a ==<span class="string">&quot;&quot;</span>:</span><br><span class="line">        a+=<span class="string">&quot;0&quot;</span></span><br><span class="line">	<span class="comment">#非数字部分会全部变成空格，所以要删掉空格并分离数字</span></span><br><span class="line">    numlist=spaceremove(a)</span><br><span class="line">	<span class="comment">#删掉空格然后分离，获取数字断点</span></span><br><span class="line">    temp=tempsolve(numlist)</span><br><span class="line">	<span class="comment">#获取每个数字的区间</span></span><br><span class="line"></span><br><span class="line">    arr=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> temp:</span><br><span class="line">        e1,e2=i[<span class="number">0</span>],i[<span class="number">1</span>]</span><br><span class="line">        t=a[e1:e2+<span class="number">1</span>]</span><br><span class="line">        arr.append(t) <span class="comment">#arr就是分离出的数字列表</span></span><br><span class="line">    arr1=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> arr:</span><br><span class="line">        i=numchange(i) <span class="comment">#把百分数换成小数，并把其他数字换成浮点数</span></span><br><span class="line">        arr1.append(i)</span><br><span class="line">    <span class="keyword">return</span> arr1</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">spaceremove</span>(<span class="params"><span class="built_in">str</span></span>):</span><br><span class="line">    <span class="comment">#判断数字分隔</span></span><br><span class="line">    <span class="built_in">list</span>=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(<span class="built_in">str</span>)):</span><br><span class="line">        e1=<span class="built_in">str</span>[i]</span><br><span class="line">        <span class="keyword">if</span> e1.isdigit()==<span class="literal">True</span> <span class="keyword">or</span> e1==<span class="string">&quot;.&quot;</span> <span class="keyword">or</span> e1==<span class="string">&quot;%&quot;</span> <span class="keyword">or</span> e1==<span class="string">&quot;-&quot;</span>:</span><br><span class="line">            <span class="built_in">list</span>.append(i)</span><br><span class="line"></span><br><span class="line">    temp=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(<span class="built_in">list</span>)):</span><br><span class="line">        e1=<span class="built_in">list</span>[i]</span><br><span class="line">        <span class="keyword">if</span> i&lt;<span class="built_in">len</span>(<span class="built_in">list</span>)-<span class="number">1</span>:</span><br><span class="line">            e2=<span class="built_in">list</span>[i+<span class="number">1</span>]</span><br><span class="line">            <span class="keyword">if</span> e2 -e1!=<span class="number">1</span>:</span><br><span class="line">                temp.append(e1+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">if</span> temp[<span class="number">0</span>]!=<span class="number">0</span>:</span><br><span class="line">        temp1=[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> temp:</span><br><span class="line">            temp1.append(i)</span><br><span class="line">        temp1.append(<span class="built_in">list</span>[-<span class="number">1</span>])</span><br><span class="line">        temp=temp1</span><br><span class="line">    <span class="keyword">return</span> temp</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">tempsolve</span>(<span class="params">numlist</span>):</span><br><span class="line">    <span class="comment">#判断数字的区间 最后return一个复合列表</span></span><br><span class="line">    temp = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(numlist)):</span><br><span class="line">        e1 = numlist[i]</span><br><span class="line">        <span class="keyword">if</span> i &lt; <span class="built_in">len</span>(numlist) - <span class="number">1</span>:</span><br><span class="line">            e2 = numlist[i + <span class="number">1</span>]</span><br><span class="line">            temp1 = []</span><br><span class="line">            temp1.append(e1)</span><br><span class="line">            temp1.append(e2)</span><br><span class="line">            temp.append(temp1)</span><br><span class="line">    <span class="keyword">return</span> temp</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">numchange</span>(<span class="params"><span class="built_in">str</span></span>):</span><br><span class="line">    <span class="comment">#处理百分数</span></span><br><span class="line">    a=<span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">if</span> i==<span class="string">&quot;%&quot;</span>:</span><br><span class="line">            a+=<span class="string">&quot;%&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="built_in">str</span>=<span class="built_in">float</span>(<span class="built_in">str</span>)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">if</span> a==<span class="string">&quot;%&quot;</span>:</span><br><span class="line">            b=<span class="string">&quot;&quot;</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">str</span>:</span><br><span class="line">                <span class="keyword">if</span> i.isdigit()==<span class="literal">True</span>:</span><br><span class="line">                    b+=i</span><br><span class="line">            <span class="keyword">if</span> b!=<span class="string">&quot;&quot;</span>:</span><br><span class="line">                <span class="built_in">str</span>=<span class="built_in">int</span>(b)/<span class="number">100</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">str</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">str</span>=<span class="string">&quot;很好hh-20.1计算机11.1你好90%我 -50&quot;</span></span><br><span class="line"><span class="built_in">print</span>(numget(<span class="built_in">str</span>))</span><br><span class="line"><span class="comment"># 输出结果：[-20.1, 11.1, 0.9, -50.0]</span></span><br></pre></td></tr></table></figure>


<p><img src="/image/929D_262_1.jpg" alt="2"></p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>【算法/Python】DataFrame的单行指定插入</title>
    <url>/2023/09/29/%E3%80%90%E7%AE%97%E6%B3%95-Python%E3%80%91DataFrame%E7%9A%84%E5%8D%95%E8%A1%8C%E6%8C%87%E5%AE%9A%E6%8F%92%E5%85%A5/</url>
    <content><![CDATA[<p>1.前言<br>Pandas的DataFrame常常用于存储二维数组<br>pandas的功能也比较强大，可以对接excel。<br>但当数据行数很多的情况，就想要新数据插入指定行，<br>似乎pandas并没有现成的函数支持<br>只有比较原始的插入，而且这种方法必须要求list的长度等于df的列数<br>于是就想写一个</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">df.<span class="keyword">loc</span>[<span class="built_in">len</span>(df.<span class="built_in">index</span>)]=<span class="keyword">list</span> </span><br></pre></td></tr></table></figure>
<span id="more"></span>

<p><img src="/image/929D_226_1.jpg" alt="1"><br>2.算法<br>废话不多说上算法<br>利用分离，然后上下合并（concat）的方法<br>通常数据较多用行名作参数比较容易</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line">def <span class="built_in">dfinsert</span>(df, indexname, list,name):</span><br><span class="line">	#df为原数据，list为想要插入的数据</span><br><span class="line">    df_add = pd.<span class="built_in">DataFrame</span>(</span><br><span class="line">		columns=<span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(list) + <span class="number">1</span>))</span><br><span class="line">		)</span><br><span class="line">    df_add.loc[name] = list #创建想要插入的df数据</span><br><span class="line">    df1 = df.loc[:indexname, :]</span><br><span class="line">	# 不同于行数定位，要获取下一行有点绕</span><br><span class="line">    y=<span class="string">&quot;&quot;</span></span><br><span class="line">    for e in <span class="built_in">range</span>(<span class="built_in">len</span>(<span class="built_in">list</span>(df.index))):</span><br><span class="line">        if <span class="built_in">list</span>(df.index)[e]==indexname:</span><br><span class="line">            y=<span class="built_in">list</span>(df.index)[e+<span class="number">1</span>]</span><br><span class="line">    df2 = df.loc[y:, :]</span><br><span class="line">    df_new = pd.<span class="built_in">concat</span>([df1, df_add, df2])</span><br><span class="line">    return df_new #合并后的数据</span><br></pre></td></tr></table></figure>

<p>也可以用行数作参数，基本就改一下</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">dfinsert</span>(<span class="params">df, i, listt1,name</span>):</span><br><span class="line">	i=<span class="built_in">int</span>(i) <span class="comment"># 如果i是str先换成int</span></span><br><span class="line">    df_add = pd.DataFrame(</span><br><span class="line">        columns=<span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(listt1) + <span class="number">1</span>)))</span><br><span class="line">    df_add.loc[name] = listt1</span><br><span class="line">    df1 = df.loc[:i, :]</span><br><span class="line">	<span class="comment"># 行数定位加1就完了</span></span><br><span class="line">    df2 = df.loc[i+<span class="number">1</span>:, :]</span><br><span class="line">    df_new = pd.concat([df1, df_add, df2])</span><br><span class="line">    <span class="keyword">return</span> df_new <span class="comment">#合并后的数据</span></span><br></pre></td></tr></table></figure>
<p>完结</p>
]]></content>
      <categories>
        <category>算法</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>jQuery的css选择器的写法</title>
    <url>/2023/09/28/jQuery%E7%9A%84css%E9%80%89%E6%8B%A9%E5%99%A8%E7%9A%84%E5%86%99%E6%B3%95/</url>
    <content><![CDATA[<p>前文传送门<br><a href="/2023/09/27/%E7%94%A8JS%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%88%B6%E4%BD%9C%E7%9A%84%E7%AE%80%E6%98%93%E7%88%AC%E8%99%AB">前文：用JS（前端）制作的简易爬虫</a></p>
<p><a href="https://www.runoob.com/jquery/jquery-install.html">参考</a></p>
<p>1.jQuery<br>jQuery主要可以简化一部分JS写法，同时功能性也很强大<br>笔者目前在学习阶段，对jQuery只是小有拙见，有误见谅。</p>
<span id="more"></span>
<p><img src="/image/928D_149_1.jpg" alt="1"><br>2.jQuery的使用方法<br>调用jQuery</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这里用了百度源，也可以用其他的</p>
<p>3.函数写法差异<br>jQuery的写法更为简练<br>例：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;test_text&quot;</span>&gt;<span class="variable constant_">TEST</span>&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//js写法</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">var</span> text=<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.test_text&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="variable language_">console</span>.<span class="title function_">log</span>(text) <span class="comment">//输出TEST</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//jquery写法</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">var</span> text=$(<span class="string">&quot;.test_text&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="variable language_">console</span>.<span class="title function_">log</span>(text) <span class="comment">//输出TEST</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>4.常用函数<br>修改<br>.attr(“”,””) #属性<br>.css({“”:””}) #css样式<br>.text(“”) #文本<br>不赋值则会直接更改元素html</p>
<p>5.jQuery关于music pause的坑</p>
<figure class="highlight mel"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&quot;&quot;</span>).get(<span class="number">0</span>).<span class="keyword">pause</span>()</span><br><span class="line"><span class="comment">//或</span></span><br><span class="line">$(<span class="string">&quot;&quot;</span>)[<span class="number">0</span>].<span class="keyword">pause</span>()</span><br></pre></td></tr></table></figure>
<p>如果直接,会报错</p>
<figure class="highlight mel"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&quot;&quot;</span>).<span class="keyword">pause</span>()</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>前端JS</category>
      </categories>
      <tags>
        <tag>介绍</tag>
      </tags>
  </entry>
  <entry>
    <title>用JS（前端）制作的简易爬虫</title>
    <url>/2023/09/27/%E7%94%A8JS%EF%BC%88%E5%89%8D%E7%AB%AF%EF%BC%89%E5%88%B6%E4%BD%9C%E7%9A%84%E7%AE%80%E6%98%93%E7%88%AC%E8%99%AB/</url>
    <content><![CDATA[<p>本文主要介绍用油猴（Tampermonkey）实现的前端爬虫<br>不涉及跨域传输，非常基础的内容<br>优点很明显，快速（有时按需求可以几分钟写完），针对性，不用担心反爬<br>缺点，不同排布的网站就会失效，或者网站更新就寄了<br>核心为CSS选择器<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Selectors">参考1</a><br><a href="https://www.runoob.com/jsref/met-document-queryselector.html">参考2</a></p>
<span id="more"></span>
<p><img src="/image/232_1.jpg" alt="1"><br>1.定位（CSS选择器）</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.<span class="built_in">querySelector</span>(<span class="string">&quot;标签(层级)定位/类定位/ID定位&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>（1）例:标签(层级)定位</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello</span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span>Hallo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.<span class="built_in">querySelector</span>(<span class="string">&quot;p&quot;</span>).innerText #取出的是Hallo和你好</span><br></pre></td></tr></table></figure>
<p>如果想要只取出Hallo则应写成</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.<span class="built_in">querySelector</span>(<span class="string">&quot;div&gt;p&quot;</span>).innerText #取出的是Hallo</span><br></pre></td></tr></table></figure>
<p>（2）例：类定位</p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=&quot;<span class="symbol">Hello_div</span>&quot;&gt;<span class="symbol">Hello</span></span><br><span class="line">	&lt;<span class="symbol">p</span>&gt;<span class="symbol">Hallo</span>&lt;/<span class="symbol">p</span>&gt;</span><br><span class="line">&lt;/<span class="symbol">div</span>&gt;</span><br><span class="line">&lt;<span class="symbol">div</span> <span class="symbol">class</span>=&quot;<span class="symbol">nihao_div</span>&quot;&gt;</span><br><span class="line">	&lt;<span class="symbol">p</span>&gt;你好&lt;/<span class="symbol">p</span>&gt;</span><br><span class="line">&lt;/<span class="symbol">div</span>&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.<span class="built_in">querySelector</span>(<span class="string">&quot;.Hello_div&quot;</span>).innerText #取出的是Hello和Hallo</span><br><span class="line"><span class="built_in">document</span>.<span class="built_in">querySelector</span>(<span class="string">&quot;.nihao_div&quot;</span>).innerText #取出的是你好</span><br></pre></td></tr></table></figure>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line">注：如果<span class="keyword">class</span>名中存在空格的情况,如<span class="string">&quot;Hello div&quot;</span>,应写成<span class="string">&quot;.Hello.div&quot;</span></span><br></pre></td></tr></table></figure>
<p>Class定位也可以像进行层级，可用于存在多个标签叠放方式的情况<br>（3）ID定位<br>ID基本与Class相同<br>用法为</p>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">&lt;<span class="keyword">div</span> <span class="built_in">class</span>=<span class="string">&quot;nihao&quot;</span>&gt;</span><br><span class="line">	&lt;p&gt;你好&lt;/p&gt;</span><br><span class="line">&lt;/<span class="keyword">div</span>&gt;</span><br><span class="line">document.querySelector(<span class="string">&quot;#nihao&quot;</span>).innerText <span class="comment">#取出的是你好</span></span><br></pre></td></tr></table></figure>

<p>2.常用函数<br>.innerText用于取出文本<br>.innerHTML可取出这个标签包含的HTML内容<br>.attributes(“属性名”)<br>.style(“样式”),具体样式则是.style.backgroundColor()<br>等，这里就不一一列全了，需要自己可以去查找。</p>
<p>3.处理多个元素<br>.querySelector()只会取出单一元素，存在多个元素就只取第一个出现的<br>要取出多个元素需要用.querySelectorAll()，可以用for循环逐一取出<br>如</p>
<figure class="highlight abnf"><table><tr><td class="code"><pre><span class="line">var items <span class="operator">=</span> document.querySelectorAll(<span class="string">&quot;p&quot;</span>)<span class="comment">;</span></span><br><span class="line">for (i <span class="operator">=</span> <span class="number">0</span><span class="comment">; i &lt; items.length; i++) &#123;</span></span><br><span class="line">    console.log(items.innerText)<span class="comment">; #逐个输出出p标签的text</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者用forEach写<br>forEach方法中的function回调有三个参数：<br>第一个参数是数组内容，<br>第二个参数是对应的数组索引，<br>第三个参数是数组本身</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;p&quot;</span>).<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">item，index</span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(index.<span class="property">innerText</span>); #index是索引</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(item.<span class="property">innerText</span>); #item是里面的内容</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//简写</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;p&quot;</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">e</span>=&gt;</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">innerText</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>




<p>4.上述基本介绍了js爬虫实现的方法原理<br>下面介绍通过油猴实现的浏览器爬虫<br>新建脚本大致如下<br><img src="/image/1_5_1.png" alt="1"><br>前面部分是脚本声明</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">//</span> @name         New Userscript   <span class="comment">#（脚本名称）</span></span><br><span class="line"><span class="regexp">//</span> @namespace    http:<span class="regexp">//</span>tampermonkey.net/</span><br><span class="line"><span class="regexp">//</span> @version      <span class="number">0.1</span></span><br><span class="line"><span class="regexp">//</span> @description  try to take over the world!   <span class="comment">#（介绍）</span></span><br><span class="line"><span class="regexp">//</span> @author       You  （制作者的名字）</span><br><span class="line"><span class="regexp">//</span> @match        http:<span class="regexp">//</span>*/*   <span class="comment">#（适用的网站）</span></span><br><span class="line"><span class="regexp">//</span> @icon         data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==   <span class="comment">#头像</span></span><br><span class="line"><span class="regexp">//</span> @grant        none    <span class="comment">#第三方库调用</span></span><br></pre></td></tr></table></figure>

<p>下面部分是具体代码部分，可以直接删掉</p>
<figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">(<span class="name">function</span>() &#123;</span><br><span class="line">    <span class="symbol">&#x27;use</span> strict&#x27;<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">    // Your code here...</span><br><span class="line">&#125;)()<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<p>4.废话不多说下面上一个简单实例<br><img src="/image/1_5_2.png" alt="1"><br>其实像类似这样很陈旧的网站，很难定位，<br>因为它根本没有ID，甚至连Class都没有<br>所以想到的是层级定位，写法十分原始<br><img src="/image/1_5_3.png" alt="2"><br>可以发现一部分是为”td&gt;div&gt;a&gt;font”的层级写的<br>以下代码可以分别取出文本</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.<span class="built_in">querySelectorAll</span>(<span class="string">&quot;td&gt;div&gt;a&quot;</span>).forEach(el =&gt; &#123;</span><br><span class="line">        <span class="keyword">var</span> Text = el.<span class="built_in">querySelector</span>(<span class="string">&#x27;font&#x27;</span>).innerText</span><br><span class="line">	&#125;)	</span><br></pre></td></tr></table></figure>

<p>数值取出</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">document.querySelectorAll(<span class="string">&quot;td&gt;input&quot;</span>).forEach(<span class="function"><span class="params">el</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> <span class="built_in">Text</span> = el.value</span><br><span class="line">        List.<span class="built_in">push</span>(<span class="built_in">Text</span>)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>
<p>用一个空Array存储然后输出后<br>会发现有一部分是没有取出的<br>因为有另外一部分不是以这个层级排布的<br>不过介绍了<br>下面是全代码,比较乱,将就着看</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getTotal</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> List = <span class="keyword">new</span> <span class="built_in">Array</span>() </span><br><span class="line">    <span class="keyword">var</span> List1 = <span class="keyword">new</span> <span class="built_in">Array</span>()</span><br><span class="line">    document.querySelectorAll(<span class="string">&quot;td&gt;div&gt;div&gt;a&gt;font&quot;</span>).forEach(<span class="function"><span class="params">e0</span> =&gt;</span> &#123;</span><br><span class="line">        List1.<span class="built_in">push</span>(e0.innerText)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">var</span> n = <span class="number">0</span></span><br><span class="line">    document.querySelectorAll(<span class="string">&quot;td&gt;a&quot;</span>).forEach(<span class="function"><span class="params">el</span> =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> <span class="built_in">Text</span> = el.querySelector(<span class="string">&#x27;font&#x27;</span>).innerText</span><br><span class="line">        n=n+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> (n==<span class="number">16</span>)&#123;</span><br><span class="line">            <span class="keyword">var</span> Text2=List1[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">            List.<span class="built_in">push</span>(Text2)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (n==<span class="number">19</span>)&#123;</span><br><span class="line">            <span class="keyword">var</span> Text3=List1[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">            List.<span class="built_in">push</span>(Text3)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Text</span>!=<span class="string">&quot;&quot;</span>||<span class="built_in">Text</span>!=<span class="literal">null</span>||<span class="built_in">Text</span>!=<span class="literal">undefined</span>)&#123;</span><br><span class="line">            List.<span class="built_in">push</span>(<span class="built_in">Text</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">    document.querySelectorAll(<span class="string">&quot;td&gt;div&gt;a&quot;</span>).forEach(<span class="function"><span class="params">el</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> <span class="built_in">Text</span> = el.querySelector(<span class="string">&#x27;font&#x27;</span>).innerText</span><br><span class="line">        n=n+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> (n==<span class="number">16</span>)&#123;</span><br><span class="line">            <span class="keyword">var</span> Text2=List1[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">            List.<span class="built_in">push</span>(Text2)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (n==<span class="number">19</span>)&#123;</span><br><span class="line">            <span class="keyword">var</span> Text3=List1[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">            List.<span class="built_in">push</span>(Text3)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Text</span>!=<span class="string">&quot;&quot;</span>||<span class="built_in">Text</span>!=<span class="literal">null</span>||<span class="built_in">Text</span>!=<span class="literal">undefined</span>)&#123;</span><br><span class="line">            List.<span class="built_in">push</span>(<span class="built_in">Text</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">var</span> num=<span class="number">1</span></span><br><span class="line">    document.querySelectorAll(<span class="string">&quot;td&gt;input&quot;</span>).forEach(<span class="function"><span class="params">el</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> <span class="built_in">Text</span> = el.value</span><br><span class="line">        num=num+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> (num==<span class="number">5</span>)&#123;</span><br><span class="line">            <span class="keyword">var</span> Select=document.querySelector(<span class="string">&quot;td&gt;select&quot;</span>).size</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (Select==<span class="number">1</span>)&#123;</span><br><span class="line">                Select=<span class="string">&quot;Yes&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                Select=<span class="string">&quot;No&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            List.<span class="built_in">push</span>(Select)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        List.<span class="built_in">push</span>(<span class="built_in">Text</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.<span class="built_in">log</span>(<span class="string">&#x27;Success:&#x27;</span>,List);</span><br><span class="line">&#125;</span><br><span class="line">getTotal()</span><br></pre></td></tr></table></figure>

<p>5.结语<br><img src="/image/256_1.jpg" alt="1"><br>上面举例了一个比较离谱的例子（很好奇做的时候是怎么不弄混的）<br>其实上现在大部分网站都有类标识，用类定位会更加快速准确</p>
]]></content>
      <categories>
        <category>前端JS</category>
      </categories>
      <tags>
        <tag>介绍</tag>
        <tag>前端爬虫</tag>
      </tags>
  </entry>
  <entry>
    <title>搬运资料</title>
    <url>/2023/09/26/%E8%B5%84%E6%96%99/</url>
    <content><![CDATA[<p>hexo单设备部署多个服务器<br><a href="https://zhuanlan.zhihu.com/p/69218641">引用文章</a><br>毕竟github可以免费提供网页部署，github注册方式<br>又很简单，所以多账号部署并不是难事</p>
<span id="more"></span>
<p><img src="/image/2.jpeg" alt="1"></p>
]]></content>
      <categories>
        <category>测试</category>
      </categories>
  </entry>
  <entry>
    <title>东华大学介绍</title>
    <url>/2023/09/26/%E6%B5%8B%E8%AF%95/</url>
    <content><![CDATA[<p>东华大学介绍<br>学校介绍<br>东华大学是教育部直属、国家“211工程”、国家“双一流”建设高校。学校秉承“崇德博学、砺志尚实”的校训，不断开拓奋进，已发展成为以纺织、材料、设计为优势，特色鲜明的多科性、高水平大学。</p>
<span id="more"></span>
<p><img src="/image/1.png" alt="1"><br>学校的办学历史可追溯至1912年实业家张謇创办的纺织染传习所。1951年建校，时名华东纺织工学院。1960年，被国家教育部确定为全国重点大学。1981年，成为中国首批具有博士、硕士、学士三级学位授予权的大学之一。1985年，更名为中国纺织大学。1998年，被确定为国家“211工程”重点建设的高等学校。1999年，更名为东华大学。2017年，列入国家“双一流”建设高校。</p>
<p>学校地处中国上海，现有松江校区、延安路校区和新华路校区，占地面积近2000亩，校舍总建筑面积83万余平方米。学校是“上海市花园单位”和“上海市文明校园”。松江校区是国家级水利风景区。</p>
<p>学校全校教职工2289人，专任教师1462人，其中专职院士２人，资深院士2人，兼职院士17人，万人计划、长江学者、国家杰青等高层次人才60余人次，其他高级职称教师900余名。全校本科生14422人，硕士研究生7255人，博士研究生1404人，学历留学生705人。</p>
<p>学校现设有18个学院（部），拥有6个博士后流动站、11个一级学科博士点、3个博士专业学位授权类别、29个一级学科硕士点、2个二级学科硕士点、17个专业学位硕士授权类别、59个本科专业，涵盖工学、理学、管理学、经济学、艺术学、文学、法学、历史学、教育学九大学科门类。现有2个国家“双一流”建设学科， 1个上海高校Ι类高峰学科。纺织科学与工程保持国内领先，获评A+学科。化学、工程学、数学、材料科学、计算机科学、环境科学与生态学、生物与生化7个学科入围ESI全球前1%，其中材料科学学科进入全球前1‰。拥有1个国家重点实验室、1个国家工程技术研究中心、22个省部级重点科研平台，2个国家引智基地以及国家大学科技园。</p>
<p>学校以培养德智体美劳全面发展的社会主义建设者和接班人为根本任务，坚持“严谨、勤奋、求实、创新”的优良校风，培养基础宽厚、实践能力强、具有创新精神和社会责任感的高素质人才。学校积极建设“五育并举”的教育体系，构建本科生“分层教学、分流培养、多元成才、人人成才”的培养体系，持续深化教育教学改革，新世纪以来，获国家级教学成果奖8项。拥有2个国家级实验教学示范中心，1个国家级虚拟仿真实验教学中心，3个国家工程实践教育中心，10个国家级特色专业，29个国家级一流本科专业。入选 “全国高校黄大年式教师团队” 2个。学校积极构建一流的研究生培养机制，大力发展专业学位研究生教育，获评全国示范性工程专业学位研究生联合培养基地2个，首批进入教育部“卓越工程师教育培养计划”，获评“全国工程硕士研究生教育创新院校”。东华学子近三年获得国内外学科竞赛、文体比赛冠军、金奖或一等奖260余项，充分彰显学生的创造力。女足获大学生联赛全国冠军，学校进入“中国高校体育竞赛榜”前20名。学校全面推进双创教育，产教融合人才培养协同机制成效显著，新材料现代产业学院获批教育部首批现代产业学院，成为全国首次获批的50所现代产业学院之一。获评全国高校实践育人创新创业基地、全国创新创业典型经验高校、全国高等学校毕业生就业工作先进集体等荣誉。近年来，毕业生平均就业率超过96%，薪资位于中国高校毕业生薪酬指数排名16-21位，近五年，学生自主创业420余人。建校至今，为国家培养各类人才26万余人，毕业生成为各行各业的中坚和栋梁。</p>
<p>学校坚持产学研用相结合的办学特色，承接国家重大科研任务，支撑国家产业转型升级和新兴产业发展等战略需求。新世纪以来，获国家自然科学奖、国家技术发明奖和国家科技进步奖31项。大批科研成果广泛应用于航天航空、重大建筑工程、环境保护等领域，为“天宫”“天舟”“北斗”“天通”“嫦娥”做出贡献。纤维材料改性国家重点实验室获评“优秀”，获批建设国家先进功能纤维创新中心、国家先进印染技术创新中心、民用航空复合材料省部共建协同创新中心、上海市现代纺织前沿科学研究基地、“一带一路”纺织智能制造与工程国际联合实验室等。建立海派时尚设计及价值创造协同创新中心、城市创意经济与创新服务研究基地、东华大学“一带一路”研究中心等，服务国家经济社会发展、长三角一体化发展国家战略和上海时尚之都、设计之都建设。</p>
<p>学校大力推进新时期教育对外开放，积极对接国家“一带一路”重要倡议，联合18个国家35所纺织特色高校成立“一带一路”世界纺织大学联盟，与全球150多所国（境）外高校建立了良好的合作关系。获批教育部“中非高校20+20合作计划”，在肯尼亚莫伊大学建立世界首家纺织服装特色的莫伊大学孔子学院。与爱丁堡大学合作创办东华大学上海国际时尚创意学院，培养国际一流时尚创意人才。</p>
<p>面向未来，东华大学将继续以习近平新时代中国特色社会主义思想为指导，全面落实立德树人根本任务，加快“双一流”建设，全力服务国家和上海市的战略需求，为实现“国内一流、国际有影响，有特色的高水平研究型大学”的目标而不懈奋斗！</p>
]]></content>
      <categories>
        <category>测试</category>
      </categories>
  </entry>
</search>
